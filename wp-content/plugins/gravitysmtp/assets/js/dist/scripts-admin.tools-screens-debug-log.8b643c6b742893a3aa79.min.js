"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2668,5491],{43645:function(e,t,r){r.r(t);var n=r(71860),o=r(90455),a=r(88856),i=r(8140),c=r(78564),u=r.n(c),s=r(27122),l=r.n(s),d=r(97867),p=r(60177),g=r(21713),v=r(84860),b=r(5529),f=r(96343),m=r(76910),h=r(83391),y=r(57003),_=r(43054),A=r(83707),O=r(93313),P=r(63531),j=r(79929),w=r(52014);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=d.React.forwardRef,S=d.React.useEffect,T=d.React.useRef,x=d.React.useState,k=d.ReactRouter.useLocation,L=d.ReactRouter.useNavigate,C=d.ReactRouter.useSearchParams,E="log_page",I="search_term",N=new URLSearchParams(window.location.search),z=N.get(E)||"1",M=N.get(I)||"",B=R((function(e,t){var r=e.customAttributes,c=void 0===r?{}:r,s=e.customClasses,R=void 0===s?[]:s,N=e.common,B=void 0===N?{}:N,G=e.data,H=void 0===G?{}:G,J=e.i18n,U=void 0===J?{}:J,q=B.endpoints,F=(void 0===q?{}:q).debug_log_page,K=F.action,Q=void 0===K?"":K,V=F.nonce,W=void 0===V?"":V,X=U||{},Y=X.debug_log,Z=void 0===Y?{}:Y,$=Z.top_heading,ee=void 0===$?"":$,te=Z.data_grid,re=void 0===te?{}:te,ne=re.top_heading,oe=void 0===ne?"":ne,ae=re.clear_search_aria_label,ie=void 0===ae?"":ae,ce=re.empty_title,ue=void 0===ce?"":ce,se=re.empty_message,le=void 0===se?"":se,de=re.grid_controls_search_button_label,pe=void 0===de?"":de,ge=re.grid_controls_search_placeholder,ve=void 0===ge?"":ge,be=re.pagination_next,fe=void 0===be?"":be,me=re.pagination_prev,he=void 0===me?"":me,ye=re.pagination_next_aria_label,_e=void 0===ye?"":ye,Ae=re.pagination_prev_aria_label,Oe=void 0===Ae?"":Ae,Pe=re.search_no_results_title,je=void 0===Pe?"":Pe,we=re.search_no_results_message,De=void 0===we?"":we,Re=Z.snackbar_debug_log_error,Se=void 0===Re?"":Re,Te=X.debug_messages,xe=void 0===Te?{}:Te,ke=xe.fetching_debug_log_page,Le=void 0===ke?"":ke,Ce=xe.fetching_debug_log_page_error,Ee=void 0===Ce?"":Ce,Ie=(null==H?void 0:H.debug_log)||{},Ne=Ie.data_grid,ze=void 0===Ne?{}:Ne,Me=ze.columns,Be=void 0===Me?[]:Me,Ge=ze.column_style_props,He=void 0===Ge?{}:Ge,Je=ze.data,Ue=void 0===Je?[]:Je,qe=Ie.initial_load_timestamp,Fe=void 0===qe?"":qe,Ke=Ie.initial_row_count,Qe=void 0===Ke?0:Ke,Ve=Ie.rows_per_page,We=void 0===Ve?7:Ve,Xe=(null==H?void 0:H.caps)||{},Ye=k(),Ze=L(),$e=(0,v.dh)(),et=C(),tt=(0,i.A)(et,2),rt=tt[0],nt=(tt[1],x(Ue.length>0?We:7)),ot=(0,i.A)(nt,2),at=ot[0],it=ot[1],ct=x(Qe),ut=(0,i.A)(ct,2),st=ut[0],lt=ut[1],dt=(0,w.default)((function(e){return e.setDebugDetailsDialogData})),pt=(0,w.default)((function(e){return e.setDebugDetailsDialogOpen})),gt=T(),vt=T(!1),bt=(0,j.h)({page:z,searchTerm:M}),ft=(0,j.A)((0,a.A)({},bt,{rows:Ue,totalRowCount:Qe})),mt=ft.pageCache,ht=ft.addPageCache;S((function(){if(gt.current)if(vt.current)vt.current=!1;else{var e=rt.get(E)||"1",t=parseInt(e,10)-1,r=rt.get(I)||"";At({currentPage:t,searchTerm:r},!0),Dt({currentPage:t,searchTerm:r,searchActive:""!==r})}else gt.current=!0}),[rt]);var yt=function(e){var t=e.page,r=e.searchTerm,n=void 0===r?"":r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new URLSearchParams(Ye.search);a.set(E,t),n?a.set(I,n):a.delete(I),Ze("?".concat(a.toString()),{replace:o})},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rows,r=void 0===t?[]:t,n=e.totalRowCount,o=void 0===n?0:n,a=r.length>0;it(a?We:7),kt(r),lt(parseInt(o,10))},At=function(){var e=(0,o.A)(u().mark((function e(t){var r,n,o,a,i,c,s,d,v,b,f,m=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=m.length>1&&void 0!==m[1]&&m[1])||(vt.current=!0),n={page:t.currentPage+1,searchTerm:t.searchTerm},o=(0,j.h)(n),!mt[o]){e.next=8;break}return _t(mt[o]),yt(n,r),e.abrupt("return",t.currentPage);case 8:return a={action:Q,security:W,max_date:Fe,requested_page:t.currentPage+1,search_term:t.searchTerm||""},e.next=11,(0,A.A)((0,g.nv)(Le,JSON.stringify((0,O.A)(["security"],a))),"info");case 11:return e.prev=11,e.next=14,(0,p.bE)({endpoint:l(),body:a});case 14:if(d=e.sent,v=(null==d||null===(i=d.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],b=(null==d||null===(c=d.data)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.total)||"0",null==d||null===(s=d.data)||void 0===s||!s.success){e.next=23;break}return ht(o,f={rows:v,totalRowCount:b}),_t(f),yt(n,r),e.abrupt("return",t.currentPage);case 23:$e(Se,"error"),e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(11),$e(e.t0.message,"error"),e.next=31,(0,A.A)((0,g.nv)(Ee,JSON.stringify(e.t0)),"error");case 31:case"end":return e.stop()}}),e,null,[[11,26]])})));return function(t){return e.apply(this,arguments)}}(),Ot=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:(0,d.classnames)({"gravitysmtp-tools-app__debug-log":!0},R)},c),Pt=[y.hi,y.vj],jt=(0,_.A)({data:Ue,dataPerPage:We,initialState:{isLoading:!1,moduleState:{currentPage:parseInt(z,10)-1,searchTerm:M,searchActive:""!==M}},modules:Pt,useAjax:!0}),wt=jt.moduleState,Dt=jt.updateModuleState,Rt=jt.isLoading,St=jt.setIsLoading,Tt=jt.gridLocked,xt=jt.organizedData,kt=jt.setOrganizedData,Lt={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:(0,P.A)(Be),columnStyleProps:He,data:(0,P.A)(xt),dataPerPage:at,EmptyImage:f.A,gridLocked:Tt,handleGridClicks:function(e){if("view"===e.action){var t,r,n,o,a=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=xt.filter((function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===a}))[0];if(!i)return;dt({date:(null==i||null===(r=i.date)||void 0===r||null===(r=r.props)||void 0===r?void 0:r.content)||"",event:(null==i||null===(n=i.status)||void 0===n?void 0:n.props)||{},log:(null==i||null===(o=i.log)||void 0===o||null===(o=o.props)||void 0===o?void 0:o.label)||""}),pt(!0)}},i18n:{emptyMessageI18n:le,emptyTitleI18n:ue,gridHeadingI18n:oe},isLoading:Rt,maintainHeight:0===xt.length,modules:Pt,moduleAttributes:{pagination:{nextLabel:fe,nextAriaLabel:_e,onClick:At,pageCount:Math.ceil(st/at),previousLabel:he,previousAriaLabel:Oe},search:{button:{customAttributes:{"data-test-id":"debug-log-search-trigger"},id:"debug-log-search-trigger",label:pe},input:{customAttributes:{"data-test-id":"debug-log-search-input"},clearableButtonAttributes:{ariaLabel:ie,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},id:"debug-log-search-input",placeholder:ve},noResults:{Image:m.A},i18n:{noResultsTitle:je,noResultsMessage:De},onSearch:At}},moduleState:wt,setIsLoading:St,titleAttributes:{tagName:"h2"},updateModuleState:Dt,useAjax:!0};return Xe.gravitysmtp_view_debug_log&&d.React.createElement("div",(0,n.A)({},Ot,{ref:t}),d.React.createElement(b.A,{size:"display-sm",weight:"semibold",spacing:6,content:ee}),d.React.createElement(h.A,Lt))}));B.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object]),common:d.PropTypes.object,data:d.PropTypes.object,i18n:d.PropTypes.object},B.displayName="DebugLogScreen",t.default=B},52014:function(e,t,r){r.r(t);var n,o=r(40450),a=r.n(o),i=r(16675),c=(null===(n=(0,r(21713).zj)(a(),"gravitysmtp_admin_config"))||void 0===n||null===(n=n.components)||void 0===n||n.tools,(0,i.vt)({debugDetailsDialogData:{},debugDetailsDialogOpen:!1},(function(e){return{setDebugDetailsDialogData:function(t){return e((function(){return{debugDetailsDialogData:t}}))},setDebugDetailsDialogOpen:function(t){return e((function(){return{debugDetailsDialogOpen:t}}))}}})));t.default=c},83707:function(e,t,r){r.d(t,{A:function(){return g}});var n,o=r(90455),a=r(78564),i=r.n(a),c=r(27122),u=r.n(c),s=r(40450),l=r.n(s),d=r(60177),p=(null===(n=(0,r(21713).zj)(l(),"gravitysmtp_admin_config"))||void 0===n?void 0:n.common)||{};function g(){return v.apply(this,arguments)}function v(){return v=(0,o.A)(i().mark((function e(){var t,r,n,o,a,c,s,l,g,v,b=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>0&&void 0!==b[0]?b[0]:"",o=b.length>1&&void 0!==b[1]?b[1]:"debug",a=p.data,c=void 0===a?{}:a,s=p.endpoints,g=(null==(l=void 0===s?{}:s)||null===(t=l.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==l||null===(r=l.log_debug_item)||void 0===r?void 0:r.nonce)||"",null!=c&&c.debug_log_enabled&&g&&v&&n){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:u(),body:{action:g,security:v,message:n,priority:o}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},93313:function(e,t,r){var n=r(52888),o=r(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",r=function(a){return Object.entries(a).reduce((function(a,i){var c=(0,o.A)(i,2),u=c[0],s=c[1];return"object"===(0,n.A)(s)&&null!==s?a[u]=r(s):e.includes(u)?a[u]=null===s?null:t.repeat(s.length):a[u]=s,a}),Array.isArray(a)?[]:{})};return r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},63531:function(e,t,r){var n=r(88856),o=r(52888),a=r(30242),i=r(95892),c=r(5529),u=r(25980),s=r(25787),l=r(83852),d=r(27697),p=r(87029),g=r(85064),v=r(53377),b=r(66598),f=r(68347),m=r(16265),h=r(80509),y=r(43632),_=r(15635);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={Box:a.A,Button:h.A,Checkbox:i.A,Gravatar:_.A,Heading:c.A,Icon:u.A,Input:s.A,InputGroup:l.A,Label:d.A,BasicLink:p.A,Radio:g.A,Select:v.A,StatusIndicator:y.A,Text:b.A,Textarea:f.A,Toggle:m.A},j=function(e){if("object"!==(0,o.A)(e)||null===e)return e;var t=O({},e);return t.component&&"string"==typeof t.component&&(t.component=P[t.component]||t.component),t.components&&Array.isArray(t.components)&&(t.components=t.components.map(j)),t};t.A=function(e){return Array.isArray(e)&&0!==e.length?"component"in e[0]?e.map(j):e.map((function(e){var t=O({},e);return Object.keys(t).forEach((function(e){t[e]=j(t[e])})),t})):e}},79929:function(e,t,r){r.d(t,{h:function(){return s}});var n=r(88856),o=r(8140),a=r(97867);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=a.React.useState,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,r=void 0===t?1:t,n=e.searchTerm,o=void 0===n?"":n,a=e.filters,i=void 0===a?"":a,c="page-".concat(r);return o&&(c+="-".concat(o)),i&&(c+="-".concat(i)),c};t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u((function(){return e})),r=(0,o.A)(t,2),a=r[0],i=r[1];return{pageCache:a,addPageCache:function(e,t){i((function(r){return c(c({},r),{},(0,n.A)({},e,t))}))}}}}}]);