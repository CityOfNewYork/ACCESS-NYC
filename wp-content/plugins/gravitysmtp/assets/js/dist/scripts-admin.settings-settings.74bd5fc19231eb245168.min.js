"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[622,3020],{56985:function(e,t,n){n.r(t);var r=n(71860),a=n(88856),i=n(97867),o=n(24316),s=n(30242),c=n(43632),l=n(59092);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=(0,i.React.forwardRef)((function(e,t){var n=e.customAttributes,p=void 0===n?{}:n,d=e.customClasses,m=void 0===d?[]:d,g=e.common,f=void 0===g?{}:g,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,i.classnames)({"gravitysmtp-settings-app__header":!0},m)},p),_=f.i18n,b=void 0===_?{}:_,y=b.debug_log_enabled,A=void 0===y?"":y,h=b.test_mode_enabled,O=void 0===h?"":h,S=(0,l.default)((function(e){return e.debugLogEnabled})),w=(0,l.default)((function(e){return e.testModeEnabled}));return i.React.createElement("div",(0,r.A)({},v,{ref:t}),i.React.createElement("div",{className:"gravitysmtp-settings-app__header-logo"},i.React.createElement(o.GravitySMTPLogo,null)),i.React.createElement("div",{className:"gravitysmtp-settings-app__header-main"},i.React.createElement(o.GravitySMTPTextLogo,null),i.React.createElement(s.A,{customClasses:["gravitysmtp-header__status"],setDisplay:!1},S&&i.React.createElement(c.A,{status:"warning",size:"sm",spacing:[0,w?4:0,0,0],label:A,isStatic:!0}),w&&i.React.createElement(c.A,{status:"blue",size:"sm",label:O,isStatic:!0}))))}));p.propTypes={customAttributes:i.PropTypes.object,customClasses:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.array,i.PropTypes.object])},p.displayName="SettingsHeader",t.default=p},66457:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(71860),a=n(90455),i=n(8140),o=n(88856),s=n(78564),c=n.n(s),l=n(27122),u=n.n(l),p=n(97867),d=n(60177),m=n(21713),g=n(46716),f=n(30242),v=n(80509),_=n(48959),b=n(84860),y=n(55899),A=n(28099),h=n(83707),O=n(75149),S=n(93313),w=n(53015);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,i.A)(e,1)[0];return!(0,w.A)("".concat(t,"_").concat(n))})))}var P=n(55809),R=n(59092);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=p.React.forwardRef,x=p.React.useEffect,j=p.React.useState,D=p.React.useRef,I=C((function(e,t){var n,o,s,l,w,T,C,I=e.customAttributes,N=void 0===I?{}:I,L=e.customClasses,z=void 0===L?[]:L,B=e.common,M=void 0===B?{}:B,G=e.data,W=void 0===G?{}:G,H=e.i18n,V=void 0===H?{}:H,F=(null==V?void 0:V.integrations)||{},J=F.integration_settings_apply,U=F.integration_settings_cancel,q=F.integration_settings_error,K=(null==M?void 0:M.i18n)||{},Y=K.debug_messages,X=void 0===Y?{}:Y,$=X.saving_integration_settings,Q=void 0===$?"":$,Z=X.saving_integration_settings_error,ee=void 0===Z?"":Z,te=K.snackbar_api_save_success,ne=k({className:(0,p.classnames)({"gravitysmtp-integration-settings":!0},z)},N),re=(0,R.default)((function(e){return e.activeIntegrationSettings})),ae=(0,R.default)((function(e){return e.integrationSettingsFormData})),ie=(0,R.default)((function(e){return e.integrations})),oe=(0,R.default)((function(e){return e.integrationSettingsDialogOpen})),se=j(!1),ce=(0,i.A)(se,2),le=ce[0],ue=ce[1],pe=D(null),de=(0,R.default)((function(e){return e.setIntegrationSettingsDialogOpen})),me=(0,R.default)((function(e){return e.updateIntegrationStatus})),ge=(0,R.default)((function(e){return e.setIntegrationSettingsFormData})),fe=function(e,t){return ge(re,e,t)},ve=(0,m.uN)(W,"id",re),_e=(null==ve||null===(n=ve.settings)||void 0===n?void 0:n.fields)||[],be=(null==M||null===(o=M.endpoints)||void 0===o||null===(o=o.save_connector_settings)||void 0===o?void 0:o.action)||"",ye=(null==M||null===(s=M.endpoints)||void 0===s||null===(s=s.save_connector_settings)||void 0===s?void 0:s.nonce)||"",Ae=(0,b.dh)(),he=(null==ve||null===(l=ve.settings)||void 0===l?void 0:l.hide_save)||!1,Oe=(null===(w=ae[re])||void 0===w?void 0:w.from_email)||"";x((function(){Oe||fe("force_from_email",!1)}),[Oe,fe]);var Se=function(){var e=(0,a.A)(c().mark((function e(){var t,n,r,a,i,o,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=pe&&pe.current&&(t=pe.current.offsetWidth,pe.current.style.width="".concat(t,"px")),ue(!0),n={action:be,security:ye,settings:E(ae[re],re),connector_type:re},e.next=5,(0,h.A)((0,m.nv)(Q,re,JSON.stringify((0,S.A)(["api_key","server_api_token","password","security"],n))),"info");case 5:return e.prev=5,e.next=8,(0,d.bE)({endpoint:u(),body:n});case 8:null!=(a=e.sent)&&null!==(r=a.data)&&void 0!==r&&r.success?(i=k({configured:!0},""===(0,O.A)(ie)&&{is_primary:!0}),Ae(te),me(re,i),(0,g.saveActivationState)(re,be,ye,i),setTimeout((function(){de(!1)}),1e3)):(l=(0,m.Fh)(null==a||null===(o=a.error)||void 0===o||null===(o=o.detail)||void 0===o?void 0:o.data)?JSON.parse(null==a||null===(s=a.error)||void 0===s||null===(s=s.detail)||void 0===s?void 0:s.data):"",Ae((null==l?void 0:l.data)||q,"error")),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),e.next=16,(0,h.A)((0,m.nv)(ee,re,JSON.stringify(e.t0)),"error");case 16:case 17:ue(!1),null!=pe&&pe.current&&(pe.current.style.width="");case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),we={closeButtonType:"simplified",customCloseButtonLabelAttributes:{className:(0,p.classnames)({"gform-button__icon":!0,"gravitysmtp-admin-icon":!0,"gravitysmtp-admin-icon--x":!0})},customMaskClasses:["gravitysmtp-integration-settings__mask"],description:null==ve||null===(T=ve.settings)||void 0===T?void 0:T.description,isOpen:oe,maskTheme:"light",maxHeight:"90vh",mode:"modal",onClose:function(){if(new URLSearchParams(window.location.search).has("integration")){var e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("integration"),e.search=t.toString(),window.history.pushState({path:e.toString()},"",e.toString())}de(!1)},padContent:!1,position:"absolute",simplebar:!0,theme:"cosmos",title:null==ve||null===(C=ve.settings)||void 0===C?void 0:C.title,titleSize:"md",titleTagName:"h3",version:2},Ee=(0,p.classnames)({"gravitysmtp-integration-settings__save":!0,"gravitysmtp-integration-settings__save--saving":le}),Pe=(0,A.A)(_e,{activeIntegrationSettings:re,integrationSettingsFormData:ae,saveConnectorSettings:Se,savingSettings:le,Svgs:P,i18n:null==M?void 0:M.i18n,addSnackBarMessage:Ae});return p.React.createElement("div",(0,r.A)({},ne,{ref:t}),p.React.createElement(_.A,we,p.React.createElement("form",{id:re},p.React.createElement(y.A,{id:re,fields:Pe,setFieldData:fe})),p.React.createElement(f.A,{customClasses:["gravitysmtp-integration-settings__actions"],display:"flex",spacing:[8,0,0,0]},p.React.createElement(v.A,{label:U,onClick:function(){return de(!1)},size:"size-height-m",type:"white"}),!he&&p.React.createElement(v.A,{active:le,activeType:"loader",customClasses:Ee,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:J,onClick:Se,ref:pe,spacing:[0,0,0,3],size:"size-height-m"}))))}));I.propTypes={customAttributes:p.PropTypes.object,customClasses:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.array,p.PropTypes.object]),common:p.PropTypes.object,data:p.PropTypes.object,i18n:p.PropTypes.object},I.displayName="IntegrationSettings";var N=I},52166:function(e,t,n){n.r(t);var r=n(71860),a=n(88856),i=n(90455),o=n(78564),s=n.n(o),c=n(97867),l=n(8412),u=n(59092);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=c.React.forwardRef,g=c.React.useEffect,f=c.ReactRouter.useLocation,v=c.ReactRouter.useNavigate,_=m((function(e,t){var n=e.customAttributes,a=void 0===n?{}:n,o=e.customClasses,p=void 0===o?[]:o,m=e.data,_=void 0===m?{}:m,b=e.disabledNavItems,y=void 0===b?[]:b,A=e.i18n,h=void 0===A?{}:A,O=_.nav_items,S=void 0===O?[]:O,w=f(),E=v(),P=(0,u.default)((function(e){return e.settingsNavBlocked})),R=(0,u.default)((function(e){return e.setSettingsNavBlocked})),T=(0,u.default)((function(e){return e.setConfirmDialogSettings})),k=(0,u.default)((function(e){return e.setConfirmDialogOpen})),C=h||{},x=C.unsaved_changes_title,j=void 0===x?"":x,D=C.unsaved_changes_message,I=void 0===D?"":D;g((function(){var e=function(e){P&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[P]);var N=S.filter((function(e){return!y.includes(e.param)})).map((function(e,t){var n=e.param,r=e.label,a=e.icon,i={item:{customClasses:["gravitysmtp-settings-app__nav-bar-item","gravitysmtp-settings-app__nav-bar-item--".concat(n)],key:"".concat(n,"-").concat(t)},icon:{customClasses:["gravitysmtp-settings-app__nav-bar-item-icon"],icon:a,iconPrefix:"gravitysmtp-admin-icon"},text:{content:r,customClasses:["gravitysmtp-settings-app__nav-bar-item-text"]}};if(y.includes(n))return d(d({},i),{},{item:d(d({},i.item),{},{active:!1,disabled:!0}),button:{customClasses:["gravitysmtp-settings-app__nav-bar-item-button","gravitysmtp-settings-app__nav-bar-item-button--".concat(n)],size:"size-height-m",type:"icon-white",disabled:!0}});var o=new URLSearchParams(w.search),s=_.nav_item_param_key||"tab",c=o.get(s);o.set(s,n);var l=d(d({},w),{},{search:"?".concat(o.toString())});return d(d({},i),{},{item:d(d({},i.item),{},{active:c===n}),link:{customClasses:["gravitysmtp-settings-app__nav-bar-item-link","gravitysmtp-settings-app__nav-bar-item-link--".concat(n)],to:l}})})),L=d({customClasses:(0,c.classnames)(["gravitysmtp-settings-app__nav-bar"],p),handleNavigationBlocked:function(e){var t;T({confirmDialogI18n:{confirm_change_content:I,confirm_change_heading:j},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return k(!1)},confirmDialogOnClose:function(){return k(!1)},confirmDialogOnConfirm:(t=(0,i.A)(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R(!1),k(!1),n=new URL(e),r=n.pathname+n.search,E(r);case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})},items:N,type:"icon-button",navigationBlocked:P},a);return c.React.createElement(l.A,(0,r.A)({},L,{ref:t}))}));_.propTypes={children:c.PropTypes.oneOfType([c.PropTypes.arrayOf(c.PropTypes.node),c.PropTypes.node]),customAttributes:c.PropTypes.object,customClasses:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.array,c.PropTypes.object])},_.displayName="NavBar",t.default=_},12040:function(e,t,n){n.r(t);var r=n(71860),a=n(90455),i=n(8140),o=n(88856),s=n(78564),c=n.n(s),l=n(27122),u=n.n(l),p=n(97867),d=n(60177),m=n(21713),g=n(30242),f=n(80509),v=n(5529),_=n(25787),b=n(66598),y=n(16265),A=n(13379),h=n(61955),O=n(60325),S=n(84860),w=n(33695),E=n(49572),P=n(93313),R=n(83707),T=n(27764),k=n(59092);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=p.React.forwardRef,D=p.React.useRef,I=p.React.useState,N=p.React.useEffect,L=j((function(e,t){var n=e.customAttributes,s=void 0===n?{}:n,l=e.customClasses,C=void 0===l?[]:l,j=e.common,L=void 0===j?{}:j,z=e.data,B=void 0===z?{}:z,M=e.i18n,G=void 0===M?{}:M,W=x({className:(0,p.classnames)({"gravitysmtp-settings-app__alerts":!0,"gravitysmtp-alerts-settings":!0},C)},s),H=(null==G?void 0:G.alerts)||{},V=H.alerts_box_heading,F=H.alert_threshold_count_label,J=H.alert_threshold_count_help_text,U=H.alert_threshold_interval_label,q=H.alert_threshold_interval_help_text,K=H.begin_drag_notice,Y=H.drag_button_label,X=H.email_request_fails_help_text,$=H.email_request_fails_label,Q=H.end_drag_notice,Z=H.end_drop_notice,ee=H.move_item_notice,te=H.notify_heading,ne=H.save_settings_button_label,re=H.slack_alerts_help_text,ae=H.slack_alerts_label,ie=H.slack_heading,oe=H.slack_webhook_add_button_label,se=H.slack_webhook_delete_button_label,ce=H.snackbar_test_alert_success,le=H.snackbar_test_alert_error,ue=H.start_sending_test_alert,pe=H.top_content,de=H.top_heading,me=H.twilio_account_add_button_label,ge=H.twilio_alerts_block_heading,fe=H.twilio_alerts_help_text,ve=H.twilio_alerts_label,_e=H.twilio_heading,be=(null==B?void 0:B.alerts_settings)||{},ye=be.alert_threshold_count,Ae=be.alert_threshold_interval,he=be.notify_when_email_sending_fails_enabled,Oe=be.slack_alerts_enabled,Se=be.twilio_alerts_enabled,we=be.slack_alerts,Ee=void 0===we?{}:we,Pe=Ee.fields,Re=void 0===Pe?[]:Pe,Te=Ee.items,ke=void 0===Te?[]:Te,Ce=Ee.path,xe=void 0===Ce?"":Ce,je=be.twilio_alerts,De=void 0===je?{}:je,Ie=De.fields,Ne=void 0===Ie?[]:Ie,Le=De.items,ze=void 0===Le?[]:Le,Be=De.path,Me=void 0===Be?"":Be,Ge=(null==L?void 0:L.i18n)||{},We=Ge.debug_messages,He=void 0===We?{}:We,Ve=He.saving_plugin_settings,Fe=void 0===Ve?"":Ve,Je=He.saving_plugin_settings_error,Ue=void 0===Je?"":Je,qe=Ge.snackbar_generic_update_error,Ke=void 0===qe?"":qe,Ye=Ge.snackbar_generic_update_success,Xe=void 0===Ye?"":Ye,$e=(null==L?void 0:L.endpoints)||{},Qe=$e.save_alerts_settings,Ze=void 0===Qe?{}:Qe,et=Ze.action,tt=void 0===et?"":et,nt=Ze.nonce,rt=void 0===nt?"":nt,at=$e.send_test_alert,it=void 0===at?{}:at,ot=it.action,st=void 0===ot?"":ot,ct=it.nonce,lt=void 0===ct?"":ct,ut=I(he),pt=(0,i.A)(ut,2),dt=pt[0],mt=pt[1],gt=I(Oe),ft=(0,i.A)(gt,2),vt=ft[0],_t=ft[1],bt=I(Se),yt=(0,i.A)(bt,2),At=yt[0],ht=yt[1],Ot=I(ye),St=(0,i.A)(Ot,2),wt=St[0],Et=St[1],Pt=I(Ae),Rt=(0,i.A)(Pt,2),Tt=Rt[0],kt=Rt[1],Ct=I(""),xt=(0,i.A)(Ct,2),jt=xt[0],Dt=xt[1],It=I(!1),Nt=(0,i.A)(It,2),Lt=Nt[0],zt=Nt[1],Bt=(0,k.default)((function(e){return e.setSettingsNavBlocked})),Mt=(0,O.A)(xe,!0),Gt=Mt.items,Wt=Mt.handleChange,Ht=Mt.onChange,Vt=(0,O.A)(Me,!0,"twilio_account_name","block",ge),Ft=Vt.items,Jt=Vt.handleChange,Ut=Vt.onChange,qt={deleteLabel:se,dragLabel:Y,beginDrag:K,endDrag:Q,endDrop:Z,moveItem:ee},Kt=D(null),Yt=D(JSON.stringify(B.alerts_settings)),Xt=(0,S.dh)();N((function(){JSON.stringify(B.alerts_settings)!==Yt.current?Bt(!0):Bt(!1)}));var $t=function(e,t){B&&B.alerts_settings&&(B.alerts_settings[e]=t)},Qt=function(){var e=(0,a.A)(c().mark((function e(t,n){var r,a,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={slack:Gt[n],twilio:Ft[n]},a={action:st,security:lt,data:{type:t,settings:r[t]||{}}},e.next=5,(0,R.A)((0,m.nv)(ue,JSON.stringify((0,P.A)(["security"],a))),"info");case 5:return e.prev=5,e.next=8,(0,d.bE)({endpoint:u(),body:a});case 8:null!=(o=e.sent)&&null!==(i=o.data)&&void 0!==i&&i.success?Xt(ce):Xt(le,"error"),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(5),e.next=17,(0,R.A)((0,m.nv)(le,JSON.stringify(e.t0)),"error");case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Zt=function(e,t,n,a,i,o){return function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(n){return"Button"===n.component?x(x({},n),{},{props:x(x({},n.props),{},{onClick:function(){return Qt(o,t)}})}):x(x({},n),{},{props:x(x({},n.props),{},{id:e[t].repeater_item_id,onChange:i(n.props.name,t),value:e[t][n.props.name]})})}))}(n,a).map((function(e,t){return"Button"===e.component?p.React.createElement(f.A,(0,r.A)({key:"".concat(o,"-repeater-input-test-").concat(t)},e.props)):p.React.createElement(_.A,(0,r.A)({key:"".concat(o,"-repeater-input-").concat(e.props.id,"-").concat(e.props.name),disabled:!(0,E.A)("CAPS_EDIT_ALERTS")},e.props))}))},en=(0,E.A)("CAPS_EDIT_ALERTS")?{}:{disabled:!0},tn=function(){var e=(0,a.A)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Kt.current.offsetWidth,Dt(t),zt(!0),n={action:tt,security:rt,alerts_settings:(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},(0,w.A)("alert_threshold_count"),wt),(0,w.A)("alert_threshold_interval"),Tt),(0,w.A)("notify_when_email_sending_fails_enabled"),dt),(0,w.A)("slack_alerts_enabled"),vt),(0,w.A)("twilio_alerts_enabled"),At),(0,w.A)("slack_alerts"),Gt),(0,w.A)("twilio_alerts"),Ft)},e.next=6,(0,R.A)((0,m.nv)(Fe,JSON.stringify((0,P.A)(["security"],n))),"info");case 6:return e.prev=6,e.next=9,(0,d.bE)({endpoint:u(),body:n});case 9:a=e.sent,zt(!1),Dt(""),null!=a&&null!==(r=a.data)&&void 0!==r&&r.success?(Xt(Xe),Bt(!1),Yt.current=JSON.stringify(B.alerts_settings)):Xt(Ke,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(6),e.next=20,(0,R.A)((0,m.nv)(Ue,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(){return e.apply(this,arguments)}}(),nn=function(e,t){t.target.name===(0,w.A)("alert_threshold_count")?(Et(e),$t((0,w.A)("alert_threshold_count"),e)):(kt(e),$t((0,w.A)("alert_threshold_interval"),e))},rn={controlled:!0,customAttributes:{min:1,"data-test-id":"alerts-settings-count"},customClasses:["gravitysmtp-alerts-settings__count"],disabled:!(0,E.A)("CAPS_EDIT_ALERTS"),helpTextAttributes:{content:J,size:"text-xs",weight:"regular"},labelAttributes:x({label:F},(0,T.A)((0,w.A)("alert_threshold_count"))),name:(0,w.A)("alert_threshold_count"),onChange:nn,spacing:4,type:"number",value:String(wt)},an={controlled:!0,customAttributes:{min:1,"data-test-id":"alerts-settings-interval"},customClasses:["gravitysmtp-alerts-settings__interval"],disabled:!(0,E.A)("CAPS_EDIT_ALERTS"),helpTextAttributes:{content:q,size:"text-xs",weight:"regular"},labelAttributes:x({label:U},(0,T.A)((0,w.A)("alert_threshold_interval"))),name:(0,w.A)("alert_threshold_interval"),onChange:nn,spacing:4,type:"number",value:String(Tt)};return p.React.createElement("div",(0,r.A)({},W,{ref:t}),p.React.createElement(v.A,{size:"display-sm",weight:"semibold",spacing:1,content:de}),p.React.createElement(g.A,{x:1100},p.React.createElement(b.A,{size:"text-sm",spacing:6,color:"comet",content:pe})),p.React.createElement(A.A,{HeaderContent:function(e){return p.React.createElement(g.A,{x:630},p.React.createElement(v.A,(0,r.A)({content:V,tagName:"h2",size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){var t={"data-test-id":"alerts-settings-save"};jt&&(t.style={width:"".concat(jt,"px")});var n=(0,p.classnames)({"gravitysmtp-alerts-settings__save-settings":!0,"gravitysmtp-alerts-settings__save-settings--saving":Lt});return p.React.createElement(f.A,(0,r.A)({active:Lt,activeType:"loader",customAttributes:t,customClasses:n,disabled:!(0,E.A)("CAPS_EDIT_ALERTS")||Lt,icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ne,onClick:tn,size:"size-height-m",ref:Kt},e))}},p.React.createElement(g.A,{customClasses:["gravitysmtp-alerts-settings__box-container"],x:630},p.React.createElement(v.A,{size:"text-sm",weight:"medium",type:"boxed",spacing:4,content:te}),p.React.createElement(y.A,{customAttributes:{"data-test-id":"settings-alerts-email-request-fails"},helpTextAttributes:{content:X,size:"text-sm"},initialChecked:dt,labelAttributes:{label:$},onChange:function(e){mt(e),$t((0,w.A)("notify_when_email_sending_fails_enabled"),e)},labelPosition:"left",name:(0,w.A)("notify_when_email_sending_fails_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,E.A)("CAPS_EDIT_ALERTS")}),dt&&((0,E.A)("CAPS_VIEW_ALERTS_SLACK_SETTINGS")||(0,E.A)("CAPS_VIEW_ALERTS_TWILIO_SETTINGS"))&&p.React.createElement(p.React.Fragment,null,p.React.createElement(_.A,rn),p.React.createElement(_.A,an),p.React.createElement(v.A,{size:"text-sm",weight:"medium",type:"boxed",spacing:4,content:ie}),p.React.createElement(y.A,{customAttributes:{"data-test-id":"settings-alerts-slack-alerts"},helpTextAttributes:{content:re,size:"text-sm"},initialChecked:vt,labelAttributes:{label:ae},onChange:function(e){_t(e),$t((0,w.A)("slack_alerts_enabled"),e)},labelPosition:"left",name:(0,w.A)("slack_alerts_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,E.A)("CAPS_EDIT_ALERTS")}),vt&&(0,E.A)("CAPS_VIEW_ALERTS_SLACK_SETTINGS")&&p.React.createElement(h.A,{addButtonAttributes:x({label:oe},en),collapsibleButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),customClasses:["gravitysmtp-alerts-settings__slack-webhooks"],dragHandleAttributes:{iconPrefix:"gravitysmtp-admin-icon"},deleteButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),downButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),fillContent:!0,id:"repeater-slack-alerts",i18n:qt,isDraggable:!0,isSortable:!0,items:Gt,minItems:1,newItemState:{slack_webhook_url:""},onChange:Wt,renderItem:function(e,t){return Zt(0,t,Re,ke,Ht,"slack")},showArrows:!1,showDelete:!0,showDragHandle:!0,spacing:6,upButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en)}),p.React.createElement(v.A,{size:"text-sm",weight:"medium",type:"boxed",spacing:4,content:_e}),p.React.createElement(y.A,{customAttributes:{"data-test-id":"settings-alerts-slack-alerts"},helpTextAttributes:{content:fe,size:"text-sm"},initialChecked:At,labelAttributes:{label:ve},onChange:function(e){ht(e),$t((0,w.A)("twilio_alerts_enabled"),e)},labelPosition:"left",name:(0,w.A)("twilio_alerts_enabled"),spacing:At?6:0,size:"size-m",width:"full",disabled:!(0,E.A)("CAPS_EDIT_ALERTS")}),At&&(0,E.A)("CAPS_VIEW_ALERTS_TWILIO_SETTINGS")&&p.React.createElement(h.A,{addButtonAttributes:x({label:me},en),collapsible:!0,collapsibleButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),customClasses:["gravitysmtp-alerts-settings__twilio-accounts"],dragHandleAttributes:{iconPrefix:"gravitysmtp-admin-icon"},deleteButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),downButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en),id:"twilio-alerts",i18n:qt,items:Ft,isDraggable:!0,isSortable:!0,minItems:1,newItemState:{twilio_account_name:"",twilio_account_id:"",twilio_auth_token:"",twilio_from_phone_number:"",twilio_to_phone_number:"",repeater_item_block_content_title:ge.replace("%s",""),repeater_item_collapsed:!1},onChange:Jt,renderItem:function(e,t){return Zt(0,t,Ne,ze,Ut,"twilio")},showArrows:!0,showDelete:!0,showDragHandle:!0,type:"block",upButtonAttributes:x({iconPrefix:"gravitysmtp-admin-icon"},en)})))))}));L.propTypes={customAttributes:p.PropTypes.object,customClasses:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.array,p.PropTypes.object])},L.displayName="AlertsScreen",t.default=L},12526:function(e,t,n){n.r(t);var r=n(71860),a=n(88856),i=n(97867),o=n(21713),s=n(30242),c=n(5529),l=n(66598),u=n(16265),p=n(13379),d=n(84860),m=n(49572),g=n(27764),f=n(68381);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=(0,i.React.forwardRef)((function(e,t){var n=e.customAttributes,a=void 0===n?{}:n,_=e.customClasses,b=void 0===_?[]:_,A=e.data,h=void 0===A?{}:A,O=e.i18n,S=void 0===O?{}:O,w=y({className:(0,i.classnames)({"gravitysmtp-settings-app__emails":!0},b)},a),E=h.managed_email_types,P=void 0===E?[]:E,R=(null==S?void 0:S.emails)||{},T=R.top_heading,k=R.top_content,C=R.email_notifications_box_heading,x=(0,d.dh)();return i.React.createElement("div",(0,r.A)({},w,{ref:t}),i.React.createElement(c.A,{size:"display-sm",weight:"semibold",spacing:1,content:T}),i.React.createElement(l.A,{size:"text-sm",spacing:6,color:"comet",content:k}),i.React.createElement(p.A,{HeaderContent:function(e){return i.React.createElement(c.A,(0,r.A)({content:C,size:"text-lg",weight:"medium"},e))}},P.map((function(e,t){return i.React.createElement(s.A,{key:"".concat((0,o.Yv)(e.category),"-").concat(t),x:630},i.React.createElement(c.A,{size:"text-sm",weight:"medium",type:"boxed",spacing:4,content:e.category}),e.items.map((function(n,r){var a=4;return r===e.items.length-1&&(a=t===P.length-1?1:6),i.React.createElement(u.A,{key:"".concat(n.key,"-").concat(r),id:"toggle-".concat(n.key),customAttributes:{"data-test-id":n.key},disabled:!(0,m.A)("CAPS_EDIT_EMAIL_MANAGEMENT_SETTINGS"),initialChecked:n.value,labelAttributes:y({label:n.label},(0,g.A)(n.key)),helpTextAttributes:{content:n.description,spacing:[3,0,0,0]},helpTextWidth:"full",labelPosition:"left",name:n.key,onChange:function(e){(0,f.A)({addSnackbarMessage:x,key:n.key,successCallback:function(){!function(e,t,n){var r,a=v(n);try{for(a.s();!(r=a.n()).done;){var i,o=v(r.value.items);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.key===e)return s.value=t,n}}catch(e){o.e(e)}finally{o.f()}}}catch(e){a.e(e)}finally{a.f()}}(n.key,e,P)},value:e})},spacing:a,size:"size-m",width:"full"})})))}))))}));A.propTypes={customAttributes:i.PropTypes.object,customClasses:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.array,i.PropTypes.object]),data:i.PropTypes.object,i18n:i.PropTypes.object},A.displayName="EmailsScreen",t.default=A},5152:function(e,t,n){n.r(t);var r=n(88856),a=n(8140),i=n(97867),o=n(62825),s=n(84860),c=n(56985),l=n(52166),u=n(12040),p=n(12526),d=n(69586),m=n(46716),g=n(65862),f=n(66457),v=n(3258),_=n(19535),b=n(90266),y=n(36770),A=n(59092);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=i.React.useEffect,w=i.ReactRouter.BrowserRouter,E=i.ReactRouter.Routes,P=i.ReactRouter.Route,R=i.ReactRouter.useSearchParams,T=i.ReactDNDMultiBackend.DndProvider,k=i.ReactDNDHtml5ToTouch.HTML5toTouch,C=["routing"],x={alerts:[(0,b.A)("CAPS_VIEW_ALERTS")],settings:[(0,b.A)("CAPS_VIEW_LICENSE_KEY"),(0,b.A)("CAPS_VIEW_TEST_MODE"),(0,b.A)("CAPS_VIEW_USAGE_ANALYTICS")],integrations:[(0,b.A)("CAPS_VIEW_INTEGRATIONS")],logging:[(0,b.A)("CAPS_VIEW_EMAIL_LOG_SETTINGS")],emails:[(0,b.A)("CAPS_VIEW_EMAIL_MANAGEMENT_SETTINGS")]},j=function(e){return i.React.createElement(c.default,e)},D=function(e){return i.React.createElement(l.default,e)},I=function(e){var t=R(),n=(0,a.A)(t,2),r=n[0],o=(n[1],e.data.nav_items),s=(void 0===o?[]:o).filter((function(e){return!C.includes(e.param)}))[0]||"",c=r.get(e.data.nav_item_param_key||"tab")||s.param,l=r.get("integration"),f=(0,A.default)((function(e){return e.setActiveIntegrationSettings})),v=(0,A.default)((function(e){return e.setIntegrationSettingsDialogOpen}));switch("integrations"===c&&l&&(f(l),v(!0)),c){case"settings":return i.React.createElement(d.default,e);case"integrations":return i.React.createElement(m.default,e);case"alerts":return i.React.createElement(u.default,e);case"emails":return i.React.createElement(p.default,e);case"logging":return i.React.createElement(g.default,e);default:return null}};t.default=function(e){var t=e.data,n=e.i18n,r=e.common,c=t.route_path.replace(window.location.origin,""),l=(null==t?void 0:t.caps)||{},u=(0,A.default)((function(e){return e.experimentalFeatures}));Object.entries(x).forEach((function(e){var t=(0,a.A)(e,2),n=t[0];t[1].some((function(e){return l[e]}))||C.push(n)})),(0,y.A)("wp_email_management")||C.includes("emails")||C.push("emails"),u.alerts_management||C.includes("alerts")?C=C.filter((function(e){return"alerts"!==e})):C.push("alerts");var p=(0,A.default)((function(e){return e.pageLoaderActive})),d=(0,A.default)((function(e){return e.setPageLoaderActive})),m={confirmButtonType:(0,A.default)((function(e){return e.confirmDialogConfirmButtonType})),customAttributes:(0,A.default)((function(e){return e.confirmDialogCustomAttributes})),i18n:O(O({},(null==r?void 0:r.i18n)||{}),(0,A.default)((function(e){return e.confirmDialogI18n}))),isOpen:(0,A.default)((function(e){return e.confirmDialogOpen})),onCancel:(0,A.default)((function(e){return e.confirmDialogOnCancel})),onClose:(0,A.default)((function(e){return e.confirmDialogOnClose})),onConfirm:(0,A.default)((function(e){return e.confirmDialogOnConfirm}))},g=function(e){d(e.detail)};return S((function(){return document.addEventListener("gravitysmtp/page_loader/active",g),function(){return document.removeEventListener("gravitysmtp/page_loader/active",g)}}),[]),i.React.createElement(w,null,i.React.createElement(s.n,{defaultSettings:{errorIconAttributes:{icon:"exclamation-simple",iconPrefix:"gravitysmtp-admin-icon"},successIconAttributes:{icon:"correct",iconPrefix:"gravitysmtp-admin-icon"}}},i.React.createElement(T,{options:k},i.React.createElement("div",{className:"gravitysmtp-app__wrapper"},i.React.createElement(o.A,{customClasses:["gravitysmtp-settings-app"],Header:j,PrimarySideBarChildren:D,common:r,data:t,i18n:n,disabledNavItems:C},i.React.createElement("div",{className:"gravitysmtp-settings-app__content"},i.React.createElement(E,null,i.React.createElement(P,{path:c,element:i.React.createElement(I,{common:r,data:t,i18n:n,disabledNavItems:C})})))),i.React.createElement(f.default,{data:t,common:r,i18n:n}),i.React.createElement(v.A,m),i.React.createElement(_.A,{loading:p})))))}},24316:function(e,t,n){n.r(t),n.d(t,{GravitySMTPLogo:function(){return r.A},GravitySMTPTextLogo:function(){return a.A}});var r=n(52320),a=n(70531)},28099:function(e,t,n){var r=n(90455),a=n(88856),i=n(78564),o=n.n(i),s=n(97867),c=n(63662),l=n(12094),u=n(87029),p=n(25787),d=n(66598),m=n(21713),g=n(16675),f=n(27764);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e,t){return e.map((function(e){var n,r;if(null==e||null===(n=e.props)||void 0===n||!n.name)return e;var a="".concat(t,"_").concat(e.props.name),i=(null==e||null===(r=e.props)||void 0===r?void 0:r.labelAttributes)||{};return _(_({},e),{},{props:_(_({},e.props),{},{labelAttributes:_(_({},i),(0,f.A)(a))})})}))},y=function(e,t){var n=t.integrationSettingsFormData[t.activeIntegrationSettings],r=null==n?void 0:n.from_email;return e.map((function(e){var t;if("force_from_email"!==(null==e||null===(t=e.props)||void 0===t?void 0:t.name))return e;var a=_(_({},e),{},{props:_(_({},e.props),{},{externalControl:!0,externalChecked:null==n?void 0:n.force_from_email})});return r&&/\S+@\S+\.\S+/.test(r)||(a.props.disabled=!0),a}))},A=function(e,t){return e.map((function(e,n){var r;if(0!==n||"Alert"!==(null==e?void 0:e.component)||"google-alias-notice"!==(null==e||null===(r=e.props)||void 0===r?void 0:r.id))return e;var a=h((null==e?void 0:e.fields)||[],t);return _(_({},e),{},{fields:a})}))},h=function(e,t){var n=t.integrationSettingsFormData[t.activeIntegrationSettings],a=e.map((function(e){if(!["BrandedButton","BrandedLink","CopyInput","LinkedHelpTextInput","LinkedText"].includes(e.component)||!e.external)return e;var a,i=t.i18n.snackbar_url_copied,f=void 0===i?"":i,v=t.Svgs[e.props.Svg],b=null,y={};switch(e.component){case"BrandedButton":b=c.A,y=_(_({},e.props),{},{disabled:!(null!=n&&n.client_id&&null!=n&&n.client_secret)||t.savingSettings,onClick:(a=(0,r.A)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t.saveConnectorSettings();case 3:window.location.href="".concat(n.oauth_url,"?client_id=").concat(n.client_id).concat(n.oauth_params);case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),Svg:s.React.createElement(v,null)});break;case"BrandedLink":b=l.A,y=_(_({},e.props),{},{href:"wizard"===t.context?e.wizardHref:e.props.href,Svg:s.React.createElement(v,null)});break;case"CopyInput":b=p.A,y=_(_({},e.props),{},{actionButtonAttributes:_(_({},e.props.actionButtonAttributes),{},{onClick:function(e,n){t.addSnackBarMessage(f),(0,m.Ns)(n)}})});break;case"LinkedHelpTextInput":b=p.A,y=_(_({},e.props),{},{helpTextAttributes:_(_({},e.props.helpTextAttributes),{},{content:s.React.createElement(g.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:e.props.helpTextAttributes.content,tokens:e.links.map((function(e){return{component:u.A,key:e.key,props:e.props}}))})})});break;case"LinkedText":b=d.A,y=_(_({},e.props),{},{content:s.React.createElement(g.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:e.props.content,tokens:e.links.map((function(e){return{component:u.A,key:e.key,props:e.props}}))})})}return _(_({},e),{},{component:b,props:y})}));return a},O=function(e,t){var n=t.integrationSettingsFormData[t.activeIntegrationSettings];return e.map((function(e){var t;if("Input"!==e.component||!["username","password"].includes(null==e||null===(t=e.props)||void 0===t?void 0:t.name))return e;var r=_(_({},e.props),{},{disabled:!n.auth});return _(_({},e),{},{props:r})}))},S=function(e){return e.map((function(e){var t,n=((null==e||null===(t=e.props)||void 0===t||null===(t=t.labelAttributes)||void 0===t?void 0:t.label)||"").toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),r=_(_({},e.props),{},{customAttributes:_(_({},e.props.customAttributes),{},{"data-test-id":"form-field-".concat(n)})});return _(_({},e),{},{props:r})}))};t.A=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e),n=S(t),r=b(n,e.activeIntegrationSettings);if(!["microsoft","google","generic","amazon","zoho"].includes(e.activeIntegrationSettings))return r;var a=r;return"google"===e.activeIntegrationSettings&&(a=A(a,e)),["microsoft","google","amazon","zoho"].includes(e.activeIntegrationSettings)?a=h(a,e):"generic"===e.activeIntegrationSettings&&(a=O(a,e)),a}}}]);