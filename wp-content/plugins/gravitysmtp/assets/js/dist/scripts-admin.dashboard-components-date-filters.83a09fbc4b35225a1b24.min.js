"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2801,4993],{5654:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var a,r=n(71860),o=n(90455),i=n(88856),c=n(8140),s=n(78564),l=n.n(s),u=n(97867),d=n(30242),v=n(37657),p=n(99270),f=n(27122),m=n.n(f),g=n(40450),b=n.n(g),y=n(60177),O=(null===(a=(0,n(21713).zj)(b(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},h=function(){},D=function(t){t.error},w=function(){var t=(0,o.A)(l().mark((function t(e){var n,a,r,o,i,c,s,u,d,v,p,f,g,b,w,P,j,_,A;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dateRange,a=void 0===n?0:n,r=e.endDate,o=void 0===r?"":r,i=e.errorCallback,c=void 0===i?null:i,s=e.startDate,u=void 0===s?"":s,d=e.successCallback,v=void 0===d?null:d,p=O.endpoints,f=(void 0===p?{}:p).get_dashboard_data,b=(g=void 0===f?{}:f).action,w=void 0===b?"":b,P=g.nonce,j={action:w,security:void 0===P?"":P},a?j.date_range=a:(j.start_date=u,j.end_date=o),t.prev=4,t.next=7,(0,y.bE)({endpoint:m(),body:j});case 7:null!=(A=t.sent)&&null!==(_=A.data)&&void 0!==_&&_.success?(v||h)({data:null==A?void 0:A.data}):(c||D)({error:null==A?void 0:A.error}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),P=w,j=n(84437);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var A=u.React.forwardRef,k=u.React.useState,S=function(t){var e=new Date,n=new Date;return t>1&&n.setDate(e.getDate()-t+1),1===t?[e,e]:[n,e]},E=function(t,e){var n,a,r,o;return n=e,a={year:"numeric",month:"short",day:"numeric"},r=t.toLocaleDateString(void 0,a),o=n.toLocaleDateString(void 0,a),r===o?r:"".concat(r," - ").concat(o)},x=A((function(t,e){var n,a=t.customAttributes,s=void 0===a?{}:a,f=t.customClasses,m=void 0===f?[]:f,g=t.data,b=void 0===g?{}:g,y=t.i18n,O=void 0===y?{}:y,h=b.date_ranges,D=void 0===h?{}:h,w=D.initial_value,A=void 0===w?0:w,x=D.max_end,C=void 0===x?"":x,R=D.min_start,F=void 0===R?"":R,T=D.options,z=void 0===T?[]:T,L=C?new Date(C):null,N=F?new Date(F):null,V=O.stats,I=(void 0===V?{}:V).date_range_label,M=void 0===I?"":I,Y=(null===(n=z.find((function(t){return t.value===A})))||void 0===n?void 0:n.label)||"",q=S(A),B=E(q[0],q[1]),G=(0,j.default)((function(t){return t.setLoadingData})),H=(0,j.default)((function(t){return t.setStateValues})),J=k(Y),K=(0,c.A)(J,2),Q=K[0],U=K[1],W=k(A),X=(0,c.A)(W,2),Z=X[0],$=X[1],tt=k(B),et=(0,c.A)(tt,2),nt=et[0],at=et[1],rt=k(q),ot=(0,c.A)(rt,2),it=ot[0],ct=ot[1],st=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){(0,i.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({className:(0,u.classnames)({"gravitysmtp-dashboard-app__date-filters":!0},m)},s),lt=function(t){var e=t.data,n=(void 0===e?{}:e).data,a=void 0===n?{}:n,r=a.chart,o=(void 0===r?{}:r).values,i=void 0===o?[]:o,c=a.rankings,s=void 0===c?{}:c,l=s.recipients,u=void 0===l?[]:l,d=s.sources,v=void 0===d?[]:d,p=a.totals,f=void 0===p?{}:p,m=f.emails,g=void 0===m?0:m,b=f.failed,y=void 0===b?0:b,O=f.percentOpen,h=void 0===O?0:O,D=f.sent;H({chartData:i,recipients:u,sources:v,totalEmails:g,totalFailed:y,totalPercentOpen:h,totalSent:void 0===D?0:D})},ut=function(){var t=(0,o.A)(l().mark((function t(e,n,a){var r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=S(a),o=E(r[0],r[1]),G(!0),U(n),$(a),ct(r),at(o),t.next=9,P({dateRange:a,successCallback:function(t){lt(t)}});case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),dt=function(){var t=(0,o.A)(l().mark((function t(e){var n,a,r,o,i,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G(!0),ct(e),U(M),$(0),Array.isArray(e)?(r=(0,c.A)(e,2),n=r[0],a=r[1]):n=a=e,o=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r," ").concat(e?"00:00:00":"23:59:59")},i=o(n),s=o(a,!1),u=E(n,a),at(u),t.next=12,P({startDate:i,endDate:s,successCallback:function(t){lt(t)}});case 12:ct(e),G(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),vt={calendarAttributes:{maxDate:L,minDate:N,onChange:dt,selectRange:!0,value:it},triggerAttributes:{customClasses:["gravitysmtp-dashboard-app__date-filters__datepicker"],label:nt,icon:"calendar",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading"},withTrigger:!0},pt=z.map((function(t){return{key:"list-item-".concat(t.value),props:{id:"list-item-".concat(t.value),label:t.label,customAttributes:{disabled:Z===t.value,id:"list-item-".concat(t.value),onClick:(e=(0,o.A)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(n,t.label,t.value);case 2:G(!1);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}}};var e})),ft={closeOnClick:!0,customClasses:["gravitysmtp-dashboard-app__date-filters__date-filter"],listItems:pt,triggerAttributes:{iconPrefix:"gravitysmtp-admin-icon",icon:"accordion-arrow",iconPosition:"trailing",label:Q,size:"size-height-m",type:"white"},width:192};return u.React.createElement("div",(0,r.A)({},st,{ref:e}),u.React.createElement(d.A,{display:"flex",spacing:6},u.React.createElement(p.Ay,ft),u.React.createElement(v.A,vt)))}));x.propTypes={customAttributes:u.PropTypes.object,customClasses:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.array,u.PropTypes.object])},x.displayName="DateFilters";var C=x},84437:function(t,e,n){n.r(e);var a,r,o,i,c,s,l,u,d=n(88856),v=n(40450),p=n.n(v),f=n(16675);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,d.A)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=(null===(a=(0,n(21713).zj)(p(),"gravitysmtp_admin_config"))||void 0===a||null===(a=a.components)||void 0===a?void 0:a.dashboard)||{},y=(null==b?void 0:b.data)||{},O={chartData:(null==y||null===(r=y.chart)||void 0===r?void 0:r.values)||[],loadingData:!1,recipients:(null==y||null===(o=y.rankings)||void 0===o?void 0:o.recipients)||[],sources:(null==y||null===(i=y.rankings)||void 0===i?void 0:i.sources)||[],totalEmails:(null==y||null===(c=y.totals)||void 0===c?void 0:c.emails)||0,totalFailed:(null==y||null===(s=y.totals)||void 0===s?void 0:s.failed)||0,totalPercentOpen:(null==y||null===(l=y.totals)||void 0===l?void 0:l.percentOpen)||0,totalSent:(null==y||null===(u=y.totals)||void 0===u?void 0:u.sent)||0},h=(0,f.vt)(O,(function(t){return{setLoadingData:function(e){return t((function(t){return g(g({},t),{},{loadingData:e})}))},setStateValues:function(e){return t((function(t){return g(g({},t),{},{chartData:void 0!==e.chartData?e.chartData:t.chartData,recipients:void 0!==e.recipients?e.recipients:t.recipients,sources:void 0!==e.sources?e.sources:t.sources,totalEmails:void 0!==e.totalEmails?e.totalEmails:t.totalEmails,totalFailed:void 0!==e.totalFailed?e.totalFailed:t.totalFailed,totalPercentOpen:void 0!==e.totalPercentOpen?e.totalPercentOpen:t.totalPercentOpen,totalSent:void 0!==e.totalSent?e.totalSent:t.totalSent})}))}}}));e.default=h}}]);