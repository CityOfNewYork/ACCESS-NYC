"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[5862],{65862:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a,i=n(90455),o=n(71860),s=n(8140),l=n(88856),r=n(78564),c=n.n(r),g=n(97867),_=n(30242),d=n(80509),u=n(5529),b=n(87029),m=n(53377),p=n(66598),f=n(16265),A=n(13379),v=n(84860),h=n(68381),y=n(27122),E=n.n(y),k=n(40450),S=n.n(k),x=n(60177),C=n(21713),T=n(83707),O=n(93313),w=(null===(a=(0,C.zj)(S(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},D=function(e){(0,e.addSnackbarMessage)(e.saveSuccessSnackBarMessage,"success")},P=function(e){var t=e.addSnackbarMessage;e.error;t(e.saveErrorSnackBarMessage,"error")},z=function(){var e=(0,i.A)(c().mark((function e(t){var n,a,i,o,s,l,r,g,_,d,u,b,m,p,f,A,v,h,y,k,S,z,I,M,G,L,R,j,B,N,V,U,W,H,J,q,F,K,Q,X,Y,Z,$,ee,te,ne,ae,ie,oe,se,le,re,ce;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,a=void 0===n?function(){}:n,i=t.errorCallback,o=void 0===i?null:i,s=t.snackBarErrorMessage,l=void 0===s?"":s,r=t.snackBarSuccessMessage,g=void 0===r?"":r,_=t.successCallback,d=void 0===_?null:_,u=t.type,b=void 0===u?"debug":u,m=t.useDebugLogger,p=void 0===m||m,f=w.i18n,v=(A=void 0===f?{}:f).debug_messages,y=(h=void 0===v?{}:v).deleting_activity_log_rows,k=void 0===y?"":y,S=h.deleting_activity_log_rows_error,z=void 0===S?"":S,I=h.deleting_all_debug_logs,M=void 0===I?"":I,G=h.deleting_all_debug_logs_error,L=void 0===G?"":G,R=A.snackbar_activity_log_delete_error,j=void 0===R?"":R,B=A.snackbar_activity_log_delete_success,N=void 0===B?"":B,V=A.snackbar_debug_log_delete_error,U=void 0===V?"":V,W=A.snackbar_debug_log_delete_success,H=void 0===W?"":W,J=w.endpoints,F=(q=void 0===J?{}:J).delete_events,Q=(K=void 0===F?{}:F).action,X=void 0===Q?"":Q,Y=K.nonce,Z=void 0===Y?"":Y,$=q.delete_debug_logs,te=(ee=void 0===$?{}:$).action,ne=void 0===te?"":te,ae=ee.nonce,ie=void 0===ae?"":ae,oe=g||"debug"===b?H:N,se=l||"debug"===b?U:j,le={action:"debug"===b?ne:X,security:"debug"===b?ie:Z},"debug"===b?le.all_logs="1":(le.all_events="1",le.event_ids=[1]),!p){e.next=9;break}return e.next=9,(0,T.A)((0,C.nv)("debug"===b?M:k,JSON.stringify((0,O.A)(["security"],le))),"info");case 9:return e.prev=9,e.next=12,(0,x.bE)({endpoint:E(),body:le});case 12:null!=(ce=e.sent)&&null!==(re=ce.data)&&void 0!==re&&re.success?(d||D)({addSnackbarMessage:a,data:null==ce?void 0:ce.data,saveSuccessSnackBarMessage:oe}):(o||P)({addSnackbarMessage:a,error:null==ce?void 0:ce.error,saveErrorSnackBarMessage:se}),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(9),a(se,"error"),!p){e.next=23;break}return e.next=23,(0,T.A)((0,C.nv)("debug"===b?L:z,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),I=z,M=n(33695),G=n(49572),L=n(27764),R=n(36770),j=n(59092);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=g.React.forwardRef,U=g.React.useState,W=V((function(e,t){var n=e.customAttributes,a=void 0===n?{}:n,l=e.customClasses,r=void 0===l?[]:l,y=e.common,E=void 0===y?{}:y,k=e.data,S=void 0===k?{}:k,x=e.i18n,C=void 0===x?{}:x,T=N({className:(0,g.classnames)({"gravitysmtp-settings-app__logging":!0},r)},a),O=(null==C?void 0:C.logging)||{},w=O.debug_log_retention_helper_text,D=O.debug_log_retention_label,P=O.debug_logging_box_heading,z=O.delete_activity_log_button_text,B=O.delete_debug_log_button_text,V=O.delete_debug_log_dialog_confirm_change_confirm,W=O.delete_debug_log_dialog_confirm_change_content,H=O.delete_debug_log_dialog_confirm_change_heading,J=O.delete_email_log_dialog_confirm_change_content,q=O.email_log_max_records_helper_text,F=O.email_log_retention_helper_text,K=O.email_log_retention_label,Q=O.enable_debug_log_helper_text,X=O.enable_debug_log_label,Y=O.enable_log_helper_text,Z=O.enable_log_label,$=O.logging_box_heading,ee=O.save_attachments_helper_text,te=O.save_attachments_label,ne=O.save_email_body_helper_text,ae=O.save_email_body_label,ie=O.top_content,oe=O.top_heading,se=O.track_open_label,le=O.track_open_helper_text,re=O.view_activity_log_button_text,ce=O.view_debug_log_button_text,ge=(null==S?void 0:S.email_log_settings)||{},_e=ge.email_log_enabled,de=ge.email_log_retention,ue=ge.email_log_url,be=ge.open_tracking_enabled,me=ge.retention_options,pe=ge.save_attachments_enabled,fe=ge.save_email_body_enabled,Ae=(null==S?void 0:S.debug_log_settings)||{},ve=Ae.debug_log_retention,he=Ae.debug_log_url,ye=Ae.retention_options,Ee=(0,j.default)((function(e){return e.debugLogEnabled})),ke=(0,j.default)((function(e){return e.setDebugLogEnabled})),Se=(0,j.default)((function(e){return e.setConfirmDialogSettings})),xe=(0,j.default)((function(e){return e.setConfirmDialogOpen})),Ce=(0,v.dh)(),Te=U(_e),Oe=(0,s.A)(Te,2),we=Oe[0],De=Oe[1];return g.React.createElement("div",(0,o.A)({},T,{ref:t}),g.React.createElement(u.A,{size:"display-sm",weight:"semibold",spacing:1,content:oe}),g.React.createElement(p.A,{size:"text-sm",spacing:6,color:"comet",content:ie}),(0,G.A)("CAPS_VIEW_EMAIL_LOG_SETTINGS")&&g.React.createElement(A.A,{HeaderContent:function(e){return g.React.createElement(u.A,(0,o.A)({content:$,tagName:"h2",size:"text-lg",weight:"medium"},e))},spacing:6},g.React.createElement(_.A,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},g.React.createElement(f.A,{customAttributes:{"data-test-id":"settings-activity-log-enable"},helpTextAttributes:{content:Y,size:"text-sm"},initialChecked:_e,labelAttributes:N({label:Z},(0,L.A)((0,M.A)("event_log_enabled"))),onChange:function(e){De(e),(0,h.A)({addSnackbarMessage:Ce,key:(0,M.A)("event_log_enabled"),updateData:S.email_log_settings,value:e})},labelPosition:"left",name:(0,M.A)("event_log_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,G.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),we&&g.React.createElement(f.A,{customAttributes:{"data-test-id":"settings-save-email-body-enable"},helpTextAttributes:{content:ne,size:"text-sm"},initialChecked:fe,labelAttributes:N({label:ae},(0,L.A)((0,M.A)("save_email_body_enabled"))),onChange:function(e){(0,h.A)({addSnackbarMessage:Ce,key:(0,M.A)("save_email_body_enabled"),updateData:S.email_log_settings,value:e})},labelPosition:"left",name:(0,M.A)("save_email_body_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,G.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),we&&g.React.createElement(f.A,{customAttributes:{"data-test-id":"settings-save-attachments-enable"},helpTextAttributes:{content:ee,size:"text-sm"},initialChecked:pe,labelAttributes:N({label:te},(0,L.A)((0,M.A)("save_attachments_enabled"))),onChange:function(e){(0,h.A)({addSnackbarMessage:Ce,key:(0,M.A)("save_attachments_enabled"),updateData:S.email_log_settings,value:e})},labelPosition:"left",name:(0,M.A)("save_attachments_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,G.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),we&&(0,R.A)("email_open_tracking")&&g.React.createElement(f.A,{customAttributes:{"data-test-id":"settings-track-open-enable"},helpTextAttributes:{content:le,size:"text-sm"},initialChecked:be,labelAttributes:N({label:se},(0,L.A)((0,M.A)("open_tracking"))),onChange:function(e){(0,h.A)({addSnackbarMessage:Ce,key:(0,M.A)("open_tracking"),updateData:S.email_log_settings,value:e})},labelPosition:"left",name:(0,M.A)("open_tracking"),spacing:6,size:"size-m",width:"full",disabled:!(0,G.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),g.React.createElement(m.A,{customAttributes:{"data-test-id":"settings-email-log-retention"},wrapperClasses:[!S.email_log_settings.log_retention_period_enabled&&"gravitysmtp-logging-settings__log-retention--locked"],initialValue:de,labelAttributes:N({label:K},(0,L.A)((0,M.A)("event_log_retention"),!S.email_log_settings.log_retention_period_enabled)),helpTextAttributes:{content:S.email_log_settings.log_retention_period_enabled?F:q,size:S.email_log_settings.log_retention_period_enabled?"text-xs":"text-sm"},name:(0,M.A)("event_log_retention"),onChange:function(e){(0,h.A)({addSnackbarMessage:Ce,showSnackBarSuccess:!0,key:(0,M.A)("event_log_retention"),updateData:S.email_log_settings,value:e})},options:me,disabled:!(0,G.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS"),spacing:6}),g.React.createElement(_.A,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,G.A)("CAPS_VIEW_EMAIL_LOG")&&g.React.createElement(b.A,{content:re,customAttributes:{"data-test-id":"settings-activity-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:ue}),(0,G.A)("CAPS_DELETE_EMAIL_LOG")&&g.React.createElement(d.A,{customAttributes:{"data-test-id":"settings-activity-log-delete"},label:z,onClick:(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Se({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:V,confirm_change_content:J,confirm_change_heading:H},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return xe(!1)},confirmDialogOnClose:function(){return xe(!1)},confirmDialogOnConfirm:function(){var e=(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!1),e.next=3,I({addSnackbarMessage:Ce,type:"email"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))),(0,G.A)("CAPS_VIEW_DEBUG_LOG_SETTINGS")&&g.React.createElement(A.A,{HeaderContent:function(e){return g.React.createElement(u.A,(0,o.A)({content:P,tagName:"h2",size:"text-lg",weight:"medium"},e))}},g.React.createElement(_.A,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},g.React.createElement(f.A,{customAttributes:{"data-test-id":"settings-debug-log-enable"},initialChecked:Ee,labelAttributes:N({label:X},(0,L.A)((0,M.A)("debug_log_enabled"))),helpTextAttributes:{content:Q,size:"text-sm"},onChange:function(e){ke(e),(0,h.A)({addSnackbarMessage:Ce,key:(0,M.A)("debug_log_enabled"),successCallback:function(){S.debug_log_settings.debug_log_enabled=e,E.data.debug_log_enabled=e},value:e})},helpTextWidth:"full",labelPosition:"left",name:(0,M.A)("debug_log_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,G.A)("CAPS_EDIT_DEBUG_LOG_SETTINGS")}),g.React.createElement(m.A,{initialValue:ve,labelAttributes:N({label:D},(0,L.A)((0,M.A)("debug_log_retention"))),helpTextAttributes:{content:w},name:(0,M.A)("debug_log_retention"),onChange:function(e){(0,h.A)({addSnackbarMessage:Ce,showSnackBarSuccess:!0,key:(0,M.A)("debug_log_retention"),updateData:S.debug_log_settings,value:e})},options:ye,disabled:!(0,G.A)("CAPS_EDIT_DEBUG_LOG_SETTINGS"),spacing:6}),g.React.createElement(_.A,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,G.A)("CAPS_VIEW_DEBUG_LOG")&&g.React.createElement(b.A,{content:ce,customAttributes:{"data-test-id":"settings-debug-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:he}),(0,G.A)("CAPS_DELETE_DEBUG_LOG")&&g.React.createElement(d.A,{customAttributes:{"data-test-id":"settings-debug-log-delete"},label:B,onClick:(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Se({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:V,confirm_change_content:W,confirm_change_heading:H},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return xe(!1)},confirmDialogOnClose:function(){return xe(!1)},confirmDialogOnConfirm:function(){var e=(0,i.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!1),e.next=3,I({addSnackbarMessage:Ce});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))))}));W.propTypes={customAttributes:g.PropTypes.object,customClasses:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.array,g.PropTypes.object])},W.displayName="LoggingScreen";var H=W},36770:function(e,t,n){n.d(t,{A:function(){return c}});var a,i,o=n(40450),s=n.n(o),l=(null===(a=(0,n(21713).zj)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},r=(null==l||null===(i=l.feature_flags)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.statuses)||{};function c(){return r[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||!1}}}]);