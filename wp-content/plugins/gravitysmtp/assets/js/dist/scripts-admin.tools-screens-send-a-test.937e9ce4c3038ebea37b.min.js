"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4806],{91614:function(e,t,n){n.r(t);var a=n(71860),i=n(90455),s=n(8140),r=n(88856),o=n(78564),l=n.n(o),c=n(27122),u=n.n(c),d=n(97867),m=n(60177),_=n(21713),p=n(82263),g=n(30242),b=n(80509),f=n(5529),v=n(25787),h=n(53377),y=n(13379),A=n(84860),R=n(66598),x=n(16265),E=n(83707),w=n(93313),k=n(27764);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=d.React.forwardRef,j=d.React.useEffect,C=d.React.useLayoutEffect,T=d.React.useState,N=d.React.useRef,S=d.ReactRouter.useSearchParams,F=P((function(e,t){var n,r,o=e.customAttributes,c=void 0===o?{}:o,z=e.customClasses,P=void 0===z?[]:z,F=e.common,D=void 0===F?{}:F,J=e.data,W=void 0===J?{}:J,G=e.i18n,H=void 0===G?{}:G,I=O({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},P)},c),L=H||{},M=L.debug_messages,V=M.sending_test_email,q=void 0===V?"":V,B=M.sending_test_email_error,K=void 0===B?"":B,Q=L.send_a_test,U=void 0===Q?{}:Q,X=U.top_heading,Y=U.top_content,Z=U.send_test_box_heading,$=U.send_test_box_input_label,ee=U.send_test_box_input_placeholder,te=U.send_test_box_input_description,ne=U.send_test_box_send_with_label,ae=U.send_test_box_send_with_description,ie=U.send_test_box_send_as_html_label,se=U.send_test_box_send_as_html_description,re=U.send_test_box_alerts_button_label,oe=U.send_test_box_try_again_button_label,le=U.send_test_box_error_issue_heading,ce=U.send_test_box_error_possible_reasons_heading,ue=U.send_test_box_error_recommended_steps_heading,de=U.send_test_box_view_log_button_label,me=U.send_test_box_copy_log_button_label,_e=U.send_test_box_copy_log_success_message,pe=((null==D?void 0:D.data)||{}).test_mode_enabled,ge=(null==D?void 0:D.i18n)||{},be=ge.snackbar_send_test_mail_error,fe=ge.snackbar_send_test_mail_success,ve=W.caps,he=void 0===ve?{}:ve,ye=W.integrations,Ae=(void 0===ye?[]:ye).filter((function(e){return!e.data.disabled&&e.data.configured})),Re=Ae.map((function(e){return{label:(null==e?void 0:e.title)||"",value:(null==e?void 0:e.id)||""}})),xe=!!Ae.length,Ee=xe?Ae.find((function(e){return e.data.is_primary}))||Ae[0]:{},we=pe||!xe,ke=S(),ze=(0,s.A)(ke,2),Oe=ze[0],Pe=(ze[1],Oe.get("integration")||""),je=T(!1),Ce=(0,s.A)(je,2),Te=Ce[0],Ne=Ce[1],Se=T(!1),Fe=(0,s.A)(Se,2),De=Fe[0],Je=Fe[1],We=T({}),Ge=(0,s.A)(We,2),He=Ge[0],Ie=Ge[1],Le=T(""),Me=(0,s.A)(Le,2),Ve=Me[0],qe=Me[1],Be=T(Pe||(null==Ee?void 0:Ee.id)||""),Ke=(0,s.A)(Be,2),Qe=Ke[0],Ue=Ke[1],Xe=T(!0),Ye=(0,s.A)(Xe,2),Ze=Ye[0],$e=Ye[1],et=T(""),tt=(0,s.A)(et,2),nt=tt[0],at=tt[1],it=(null==D||null===(n=D.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",st=(null==D||null===(r=D.endpoints)||void 0===r||null===(r=r.send_test)||void 0===r?void 0:r.nonce)||"",rt=N(!0),ot=N(null),lt=N(null),ct=N(null),ut=N(null),dt=T(!1),mt=(0,s.A)(dt,2),_t=mt[0],pt=mt[1],gt=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":Te});j((function(){_t&&ut.current&&(ut.current.focus(),pt(!1))}),[_t]),C((function(){rt.current?rt.current=!1:ot&&lt&&(De?lt.current.focus():ot.current&&ot.current.focus())}),[De]);var bt=(0,A.dh)(),ft=function(){var e=(0,i.A)(l().mark((function e(){var t,n,a,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Ve&&""!==Qe){e.next=2;break}return e.abrupt("return");case 2:return at(ct.current.offsetWidth),Ne(!0),t={action:it,security:st,email:Ve,connector_type:Qe,as_html:Ze?"true":"false"},e.next=7,(0,E.A)((0,_.nv)(q,JSON.stringify((0,w.A)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.bE)({endpoint:u(),body:t});case 10:a=e.sent,Ne(!1),null!=a&&null!==(n=a.data)&&void 0!==n&&n.success?bt(fe):null!=a&&null!==(i=a.error)&&void 0!==i&&null!==(i=i.detail)&&void 0!==i&&i.data?(s=(0,_.Fh)(a.error.detail.data)?JSON.parse(a.error.detail.data):"",(0,_.Gv)(s.data)?(Ie(s.data),Je(!0)):bt(s.data||be,"error")):bt(be,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),bt(e.t0.message,"error"),e.next=20,(0,E.A)((0,_.nv)(K,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),vt=De?1200:630;return he.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,a.A)({},I,{ref:t}),d.React.createElement(f.A,{size:"display-sm",weight:"semibold",spacing:1,content:X}),d.React.createElement(R.A,{size:"text-sm",spacing:6,color:"comet",content:Y}),d.React.createElement(y.A,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,(0,a.A)({content:Z,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return De?d.React.createElement(b.A,(0,a.A)({label:oe,onClick:function(){Je(!1),qe(""),Ie({})},size:"size-height-m"},e)):d.React.createElement(b.A,(0,a.A)({active:Te,activeType:"loader",customAttributes:{"data-test-id":"send-a-test-email-trigger",style:{width:"".concat(nt,"px")}},customClasses:gt,disabled:we,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:re,onClick:ft,ref:ct,size:"size-height-m"},e))}},d.React.createElement(g.A,{x:vt},De?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.A,{x:630},d.React.createElement(p.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:He.error_message,spacing:[2,0,6,0]})),(null==He?void 0:He.issues)&&He.issues.length>0&&He.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:le}),d.React.createElement(R.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},He.issues.map((function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)}))))),(null==He?void 0:He.possible_reasons)&&He.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:ce}),d.React.createElement(R.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},He.possible_reasons.map((function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)}))))),(null==He?void 0:He.recommended_steps)&&He.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:ue}),d.React.createElement(R.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},He.recommended_steps.map((function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)}))))),d.React.createElement(g.A,{display:"flex",spacing:2},d.React.createElement(b.A,{label:de,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(He.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:lt}),d.React.createElement(b.A,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:me,onClick:function(){(0,_.Ns)(He.log_copy),bt(_e),pt(!0)},ref:ut,size:"size-height-m",type:"white"}))):d.React.createElement(d.React.Fragment,null,d.React.createElement(v.A,{labelAttributes:{label:$},helpTextAttributes:{content:te},placeholder:ee,onChange:function(e){return qe(e)},type:"email",disabled:we,customAttributes:{"data-test-id":"send-a-test-email-input",ref:ot},spacing:6}),xe&&d.React.createElement(h.A,{customAttributes:{"data-test-id":"send-a-test-integration"},initialValue:Qe,labelAttributes:{label:ne},helpTextAttributes:{content:ae},name:"integration",onChange:function(e){return Ue(e)},options:Re,disabled:we,spacing:6}),d.React.createElement(x.A,{customAttributes:{"data-test-id":"send-a-test-html"},initialChecked:Ze,labelAttributes:O({label:ie},(0,k.A)("send-a-test-html")),helpTextAttributes:{content:se,size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"send-a-test-html",name:"send-a-test-html",onChange:function(e){return $e(e)},size:"size-m",width:"full",disabled:we})))))}));F.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},F.displayName="SendATestScreen",t.default=F},83707:function(e,t,n){n.d(t,{A:function(){return _}});var a,i=n(90455),s=n(78564),r=n.n(s),o=n(27122),l=n.n(o),c=n(40450),u=n.n(c),d=n(60177),m=(null===(a=(0,n(21713).zj)(u(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};function _(){return p.apply(this,arguments)}function p(){return p=(0,i.A)(r().mark((function e(){var t,n,a,i,s,o,c,u,_,p,g=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>0&&void 0!==g[0]?g[0]:"",i=g.length>1&&void 0!==g[1]?g[1]:"debug",s=m.data,o=void 0===s?{}:s,c=m.endpoints,_=(null==(u=void 0===c?{}:c)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=o&&o.debug_log_enabled&&_&&p&&a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:l(),body:{action:_,security:p,message:a,priority:i}}).catch((function(e){}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},93313:function(e,t,n){var a=n(52888),i=n(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(s){return Object.entries(s).reduce((function(s,r){var o=(0,i.A)(r,2),l=o[0],c=o[1];return"object"===(0,a.A)(c)&&null!==c?s[l]=n(c):e.includes(l)?s[l]=null===c?null:t.repeat(c.length):s[l]=c,s}),Array.isArray(s)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},27764:function(e,t,n){var a,i=n(40450),s=n.n(i),r=(null===(a=(0,n(21713).zj)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};t.A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==r||null===(e=r.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||a,lockedMessage:i||(null==r||null===(t=r.i18n)||void 0===t?void 0:t.setting_locked)||""}}}}]);