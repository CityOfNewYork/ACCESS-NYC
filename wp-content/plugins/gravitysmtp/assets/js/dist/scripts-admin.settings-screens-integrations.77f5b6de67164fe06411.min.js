"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4688,6124,7199,9702],{46716:function(t,n,e){e.r(n),e.d(n,{deactivateIntegrations:function(){return W},saveActivationState:function(){return J}});var i,o=e(71860),r=e(90455),a=e(88856),c=e(78564),s=e.n(c),u=e(27122),l=e.n(u),d=e(40450),g=e.n(d),p=e(97867),m=e(21713),f=e(60177),v=e(55809),b=e(30242),_=e(80509),y=e(29549),A=e(5529),h=e(87029),O=e(80371),k=e(66598),D=e(16265),C=e(99270),E=e(4842),S=e(60661),w=e(51994),P=e(84860),j=e(83707),R=e(75149),x=e(93313),L=e(59092);function I(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function T(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?I(Object(e),!0).forEach((function(n){(0,a.A)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var z=(null===(i=(0,m.zj)(g(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{},M=p.React.forwardRef,F=p.React.memo,B=p.React.useCallback,N=p.React.useMemo,G=F((function(t){var n,e,i=t.actionItems,o=void 0===i?[]:i,r=t.common,a=void 0===r?{}:r,c=t.data,s=void 0===c?{}:c,u=t.integration,l=void 0===u?{}:u,d=t.i18n,g=void 0===d?{}:d,f=(0,L.default)((function(t){return t.integrations})),v=(0,L.default)((function(t){return t.updateIntegrationSettings})),b=(0,L.default)((function(t){return t.setIntegrationSettingsFormData})),_=(0,L.default)((function(t){return t.updateIntegrationStatus})),y=(null==a||null===(n=a.endpoints)||void 0===n||null===(n=n.save_connector_settings)||void 0===n?void 0:n.action)||"",A=(null==a||null===(e=a.endpoints)||void 0===e||null===(e=e.save_connector_settings)||void 0===e?void 0:e.nonce)||"",h=(0,P.dh)(),O=s.primary_locked,k=s.backup_locked,D=o.map((function(t){var n,e,i;if("button"===t.props.element&&"edit"===t.key)return T(T({},t),{},{props:T(T({},t.props),{},{customAttributes:T(T({},t.props.customAttributes||{}),{},{onClick:function(){v(l.id,!0)}})})});if("set-as-primary"===t.key&&O||"set-as-backup"===t.key&&k)return T(T({},t),{},{props:T(T({},t.props),{},{customAttributes:T(T({},t.props.customAttributes||{}),{},{disabled:!0})})});if(null!=l&&null!==(n=l.data)&&void 0!==n&&n.configured){var o;if("link"===t.props.element&&"send-a-test"===t.key)return T(T({},t),{},{props:T(T({},t.props),{},{customAttributes:T(T({},t.props.customAttributes||{}),{},{href:"".concat((null===(o=t.props.customAttributes)||void 0===o?void 0:o.href)||"","&integration=").concat(l.id)})})});var r=function(){};switch(t.key){case"set-as-primary":r=function(){J(l.id,y,A,{enabled:!0,is_primary:!0,is_backup:!1}).then((function(){b(l.id,"is_primary",!0),b(l.id,"is_backup",!1),_(l.id,{enabled:!0,is_primary:!0,is_backup:!1}),h((0,m.nv)(g.integrations.set_primary_integration,l.title)),W(f,"is_primary",_,l.id,y,A)}))};break;case"set-as-backup":r=function(){J(l.id,y,A,{enabled:!0,is_primary:!1,is_backup:!0}).then((function(){b(l.id,"is_primary",!1),b(l.id,"is_backup",!0),_(l.id,{enabled:!0,is_backup:!0,is_primary:!1}),h((0,m.nv)(g.integrations.set_backup_integration,l.title)),W(f,"is_backup",_,l.id,y,A)}))}}return T(T({},t),{},{props:T(T({},t.props),{},{customAttributes:T(T({},t.props.customAttributes||{}),{},{onClick:r})})})}return"send-a-test"===t.key?T(T({},t),{},{props:T(T({},(null==t?void 0:t.props)||{}),{},{element:"button",customAttributes:T(T({},(null==t||null===(i=t.props)||void 0===i?void 0:i.customAttributes)||{}),{},{disabled:!0})})}):T(T({},t),{},{props:T(T({},(null==t?void 0:t.props)||{}),{},{customAttributes:T(T({},(null==t||null===(e=t.props)||void 0===e?void 0:e.customAttributes)||{}),{},{disabled:!0})})})}));return p.React.createElement(C.Ay,{align:"right",closeOnClick:!0,listItems:D,triggerAttributes:{ariaId:"".concat(l.id,"-aria-labelledby"),ariaText:g.integrations.card_more_settings,iconPrefix:"gravitysmtp-admin-icon",icon:"dots-horizontal",id:"".concat(l.id,"-trigger"),size:"size-height-s",type:"icon-grey"},width:192})})),W=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){var c;r.id!==e&&!0!==(null==r||null===(c=r.data)||void 0===c?void 0:c.disabled)&&!1!==(null==r?void 0:r.data[t])&&(J(r.id,i,o,(0,a.A)({},t,!1)),n(r.id,(0,a.A)({},t,!1)))}))},J=function(t,n,e,i){var o=i.activated,r=i.configured,a=i.enabled,c=i.is_primary,s=i.is_backup,u=z.i18n,d=(void 0===u?{}:u).debug_messages,g=void 0===d?{}:d,p=g.saving_integration_settings,v=void 0===p?"":p,b=g.saving_integration_settings_error,_=void 0===b?"":b,y={action:n,security:e,connector_type:t,settings:T(T(T(T(T({},void 0!==o&&{activated:o}),void 0!==r&&{configured:r}),void 0!==a&&{enabled:a}),void 0!==c&&{is_primary:c}),void 0!==s&&{is_backup:s})};return(0,j.A)((0,m.nv)(v,t,JSON.stringify((0,x.A)(["security"],y))),"info"),(0,f.bE)({endpoint:l(),body:y}).then((function(t){return t})).catch((function(n){throw(0,j.A)((0,m.nv)(_,t,JSON.stringify(n)),"error"),n}))},U=F((function(t){var n,e,i,o,a=t.common,c=t.data,u=t.i18n,l=t.integration,d=t.actionItems,g=t.caps,m=(0,L.default)((function(t){return t.integrations})),f=(0,L.default)((function(t){return t.updateIntegrationSettings})),h=(0,L.default)((function(t){return t.setConfirmDialogOpen})),C=(0,L.default)((function(t){return t.setConfirmDialogSettings})),P=(0,L.default)((function(t){return t.setIntegrationSettingsFormData})),j=(0,L.default)((function(t){return t.updateIntegrationStatus})),x=(null==l||null===(n=l.data)||void 0===n?void 0:n.enabled)||!1,I=(null==l||null===(e=l.data)||void 0===e?void 0:e.configured)||!1,T=(null==a||null===(i=a.endpoints)||void 0===i||null===(i=i.save_connector_settings)||void 0===i?void 0:i.action)||"",z=(null==a||null===(o=a.endpoints)||void 0===o||null===(o=o.save_connector_settings)||void 0===o?void 0:o.nonce)||"",M=c.primary_locked,F=c.backup_locked,W=N((function(){return p.React.createElement(A.A,{customClasses:["gform-card__top-container-heading"],tagName:"h3",content:l.title,size:"text-md",weight:"medium"})}),[l.title]),U=N((function(){var t={content:a.i18n.setting_locked,icon:"lock",iconPrefix:"gravitysmtp-admin-icon",iconPreset:"status-locked",maxWidth:300,position:"right",spacing:[0,0,0,2],tagName:"span",theme:"port"};return l.data.is_primary?p.React.createElement(b.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},p.React.createElement(O.A,{content:u.integrations.card_primary.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"blue"}),M&&p.React.createElement(E.A,t)):l.data.is_backup?p.React.createElement(b.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},p.React.createElement(O.A,{content:u.integrations.card_backup.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"upgrade"}),F&&p.React.createElement(E.A,t)):null}),[a.i18n.setting_locked,l.data.is_primary,l.data.is_backup,u.integrations.card_primary,u.integrations.card_backup,M,F]),Y=N((function(){return p.React.createElement(k.A,{customClasses:["gform-card__top-container-description"],color:"comet",size:"text-sm"},l.description)}),[l.description]),Z=N((function(){return v["".concat(l.logo,"Logo")]||v.BrokenImage}),[l.logo]),H=p.React.createElement(Z,null),V=B((function(){f(l.id,!0)}),[f,l.id]),q=[H],K=[];q.push(U);var Q=(null==u?void 0:u.integrations)||{},X=Q.card_toggle,$=Q.card_connected,tt=Q.card_configured,nt=Q.card_not_configured,et=Q.card_settings,it=Q.primary_disabled_heading,ot=Q.primary_disabled_content,rt=function(){h(!1)},at=function(){var t=(0,r.A)(s().mark((function t(n){var e,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!n&&l.data.is_primary&&(C({confirmDialogCustomAttributes:{showCancelButton:!1},confirmDialogI18n:{confirm_change_content:ot,confirm_change_heading:it},confirmDialogOpen:!0,confirmDialogOnClose:rt,confirmDialogOnConfirm:rt}),h(!0)),e={enabled:n},n?(i=m.every((function(t){return!t.data.enabled})),o=(0,R.A)(m),!i&&o||(e.is_primary=!0),P(l.id,"enabled",n)):(e.is_primary=!1,e.is_backup=!1,P(l.id,"enabled",n),P(l.id,"is_primary",!1),P(l.id,"is_backup",!1)),J(l.id,T,z,e),j(l.id,e);case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),ct=p.React.createElement(D.A,{externalChecked:x,externalControl:!0,labelAttributes:{label:X,isVisible:!1},onChange:at,disabled:!g.gravitysmtp_edit_integrations}),st=p.React.createElement(y.A,{container:!0,elementType:"div"},p.React.createElement(y.A,{item:!0,elementType:"div"},p.React.createElement(k.A,{size:"text-xs",spacing:[0,2,0,0],weight:"medium"},I?x?$:tt:nt)),p.React.createElement(y.A,{item:!0,elementType:"div"},p.React.createElement(w.A,{type:I?x?"success":"warning":"error"})));K.push(st,ct);var ut=p.React.createElement(_.A,{customClasses:["gform-card__top-container-settings-button"],icon:"cog",customAttributes:{"data-test-id":"integration-settings-button-".concat(l.id)},iconPrefix:"gravitysmtp-admin-icon",label:et,onClick:V,size:"size-height-s",type:"icon-white",disabled:!g.gravitysmtp_edit_integrations}),lt=p.React.createElement(b.A,{customClasses:["gform-card__top-container-buttons"],display:"flex"},ut,p.React.createElement(G,{actionItems:d,common:a,data:c,integration:l,i18n:u}));return q.push(lt),p.React.createElement(S.A,{customClasses:["gravitysmtp-settings-app__integration-card"],title:W,description:Y,headerContent:q,footerContent:K,disabled:l.data.disabled})})),Y=M((function(t,n){var e=t.customAttributes,i=void 0===e?{}:e,r=t.customClasses,a=void 0===r?[]:r,c=t.common,s=void 0===c?{}:c,u=t.data,l=void 0===u?{}:u,d=t.i18n,g=void 0===d?{}:d,f=(0,L.default)((function(t){return t.integrations})),v=T({className:(0,p.classnames)({"gravitysmtp-settings-app__integrations":!0},a),"data-test-id":"settings-integrations-screen"},i),_=(null==g?void 0:g.integrations)||{},O=_.top_heading,D=_.top_content,C=_.suggestion_link_text,E=(_.lower_heading,_.lower_content,(null==l?void 0:l.integrations_actions)||[]),S=(null==l?void 0:l.caps)||{};return p.React.createElement("div",(0,o.A)({},v,{ref:n}),p.React.createElement(A.A,{size:"display-sm",weight:"semibold",spacing:1,content:O}),p.React.createElement(k.A,{size:"text-sm",color:"comet",spacing:6},D,p.React.createElement(h.A,{spacing:[0,0,0,1],target:"_blank",href:"https://roadmap.smtp.gravity.com/",content:C})),!!f.length&&S.gravitysmtp_view_integrations&&p.React.createElement(b.A,{spacing:6},p.React.createElement(y.A,{container:!0,wrap:!0,customClasses:["gravitysmtp-settings-app__integration-card-grid"],justifyContent:"flex-start",columnSpacing:5,rowSpacing:6},f.map((function(t){var n;return null!=t&&null!==(n=t.data)&&void 0!==n&&n.disabled?null:p.React.createElement(y.A,{item:!0,key:"integrations-".concat((0,m.Yv)(t.title)),customClasses:["gravitysmtp-settings-app__integration-card-grid-item","gravitysmtp-settings-app__integration-card-grid-item--".concat((0,m.Yv)(t.title))],customAttributes:{"data-test-id":"integration-card-".concat(t.id)}},p.React.createElement(U,{common:s,data:l,i18n:g,integration:t,actionItems:E,caps:S}))})))))}));Y.propTypes={customAttributes:p.PropTypes.object,customClasses:p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.array,p.PropTypes.object]),data:p.PropTypes.object,i18n:p.PropTypes.object},Y.displayName="IntegrationsScreen",n.default=Y},59092:function(t,n,e){e.r(n);var i,o,r,a,c,s,u=e(88856),l=e(40450),d=e.n(l),g=e(97867),p=e(16675),m=e(21713);function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function v(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(Object(e),!0).forEach((function(n){(0,u.A)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var b,_,y,A,h=(null===(i=(0,m.zj)(d(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},O=(null===(o=(0,m.zj)(d(),"gravitysmtp_admin_config"))||void 0===o?void 0:o.common)||{},k={activeIntegration:(A=null==h||null===(y=h.data)||void 0===y||null===(y=y.integrations)||void 0===y?void 0:y.find((function(t){var n;return null==t||null===(n=t.data)||void 0===n?void 0:n.enabled})),(null==A?void 0:A.id)||""),activeIntegrationSettings:"",confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==O||null===(r=O.data)||void 0===r?void 0:r.debug_log_enabled)||!1,experimentalFeatures:(null==O||null===(a=O.data)||void 0===a?void 0:a.experimental_features)||{},integrations:(null==h||null===(c=h.data)||void 0===c?void 0:c.integrations)||[],integrationSettingsDialogOpen:!1,integrationSettingsFormData:(_={},null==h||null===(b=h.data)||void 0===b||null===(b=b.integrations)||void 0===b||b.forEach((function(t){_[t.id]=(null==t?void 0:t.data)||{}})),_),noticeDialogOpen:!1,pageLoaderActive:!1,settingsNavBlocked:!1,testModeEnabled:(null==O||null===(s=O.data)||void 0===s?void 0:s.test_mode_enabled)||!1},D=(0,p.vt)(k,(function(t){return{setActiveIntegration:function(n){return t((function(){return{activeIntegration:n}}))},setActiveIntegrationSettings:function(n){return t((function(){return{activeIntegrationSettings:n}}))},setConfirmDialogOpen:function(n){return t((function(){return{confirmDialogOpen:n}}))},setConfirmDialogSettings:function(n){var e=n.confirmDialogCustomAttributes,i=void 0===e?{}:e,o=n.confirmDialogI18n,r=void 0===o?{}:o,a=n.confirmDialogOpen,c=void 0!==a&&a,s=n.confirmDialogOnCancel,u=void 0===s?function(){}:s,l=n.confirmDialogOnClose,d=void 0===l?function(){}:l,g=n.confirmDialogOnConfirm,p=void 0===g?function(){}:g,m=n.confirmDialogConfirmButtonType,f=void 0===m?"primary-new":m;t((function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:f,confirmDialogI18n:r,confirmDialogOpen:c,confirmDialogOnCancel:u,confirmDialogOnClose:d,confirmDialogOnConfirm:p}}))},setExperimentalFeatures:function(n,e){return t((function(t){return{experimentalFeatures:v(v({},t.experimentalFeatures),{},(0,u.A)({},n,e))}}))},setIntegrationSettingsDialogOpen:function(n){return t((function(){return{integrationSettingsDialogOpen:n}}))},setNoticeDialogOpen:function(n){return t((function(){return{noticeDialogOpen:n}}))},setPageLoaderActive:function(n){return t((function(){return{pageLoaderActive:n}}))},setIntegrationSettingsFormData:function(n,e,i){return t((0,g.immer)((function(t){t.integrationSettingsFormData[n]||(t.integrationSettingsFormData[n]={}),t.integrationSettingsFormData[n][e]=i})))},setDebugLogEnabled:function(n){return t((function(){return{debugLogEnabled:n}}))},setSettingsNavBlocked:function(n){return t((function(){return{settingsNavBlocked:n}}))},setTestModeEnabled:function(n){return t((function(){return{testModeEnabled:n}}))},updateIntegrationSettings:function(n,e){return t((function(){return{activeIntegrationSettings:n,integrationSettingsDialogOpen:e}}))},updateIntegrationStatus:function(n,e){var i=e.activated,o=e.configured,r=e.enabled,a=e.is_primary,c=e.is_backup;return t((0,g.immer)((function(t){var e=t.integrations.find((function(t){return t.id===n}));e&&(e.data||(e.data={}),void 0!==i&&(e.data.activated=i),void 0!==o&&(e.data.configured=o),void 0!==r&&(e.data.enabled=r),void 0!==a&&(e.data.is_primary=a),void 0!==c&&(e.data.is_backup=c))})))}}}));n.default=D},55809:function(t,n,e){e.r(n),e.d(n,{AmazonAWSLogo:function(){return i.A},BrevoLogo:function(){return o.A},BrokenImage:function(){return r.A},CustomSMTPLogo:function(){return a.A},ElasticEmailLogo:function(){return c.A},GoogleAltLogo:function(){return s.A},GoogleLogo:function(){return u.A},MailchimpLogo:function(){return l.A},MailerSendLogo:function(){return d.A},MailgunLogo:function(){return g.A},MailjetLogo:function(){return p.A},MandrillLogo:function(){return m.A},MicrosoftAltLogo:function(){return f.A},MicrosoftLogo:function(){return v.A},PHPLogo:function(){return b.A},PostmarkLogo:function(){return _.A},SMTP2GOLogo:function(){return h.A},SendGridLogo:function(){return y.A},SlackLogo:function(){return A.A},SparkPostLogo:function(){return O.A},TelegramLogo:function(){return k.A},TwilioLogo:function(){return D.A},WhatsAppLogo:function(){return C.A},WordPressLogo:function(){return E.A},ZohoAltLogo:function(){return w},ZohoLogo:function(){return S.A}});var i=e(80403),o=e(53214),r=e(79543),a=e(26220),c=e(74685),s=e(63660),u=e(80419),l=e(8524),d=e(6682),g=e(73437),p=e(87504),m=e(49501),f=e(40783),v=e(55582),b=e(814),_=e(10503),y=e(83654),A=e(15034),h=e(68694),O=e(14945),k=e(23203),D=e(6560),C=e(73650),E=e(84173),S=e(64158),w=S.A},83707:function(t,n,e){e.d(n,{A:function(){return p}});var i,o=e(90455),r=e(78564),a=e.n(r),c=e(27122),s=e.n(c),u=e(40450),l=e.n(u),d=e(60177),g=(null===(i=(0,e(21713).zj)(l(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function p(){return m.apply(this,arguments)}function m(){return m=(0,o.A)(a().mark((function t(){var n,e,i,o,r,c,u,l,p,m,f=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=f.length>0&&void 0!==f[0]?f[0]:"",o=f.length>1&&void 0!==f[1]?f[1]:"debug",r=g.data,c=void 0===r?{}:r,u=g.endpoints,p=(null==(l=void 0===u?{}:u)||null===(n=l.log_debug_item)||void 0===n?void 0:n.action)||"",m=(null==l||null===(e=l.log_debug_item)||void 0===e?void 0:e.nonce)||"",null!=c&&c.debug_log_enabled&&p&&m&&i){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,d.bE)({endpoint:s(),body:{action:p,security:m,message:i,priority:o}}).catch((function(t){}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}},75149:function(t,n){n.A=function(t){var n,e;return null!==(n=null===(e=t.find((function(t){var n;return null===(n=t.data)||void 0===n?void 0:n.is_primary})))||void 0===e?void 0:e.id)&&void 0!==n?n:""}},93313:function(t,n,e){var i=e(52888),o=e(8140);n.A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",e=function(r){return Object.entries(r).reduce((function(r,a){var c=(0,o.A)(a,2),s=c[0],u=c[1];return"object"===(0,i.A)(u)&&null!==u?r[s]=e(u):t.includes(s)?r[s]=null===u?null:n.repeat(u.length):r[s]=u,r}),Array.isArray(r)?[]:{})};return e(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);