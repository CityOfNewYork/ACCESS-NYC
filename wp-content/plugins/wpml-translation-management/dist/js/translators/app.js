!function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var i=function(){function t(e,n,a,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e,this.pairsUI=e.find(".js-language-pairs"),this.fromLang=n||this.pairsUI.data("default-language"),this.toLangs=a,this.fromLangChangeCallback=i,this.toLangChangeCallback=o,this.UI=null}return a(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.copyTemplateUI(),this.setLanguages(t)}},{key:"copyTemplateUI",value:function(){var t=this;this.UI=this.content.find(".js-select-languages:last").clone().show(),this.UI.appendTo(this.pairsUI),this.fromLanguageSelect=this.UI.find(".js-from-language-select"),this.fromLanguageSelect.on("change",function(e){return t.fromLanguageChanged()}),this.toLanguageCheckboxes=this.UI.find(":checkbox"),this.toLanguageCheckboxes.on("change",function(e){t.toLangChangeCallback()}),this.trashIcon=this.UI.find(".js-delete-language-pair")}},{key:"setLanguages",value:function(t){var e=this;t&&t.includes(this.fromLang)&&(this.fromLang=null),this.fromLang&&this.fromLanguageSelect.val(this.fromLang),this.disableFromLanguages(t),this.UI.find(".js-to-languages").show(),this.toLangs.forEach(function(t){return e.UI.find(":checkbox[value="+t+"]").prop("checked",!0)}),this.hideToLanguage(this.fromLang)}},{key:"disableFromLanguages",value:function(t){var e=this;this.fromLanguageSelect.find("option").prop("disabled",!1),t&&t.forEach(function(t){return e.fromLanguageSelect.find("option[value="+t+"]").prop("disabled",t!==e.fromLang)})}},{key:"disableFromLanguageSelect",value:function(t){this.fromLanguageSelect.prop("disabled",t)}},{key:"hideToLanguage",value:function(t){this.toLanguageCheckboxes.closest("label").show(),t&&this.UI.find(":checkbox[value="+t+"]").prop("checked",!1).closest("label").hide()}},{key:"getFromLanguage",value:function(){return this.fromLanguageSelect.val()}},{key:"getToLanguages",value:function(){var t=[];return this.UI.find(":checkbox:checked").each(function(e,n){return t.push(n.value)}),t}},{key:"fromLanguageChanged",value:function(){this.fromLang=this.getFromLanguage(),this.hideToLanguage(this.getFromLanguage()),this.fromLangChangeCallback()}},{key:"hideTrashIcon",value:function(t){t?this.trashIcon.hide():this.trashIcon.show()}},{key:"addTrashHook",value:function(t){var e=this;this.trashIcon.off("click").on("click",function(n){return e.onTrash(t)})}},{key:"onTrash",value:function(t){t(this),this.UI.remove()}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(0),s=(a=o)&&a.__esModule?a:{default:a};var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e,this.languagePairs=[],this.totalNumberOfLangs=this.content.find('.js-to-languages:first input[type="checkbox"]').length}return i(t,[{key:"init",value:function(t,e,n){var a=this;for(var i in this.isFromLanguageSelectedCallback=e,this.isAnyLanguagePairOKCallback=n,this.languagePairs=[],t)if(t.hasOwnProperty(i)){var o=new s.default(this.content,i,t[i],function(){return a.notifyLanguageChanged()},function(){return a.toLanguageChanged()});o.init(),this.languagePairs.push(o)}this.addLanguagePairIfNoneInitialized(),this.setLanguageStates()}},{key:"addLanguagePairIfNoneInitialized",value:function(){this.languagePairs.length||this.addLanguagePair()}},{key:"addLanguagePair",value:function(){var t=this,e=new s.default(this.content,null,[],function(){return t.notifyLanguageChanged()},function(){return t.toLanguageChanged()});e.init(this.getFromLanguages()),this.languagePairs.push(e),this.setLanguageStates()}},{key:"setLanguageStates",value:function(){this.disableAllButLastFromLanguage(),this.disablePreviousFromLanguagesInLast(),this.hideTrashIconIfOnlyOneLanguage(),this.addTrashHook(),this.notifyLanguageChanged()}},{key:"getLanguagePairs",value:function(){var t={};return this.languagePairs.forEach(function(e){var n=e.getFromLanguage(),a=e.getToLanguages();"0"!==n&&a.length&&(t[n]=a)}),t}},{key:"getFromLanguages",value:function(){var t=[];return this.languagePairs.forEach(function(e){var n=e.getFromLanguage();"0"!==n&&t.push(n)}),t}},{key:"disableAllButLastFromLanguage",value:function(){for(var t=0;t<this.languagePairs.length-1;t++)this.languagePairs[t].disableFromLanguageSelect(!0);this.languagePairs[this.languagePairs.length-1].disableFromLanguageSelect(!1)}},{key:"disablePreviousFromLanguagesInLast",value:function(){var t=this.languagePairs.length;t&&this.languagePairs[t-1].disableFromLanguages(this.getFromLanguages())}},{key:"hideTrashIconIfOnlyOneLanguage",value:function(){var t=1===this.languagePairs.length;this.languagePairs.forEach(function(e){return e.hideTrashIcon(t)})}},{key:"addTrashHook",value:function(){var t=this;this.languagePairs.forEach(function(e){return e.addTrashHook(function(e){return t.onTrash(e)})})}},{key:"onTrash",value:function(t){this.languagePairs=this.languagePairs.filter(function(e){return e.getFromLanguage()!==t.getFromLanguage()}),this.setLanguageStates()}},{key:"notifyLanguageChanged",value:function(){var t=this.languagePairs.some(function(t){return"0"===t.getFromLanguage()});this.isFromLanguageSelectedCallback(!t&&this.languagePairs.length<this.totalNumberOfLangs),this.isAnyLanguagePairOKCallback(Object.keys(this.getLanguagePairs()).length>0)}},{key:"toLanguageChanged",value:function(){this.isAnyLanguagePairOKCallback(Object.keys(this.getLanguagePairs()).length>0)}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.section=null}return a(t,[{key:"show",value:function(t){t?this.section.show():this.section.hide()}},{key:"isShown",value:function(){return this.section.is(":visible")}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var i=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.nonce=a,this.active=this.content.length>0}return a(t,[{key:"init",value:function(t){var e=this;this.content.find(".js-remove-translator").off("click").on("click",function(){return e.removeTranslator()}),this.observer=t}},{key:"isActive",value:function(){return this.active}},{key:"removeTranslator",value:function(){var t=this,e=this.content.data("user-id");this.$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpml_remove_translation_translator",nonce:this.nonce,user_id:e},success:function(){return t.translatorRemoved()}})}},{key:"translatorRemoved",value:function(){this.content.remove(),this.active=!1,this.observer.onTranslatorsChange()}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var i=function(){function t(e,n,a,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.nonce=a,this.editTranslatorLanguageDialog=i,this.observers=[],this.hideATE=!1}return a(t,[{key:"init",value:function(){var t=this;this.content.find(".js-remove-translator").off("click").on("click",function(e){return t.removeTranslator(e)}),this.content.find(".js-edit-languages").off("click").on("click",function(e){return t.editTranslatorLanguages(e)}),this.showOrHideList()}},{key:"addRow",value:function(t){this.content.find("tbody").append(t),this.init(),this.showOrHideList(),this.notifyObservers(),this.hideATE&&this.hideATESubscriptions()}},{key:"removeTranslator",value:function(t){var e=this,n=this.getEventRow(t),a=n.data("user-id");this.$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"wpml_remove_translation_translator",nonce:this.nonce,user_id:a},success:function(t){return e.translatorRemoved(t,n)}})}},{key:"translatorRemoved",value:function(t,e){t.success&&(e.remove(),this.showOrHideList(),this.notifyObservers())}},{key:"showOrHideList",value:function(){this.getNumberOfTranslators()?this.content.show():this.content.hide()}},{key:"editTranslatorLanguages",value:function(t){var e=this,n=this.getEventRow(t),a=n.data("user-id"),i=n.data("language-pairs");this.editTranslatorLanguageDialog.open(a,i,function(t){return e.updateTranslator(n,t)})}},{key:"getEventRow",value:function(t){return this.$(t.target).closest("tr")}},{key:"updateTranslator",value:function(t,e){t.replaceWith(e),this.init(),this.editTranslatorLanguageDialog.close()}},{key:"getNumberOfTranslators",value:function(){return this.content.find("tbody > tr").length}},{key:"addObserver",value:function(t){this.observers.push(t)}},{key:"notifyObservers",value:function(){for(var t=0;t<this.observers.length;t++)this.observers[t].onTranslatorsChange()}},{key:"hideATESubscriptions",value:function(){this.content.find(".column-subscription").hide(),this.hideATE=!0}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=(o(n(0)),o(n(1)));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.nonce=a,this.userId=null,this.updateTranslatorCallback=null,this.setupDialog()}return a(t,[{key:"setupDialog",value:function(){var t=this,e="js-edit-translator-languages-dialog";this.dialogElement=this.content.find("#"+e),this.dialogElement.dialog({autoOpen:!1,resizable:!1,draggable:!1,modal:!0,width:"auto",dialogClass:"wpml-dialog otgs-ui-dialog",closeText:this.dialogElement.data("cancel-text"),closeOnEscape:!0,buttons:[{class:"button-secondary alignleft "+e+"-cancel",text:this.dialogElement.data("cancel-text"),click:function(){return t.close()}},{class:"button-primary alignright "+e+"-ok",text:this.dialogElement.data("save-text"),click:function(){return t.save()}}],close:function(){}}),this.dialogElement.find(".js-add-lang-pair").on("click",function(e){return t.addLanguagePair()})}},{key:"open",value:function(t,e,n){var a=this;this.userId=t,this.updateTranslatorCallback=n,this.resetDialog(),this.languagePairUIContainer.init(e,function(t){return a.enableAddButton(t)},function(t){return a.enableSaveButton(t)}),this.dialogElement.dialog("open")}},{key:"close",value:function(){this.dialogElement.dialog("close")}},{key:"save",value:function(){var t=this;new WPML_TM.setTranslationRole(this.$,null,this.nonce,"translator").setExisting(this.userId,function(e){return t.updateTranslator(e)},null,{languagePairs:this.getLanguagePairs()})}},{key:"getLanguagePairs",value:function(){return this.languagePairUIContainer.getLanguagePairs()}},{key:"getFromLanguages",value:function(){return this.languagePairUIContainer.getFromLanguages()}},{key:"resetDialog",value:function(){this.dialogElement.find(".js-language-pairs").html(""),this.languagePairUIContainer=new i.default(this.dialogElement)}},{key:"updateTranslator",value:function(t){this.updateTranslatorCallback(t)}},{key:"addLanguagePair",value:function(){this.languagePairUIContainer.addLanguagePair(),this.enableAddButton(!1)}},{key:"enableAddButton",value:function(t){this.dialogElement.find(".js-add-lang-pair").prop("disabled",!t)}},{key:"enableSaveButton",value:function(t){this.$(".js-edit-translator-languages-dialog-ok").prop("disabled",!t)}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var i=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.dialogId=n,this.content=a,this.maxWidth="95%",this.setupDialog()}return a(t,[{key:"setupDialog",value:function(){this.dialogElement=this.content.find("#"+this.dialogId),this.dialogElement.dialog({autoOpen:!1,resizable:!1,draggable:!1,modal:!0,width:"auto",dialogClass:"wpml-dialog otgs-ui-dialog",closeText:this.dialogElement.data("cancel-text"),closeOnEscape:!0,buttons:this.getButtons()})}},{key:"getButtons",value:function(){return[this.getDefaultCancelButton()]}},{key:"getDefaultCancelButton",value:function(){var t=this;return{class:"button-secondary alignleft "+this.dialogId+"-cancel",text:this.dialogElement.data("cancel-text"),click:function(){return t.onCancel()}}}},{key:"onCancel",value:function(){this.close()}},{key:"open",value:function(){var t=this;this.$(window).on("resize.repositionDialog",function(){return t.repositionDialog()}),this.dialogElement.dialog("open"),this.repositionDialog()}},{key:"close",value:function(){this.$(window).off("resize.repositionDialog"),this.dialogElement.dialog("close")}},{key:"destroy",value:function(){this.dialogElement.dialog("destroy").remove()}},{key:"repositionDialog",value:function(){this.$(".otgs-ui-dialog .ui-dialog-content").css({"max-height":this.$(window).height()-180}),this.$(".otgs-ui-dialog").css({"max-width":this.maxWidth});var t=this.getFullWidthElements();t.length&&this.dialogElement.find(t.join()).css({"max-width":"100%"}),this.setPosition({my:"center",at:"center",of:window})}},{key:"getFullWidthElements",value:function(){return[]}},{key:"setTitle",value:function(t){this.dialogElement.dialog("option","title",t)}},{key:"setMaxWidth",value:function(t){this.maxWidth=t,this.repositionDialog()}},{key:"setPosition",value:function(t){this.dialogElement.dialog("option","position",t)}},{key:"find",value:function(t){return this.dialogElement.find(t)}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=s(n(2)),o=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),a(e,[{key:"init",value:function(t){return this.initializeSelectors(t),this.reset(),this}},{key:"initializeSelectors",value:function(t){var e=this;this.section=this.$("#"+t).find(".js-select-languages-section"),this.dialogOK=this.$("."+t+"-ok").attr("disabled","disabled"),this.section.find(".js-add-lang-pair").on("click",function(t){return e.addLanguagePair()})}},{key:"reset",value:function(){var t=this;this.section.find(".js-language-pairs").html(""),this.languagePairUIContainer=new o.default(this.section),this.languagePairUIContainer.init({},function(e){return t.enableAddButton(e)},function(e){return t.enableOkButton(e)}),this.enableOkButton(!1)}},{key:"show",value:function(t){(function t(e,n,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,a)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(a):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,t),t&&(this.dialogOK.text(this.section.data("save-translator-text")),this.languagePairUIContainer.notifyLanguageChanged())}},{key:"setUserName",value:function(t){var e=this.section.find("h4"),n=e.data("text");e.text(n.replace("%USERNAME%",t))}},{key:"addLanguagePair",value:function(){this.languagePairUIContainer.addLanguagePair(),this.enableAddButton(!1)}},{key:"enableOkButton",value:function(t){t?this.dialogOK.removeAttr("disabled"):this.dialogOK.attr("disabled","disabled")}},{key:"enableAddButton",value:function(t){this.section.find(".js-add-lang-pair").prop("disabled",!t)}},{key:"getLanguagePairs",value:function(){return this.languagePairUIContainer.getLanguagePairs()}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(2),s=(a=o)&&a.__esModule?a:{default:a};var r=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.role=n,a.currentMode=null,a.selectedUser=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"init",value:function(t,e){var n=this;this.initializeSelectors(t,e),WPML_TM.translationRolesSelect2(this.existingUserSelect,this.nonce,this.role,function(t){return n.selectChange(t)}),this.addTranslationRole=new WPML_TM.setTranslationRole(this.$,e,this.nonce,this.role,function(t){return n.enableButton(t)})}},{key:"initializeSelectors",value:function(t,e){var n=this;this.existingUserSelect=e.find(".js-translation-user-select"),this.section=e.find(".js-select-user"),this.nonce=this.section.data("nonce"),this.modeRadios=e.find('[name="user"]').on("change",function(t){return n.onMode()}),this.existingSection=e.find(".js-existing-user-section"),this.newSection=e.find(".js-new-user-section"),this.dialogOK=this.$("."+t+"-ok").attr("disabled","disabled")}},{key:"reset",value:function(){this.addTranslationRole.resetInputs(),this.existingUserSelect.select2("val",""),this.selectedUser=null,this.modeRadios.prop("checked",!1),this.existingSection.hide(),this.newSection.hide()}},{key:"selectChange",value:function(t){this.selectedUser=this.$(t.target).select2("data"),this.enableButton(""!==this.selectedUser.ID)}},{key:"onMode",value:function(){var t=this;this.modeRadios.each(function(e,n){return t.showSelectedSection(n)}),this.enableButtonIfRequired(),this.closeExistingUserSelect()}},{key:"closeExistingUserSelect",value:function(){this.existingUserSelect.select2("close")}},{key:"showSelectedSection",value:function(t){if((t=this.$(t)).is(":checked"))switch(this.currentMode=t.val(),this.currentMode){case"existing":this.existingSection.show(),this.newSection.hide();break;case"new":this.existingSection.hide(),this.newSection.show()}}},{key:"enableButton",value:function(t){t?this.dialogOK.removeAttr("disabled"):this.dialogOK.attr("disabled","disabled")}},{key:"enableButtonIfRequired",value:function(){if(this.currentMode)switch(this.currentMode){case"new":this.enableButton(this.addTranslationRole.isValid());break;case"existing":this.enableButton(this.selectedUser&&""!==this.selectedUser.ID)}}},{key:"show",value:function(t){(function t(e,n,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,a)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(a):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,t),t&&(this.dialogOK.text(this.section.data("set-languages-text")),this.enableButtonIfRequired())}},{key:"getUserName",value:function(){switch(this.currentMode){case"new":return this.addTranslationRole.getUserName();case"existing":return this.selectedUser.display_name}}},{key:"addTranslationRoleUserViaAjax",value:function(t,e,n){switch(this.enableButton(!1),this.currentMode){case"new":this.addTranslationRole.addNew(e,n,{languagePairs:t});break;case"existing":this.addTranslationRole.setExisting(this.selectedUser.ID,e,n,{languagePairs:t})}}}]),e}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=function t(e,n,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,a)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(a):void 0},o=u(n(8)),s=u(n(7)),r=u(n(6));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"js-add-translator-dialog",n));return i.translatorAddedCallback=a,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"setupDialog",value:function(){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setupDialog",this).call(this),this.addTranslator=new o.default(this.$,"translator"),this.addTranslator.init(this.dialogId,this.dialogElement),this.setLanguagesUI=new s.default(this.$).init(this.dialogId),this.previousButton=this.$("."+this.dialogId+"-previous").hide()}},{key:"getButtons",value:function(){var t=this,n=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getButtons",this).call(this);return n.push({class:"button-primary alignright "+this.dialogId+"-ok",text:"",click:function(){return t.buttonClick()}}),n.push({class:"button-secondary alignright "+this.dialogId+"-previous",text:this.dialogElement.data("previous-text"),click:function(){return t.showTranslationSection()}}),n}},{key:"open",value:function(){this.addTranslator.reset(),this.setLanguagesUI.reset(),this.showTranslationSection(),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this)}},{key:"close",value:function(){this.addTranslator.closeExistingUserSelect(),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this)}},{key:"buttonClick",value:function(){var t=this;this.setLanguagesUI.isShown()?this.addTranslator.addTranslationRoleUserViaAjax(this.setLanguagesUI.getLanguagePairs(),this.translatorAddedCallback,function(e){return t.translatorFailedCallback(e)}):this.showSetLanguagesSection()}},{key:"showTranslationSection",value:function(){this.addTranslator.show(!0),this.setLanguagesUI.show(!1),this.previousButton.hide(),this.dialogElement.find(".js-error").hide().html("")}},{key:"showSetLanguagesSection",value:function(){this.addTranslator.show(!1),this.setLanguagesUI.setUserName(this.addTranslator.getUserName()),this.setLanguagesUI.show(!0),this.previousButton.show()}},{key:"translatorFailedCallback",value:function(t){this.dialogElement.find(".js-error").show().html(t)}},{key:"getFullWidthElements",value:function(){return[".js-select-user",".js-select-languages",".js-select-languages-section"]}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=u(n(9)),o=u(n(5)),s=u(n(4)),r=u(n(3));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$=e,this.content=n,this.addNewTranslatorDialog=null}return a(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.content.data("nonce");this.translatorsOnlyI=new r.default(this.$,this.content.find(".js-translator-only-i"),n),this.translatorsOnlyI.init(this),this.addTranslatorButton=this.content.find(".js-add-translator"),this.addTranslatorButton.on("click",function(e){return t.addNewTranslator()}),this.translatorsTable=new s.default(this.$,this.content.find(".js-translators-table"),n,new o.default(this.$,this.content,n)),this.translatorsTable.init(),this.translatorsTable.addObserver(this),this.onTranslatorsChange(),e&&(this.hideHeading(),this.content.find("#ate-controls").hide(),this.translatorsTable.hideATESubscriptions())}},{key:"addNewTranslator",value:function(){var t=this;this.addNewTranslatorDialog||(this.addNewTranslatorDialog=new i.default(this.$,this.content,function(e){return t.translatorAdded(e)})),this.addNewTranslatorDialog.open()}},{key:"translatorAdded",value:function(t){this.addNewTranslatorDialog.close(),this.translatorsTable.addRow(t)}},{key:"hideHeading",value:function(){this.content.find("h2").hide()}},{key:"addObserver",value:function(t){this.translatorsTable.addObserver(t)}},{key:"getNumberOfTranslators",value:function(){return this.translatorsTable.getNumberOfTranslators()}},{key:"onTranslatorsChange",value:function(){this.getNumberOfTranslators()||this.translatorsOnlyI.isActive()?this.addTranslatorButton.addClass("alignright button-secondary").removeClass("button-primary"):this.addTranslatorButton.addClass("button-primary").removeClass("alignright button-secondary")}}]),t}();e.default=l},function(t,e,n){"use strict";var a,i=n(10),o=(a=i)&&a.__esModule?a:{default:a};jQuery(document).ready(function(){new o.default(jQuery,jQuery(".js-translators")).init()})},function(t,e,n){t.exports=n(11)}]);