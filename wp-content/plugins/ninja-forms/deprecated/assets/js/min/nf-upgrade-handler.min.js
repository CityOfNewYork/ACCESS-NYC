jQuery(document).ready(function(e){function s(s){this.upgrade=s,this.process=function(s,i,d){s="undefined"!=typeof s?s:0,total_step="undefined"!=typeof total_step?total_step:0,d="undefined"!=typeof d?d:[],console.log("Upgrade: "+this.upgrade),e.post(ajaxurl,{upgrade:this.upgrade,step:parseInt(s),total_steps:parseInt(i),args:d,action:"nf_upgrade_handler"},function(s){var i=e("#nf_upgrade_"+n.upgrade);try{s=e.parseJSON(s)}catch(d){return i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block"),i.find(".nf-upgrade-handler__errors__text").html("Bad Response :'(<br/>"+d+"<br />"+s),void i.find(".nf-upgrade-handler__errors").slideDown()}if(console.log("DEBUG: NF_UpgradeHandler step response: "),console.log(s),void 0==s)return i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block"),i.find(".nf-upgrade-handler__errors__text").html("Empty Response :'("),void i.find(".nf-upgrade-handler__errors").slideDown();if(s.errors){i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block");var r="";return e.each(s.errors,function(e,s){r=r+"["+e+"] "+s+"<br />"}),i.find(".nf-upgrade-handler__errors__text").html("Processing Error :'(<br />"+r),i.find(".nf-upgrade-handler__errors").slideDown(),void e("#progressbar_"+s.upgrade).slideUp()}e("#progressbar_"+s.upgrade).progressbar({value:100*(s.step/s.total_steps)});return i.find(".spinner").css("display","block").css("visibility","visible"),i.find(".dashicons-no").css("display","none"),i.find(".inside").slideDown(),void 0!=s.complete?(i.find(".inside").slideUp(),i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-yes").css("display","block"),void 0!=s.nextUpgrade?(n.upgrade=s.nextUpgrade,e("#nf_upgrade_"+n.upgrade).find(".spinner").css("display","block").css("visibility","visible"),e("#nf_upgrade_"+n.upgrade).find(".inside").slideDown(),void n.process()):(console.log('DEBUG: NF_UpgradeHandler says "It is finished!"'),void e(".nf-upgrade-complete").nfAdminModal("open"))):void n.process(s.step,s.total_steps,s.args)}).fail(function(){alert("error")})}}if(e(".nf-upgrade-complete").nfAdminModal({title:nfUpgradeHandler.nf_upgrade_complete_title,buttons:".nf-upgrade-complete-buttons"}),"undefined"!=typeof nfUpgradeHandler){console.log("DEBUG: NF_UpgradeHandler first upgrades is "+nfUpgradeHandler.upgrade);var n=new s(nfUpgradeHandler.upgrade);e(".progressbar").progressbar({value:0});var i=e("#nf_upgrade_"+n.upgrade);i.find(".spinner").css("display","block").css("visibility","visible"),i.find(".dashicons-no").css("display","none"),i.find(".inside").slideDown(),n.process()}else document.location.href="admin.php?page=ninja-forms"});