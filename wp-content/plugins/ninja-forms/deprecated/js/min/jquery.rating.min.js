if(window.jQuery)(function(e){if(!e.support.opacity&&!e.support.style)try{document.execCommand("BackgroundImageCache",false,true)}catch(t){}e.fn.rating=function(t){if(this.length==0)return this;if(typeof arguments[0]=="string"){if(this.length>1){var n=arguments;return this.each(function(){e.fn.rating.apply(e(this),n)})}e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]);return this}var t=e.extend({},e.fn.rating.options,t||{});e.fn.rating.calls++;this.not(".ninja-forms-star-rating-applied").addClass("ninja-forms-star-rating-applied").each(function(){var n,r=e(this);var i=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,"");var s=e(this.form||document.body);var o=s.data("rating");if(!o||o.call!=e.fn.rating.calls)o={count:0,call:e.fn.rating.calls};var u=o[i]||s.data("rating"+i);if(u)n=u.data("rating");if(u&&n)n.count++;else{n=e.extend({},t||{},(e.metadata?r.metadata():e.meta?r.data():null)||{},{count:0,stars:[],inputs:[]});n.serial=o.count++;u=e('<span class="ninja-forms-star-rating-control"/>');r.before(u);u.addClass("rating-to-be-drawn");if(r.attr("disabled")||r.hasClass("disabled"))n.readOnly=true;if(r.hasClass("required"))n.required=true;u.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",function(){e(this).rating("drain");e(this).addClass("ninja-forms-star-rating-cancel-hover")}).on("mouseout",function(){e(this).rating("draw");e(this).removeClass("ninja-forms-star-rating-cancel-hover")}).on("click",function(){e(this).rating("select")}).data("rating",n))}var a=e('<div role="text" aria-label="'+this.title+'" class="ninja-forms-star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");u.append(a);if(this.id)a.attr("id",this.id);if(this.className)a.addClass(this.className);if(n.half)n.split=2;if(typeof n.split=="number"&&n.split>0){var f=(e.fn.width?a.width():0)||n.starWidth;var l=n.count%n.split,c=Math.floor(f/n.split);a.width(c).find("a").css({"margin-left":"-"+l*c+"px"})}if(n.readOnly)a.addClass("ninja-forms-star-rating-readonly");else a.addClass("ninja-forms-star-rating-live").on("mouseover",function(){e(this).rating("fill");e(this).rating("focus")}).on("mouseout",function(){e(this).rating("draw");e(this).rating("blur")}).on("click",function(){e(this).rating("select")});if(this.checked)n.current=a;if(this.nodeName=="A"){if(e(this).hasClass("selected"))n.current=a}r.hide();r.on("change.rating",function(t){if(t.selfTriggered)return false;e(this).rating("select")});a.data("rating.input",r.data("rating.star",a));n.stars[n.stars.length]=a[0];n.inputs[n.inputs.length]=r[0];n.rater=o[i]=u;n.context=s;r.data("rating",n);u.data("rating",n);a.data("rating",n);s.data("rating",o);s.data("rating"+i,u)});e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e(this.tagName=="INPUT"?this:null);if(t.focus)t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e(this.tagName=="INPUT"?this:null);if(t.blur)t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;if(e.readOnly)return;this.rating("drain");this.prevAll().addBack().filter(".rater-"+e.serial).addClass("ninja-forms-star-rating-hover")},drain:function(){var e=this.data("rating");if(!e)return this;if(e.readOnly)return;e.rater.children().filter(".rater-"+e.serial).removeClass("ninja-forms-star-rating-on").removeClass("ninja-forms-star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");var n=e(t.current);var r=n.length?n.prevAll().addBack().filter(".rater-"+t.serial):null;if(r)r.addClass("ninja-forms-star-rating-on");t.cancel[t.readOnly||t.required?"hide":"show"]();this.siblings()[t.readOnly?"addClass":"removeClass"]("ninja-forms-star-rating-readonly")},select:function(t,n){var r=this.data("rating");if(!r)return this;if(r.readOnly)return;r.current=null;if(typeof t!="undefined"||this.length>1){if(typeof t=="number")return e(r.stars[t]).rating("select",undefined,n);if(typeof t=="string"){e.each(r.stars,function(){if(e(this).data("rating.input").val()==t)e(this).rating("select",undefined,n)});return this}}else{r.current=this[0].tagName=="INPUT"?this.data("rating.star"):this.is(".rater-"+r.serial)?this:null}this.data("rating",r);this.rating("draw");var i=e(r.current?r.current.data("rating.input"):null);var s=e(r.inputs).filter(":checked");var o=e(r.inputs).not(i);o.prop("checked",false);i.prop("checked",true);e(i.length?i:s).trigger({type:"change",selfTriggered:true});if((n||n==undefined)&&r.callback)r.callback.apply(i[0],[i.val(),e("a",r.current)[0]]);return this},readOnly:function(t,n){var r=this.data("rating");if(!r)return this;r.readOnly=t||t==undefined?true:false;if(n)e(r.inputs).attr("disabled","disabled");else e(r.inputs).removeAttr("disabled");this.data("rating",r);this.rating("draw")},disable:function(){this.rating("readOnly",true,true)},enable:function(){this.rating("readOnly",false,false)}});e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};e(function(){e("input[type=radio].ninja-forms-star").rating()})})(jQuery)