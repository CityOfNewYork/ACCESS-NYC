/*! Content Workflow (by Bynder) - v1.0.0 - 2024-06-25 |  | Copyright (c) 2024 Content Workflow (by Bynder) | Licensed GPLv2 */
!function i(n,c,o){function a(s,t){if(!c[s]){if(!n[s]){var e="function"==typeof require&&require;if(!t&&e)return e(s,!0);if(r)return r(s,!0);t=new Error("Cannot find module '"+s+"'");throw t.code="MODULE_NOT_FOUND",t}e=c[s]={exports:{}};n[s][0].call(e.exports,function(t){var e=n[s][1][t];return a(e||t)},e,e.exports,i,n,c,o)}return c[s].exports}for(var r="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(t,e,s){"use strict";e.exports=Backbone.Collection.extend({getById:function(e){return this.find(function(t){t=t.get("id");return t===e||t&&e&&t==e})}})},{}],2:[function(e,t,s){"use strict";t.exports=function(t){var s=null,i="asc",t=t.collections.base.extend({model:t.models.item,totalChecked:0,allChecked:!1,syncEnabled:!1,processing:!1,sortKey:s,sortDirection:i,initialize:function(t,e){this.listenTo(this,"checkAll",this.toggleChecked),this.listenTo(this,"checkSome",this.toggleCheckedIf),this.listenTo(this,"change:checked",this.checkChecked),this.listenTo(this,"sortByColumn",this.sortByColumn),this.totalChecked=this.checked().length,e&&e.reinit&&this.reinit(t)},reinit:function(t){this.totalChecked=this.checked(t).length,this.syncEnabled=0<this.totalChecked,this.allChecked=this.totalChecked>=t.length,this.sortKey=s,this.sortDirection=i,this.sort()},checkChecked:function(t){t.changed.checked?this.totalChecked++:(this.totalChecked===this.length&&(this.allChecked=!1),this.totalChecked--),this.checkAllStatus()},checkAllStatus:function(t){var e=this.syncEnabled;this.syncEnabled=0<this.totalChecked,e!==this.syncEnabled&&this.trigger("enabledChange",this.syncEnabled),this.totalChecked<this.length&&this.trigger("notAllChecked",!1)},toggleCheckedIf:function(e){this.processing=!0,this.stopListening(this,"change:checked",this.checkChecked),this.each(function(t){t.set("checked",Boolean("function"==typeof e?e(t):e))}),this.listenTo(this,"change:checked",this.checkChecked),this.totalChecked=this.checked().length,this.allChecked=this.totalChecked>=this.length,this.checkAllStatus(),this.processing=!1,this.trigger("render")},toggleChecked:function(t){this.allChecked=t,this.toggleCheckedIf(t)},checked:function(t){return(t=t||this).filter(function(t){return t.get("checked")})},comparator:function(t,e){if(this.sortKey)return t=t.get(this.sortKey),e=e.get(this.sortKey),"updated_at"===this.sortKey&&(t=t.date||t,e=e.date||e),"status"===this.sortKey&&(t=t.name||t,e=e.name||e),"asc"===this.sortDirection?e<t?-1:t<e?1:0:t<e?-1:e<t?1:0},sortByColumn:function(t,e){this.sortKey=s=t,this.sortDirection=i=e,this.sort()}});return e("./../collections/search-extension.js")(t)}},{"./../collections/search-extension.js":5}],3:[function(t,e,s){"use strict";e.exports=function(t){return t.collections.base.extend({model:t.models.navItem,initialize:function(){this.listenTo(this,"activate",this.activate)},getActive:function(){return this.find(function(t){return!t.get("hidden")})},activate:function(t){this.each(function(t){t.set("hidden",!0)}),this.getById(t).set("hidden",!1),this.trigger("render")}})}},{}],4:[function(e,t,s){"use strict";t.exports=function(t){var s=e("./../collections/items.js")(t);return e("./../collections/search-extension.js")(s.extend({model:t.models.post,initialize:function(t,e){s.prototype.initialize.call(this,t,e),this.listenTo(this,"updateItems",this.updateItems)},updateItems:function(s){this.each(function(t){var e=t.get("id");e in s&&(s[e].status&&t.set("status",s[e].status),s[e].itemName&&t.set("itemName",s[e].itemName),s[e].updated_at)&&t.set("updated_at",s[e].updated_at)})},checkedCan:function(e){switch(e){case"pull":e="canPull";break;case"assign":e="disabled";break;default:e="canPush"}return this.find(function(t){return t.get(e)&&t.get("checked")})}}))}},{"./../collections/items.js":2,"./../collections/search-extension.js":5}],5:[function(t,e,s){"use strict";e.exports=function(n){return _.extend(n.prototype,{_searchResults:null,search:function(t,e){t=this._doSearch(t,e);return this.trigger("search",t),t},_doSearch:function(s,t){var i,e;return t=!(!t||!t.length)&&t,this.models.length?(i=this.matcher,e=s?this.filter(function(e){return t=t||e.searchAttributes||_.keys(e.attributes),_.some(t,function(t){return i(s,e.get(t))})}):this.models,this.trigger("searchResults",e),(e=new n(e,{reinit:!0})).searching={keyword:s,attributes:t},e.getSearchQuery=function(){return this.searching},this._searchResults=e,this.trigger("search",e),e):[]},matcher:function(t,e){if(t&&e)return t=t.toString().toLowerCase(),0<=(e=e.toString().toLowerCase()).indexOf(t)},getSearchValue:function(){return this.getSearchQuery().keyword},getSearchQuery:function(){return this._searchResults&&this._searchResults.getSearchQuery()||{}},getSearchResults:function(){return this._searchResults},current:function(){return this._searchResults||this}}),n}},{}],6:[function(t,e,s){"use strict";var i,n,c,o,a;window.GatherContent=window.GatherContent||{},i=window,n=document,c=jQuery,(o=window.GatherContent).general=o.general||{},a=o.general,t("./initiate-objects.js")(a),a.models.post=t("./models/post.js")(o),a.collections.posts=t("./collections/posts.js")(a),a.views.postRow=t("./views/post-row.js")(a,o),a.views.statusSelect2=t("./views/status-select2.js")(a),a.views.postRows=t("./views/post-rows.js")(a,o,c),a.models.navItem=t("./models/modal-nav-item.js")(a),a.collections.navItems=t("./collections/modal-nav-items.js")(a),a.views.tableBase=t("./views/table-base.js")(a,c,o),a.views.modalPostRow=t("./views/modal-post-row.js")(a,o),a.views.modal=t("./views/modal.js")(a,o,c),a.monkeyPatchQuickEdit=function(t){var e=i.inlineEditPost.edit;i.inlineEditPost.edit=function(){e.apply(this,arguments),t.apply(this,arguments)}},a.triggerModal=function(t){t.preventDefault();t=a.getChecked();t.length&&void 0===a.modalView&&(a.modalView=new a.views.modal({collection:a.generalView.collection}),a.modalView.checked(t),a.generalView.listenTo(a.modalView,"updateModels",a.generalView.updatePosts))},a.getChecked=function(){return c('tbody th.check-column input[type="checkbox"]:checked').map(function(){return parseInt(c(this).val(),10)}).get()},a.init=function(){c(n.body).addClass("gathercontent-admin-select2").on("click","#gc-sync-modal",a.triggerModal),c(n).ajaxSend(function(t,e,s){s.data&&-1!==s.data.indexOf("&action=inline-save")&&a.generalView.trigger("quickEditSend",e,s)}),a.generalView=new a.views.postRows({collection:new a.collections.posts(o._posts)}),a.monkeyPatchQuickEdit(function(){a.generalView.trigger("quickEdit",arguments,this)})},c(a.init)},{"./collections/modal-nav-items.js":3,"./collections/posts.js":4,"./initiate-objects.js":7,"./models/modal-nav-item.js":10,"./models/post.js":12,"./views/modal-post-row.js":18,"./views/modal.js":19,"./views/post-row.js":20,"./views/post-rows.js":21,"./views/status-select2.js":22,"./views/table-base.js":23}],7:[function(e,t,s){"use strict";t.exports=function(t){t.models={base:e("./models/base.js")},t.collections={base:e("./collections/base.js")},t.views={base:e("./views/base.js")}}},{"./collections/base.js":1,"./models/base.js":9,"./views/base.js":13}],8:[function(t,e,s){"use strict";e.exports=function(t,e){return e=jQuery.extend({},{action:"cwby_sync_items",data:"",percent:0,nonce:"",id:"",stopSync:!0,flush_cache:!1},e),t.models.base.extend({defaults:e,initialize:function(){this.listenTo(this,"send",this.send)},reset:function(){return this.clear().set(this.defaults),this},send:function(e,s,t,i){return t&&this.set("percent",t),jQuery.post(window.ajaxurl,{action:this.get("action"),percent:this.get("percent"),nonce:this.get("nonce"),id:this.get("id"),data:e,flush_cache:this.get("flush_cache")},function(t){return this.trigger("response",t,e),t.success?s(t):i?i(t):void 0}.bind(this)),this}})}},{}],9:[function(t,e,s){"use strict";e.exports=Backbone.Model.extend({sync:function(){return!1}})},{}],10:[function(t,e,s){"use strict";e.exports=function(t){return t.models.base.extend({defaults:{label:"",id:"",hidden:!0,rendered:!1}})}},{}],11:[function(t,e,s){"use strict";e.exports=function(t){return t.prototype._get=function(t,e){return t=this["_get_"+e]?this["_get_"+e](t):t},t.prototype.get=function(t){return this._get(Backbone.Model.prototype.get.call(this,t),t)},t.prototype.toJSON=function(){return _.mapObject(Backbone.Model.prototype.toJSON.call(this),_.bind(this._get,this))},t}},{}],12:[function(t,e,s){"use strict";e.exports=function(e){return t("./../models/modify-json.js")(Backbone.Model.extend({defaults:{id:0,item:0,itemName:"",updated_at:"",current:!0,editLink:"",mapping:0,mappingName:"",mappingLink:"",mappingStatus:"",mappingStatusId:"",status:{},checked:!1,disabled:!1,canPull:!1,canPush:!1,statuses:[],statusesChecked:!1,ptLabel:!1},searchAttributes:["itemName","mappingName","post_title"],url:function(){var t=window.ajaxurl+"?action=cwby_fetch_js_post&id="+this.get("id");return this.get("uncached")&&(this.set("uncached",!1),t+="&flush_cache=force"),t},_get_disabled:function(t){return!this.get("mapping")},_get_canPull:function(t){return 0<this.get("item")&&0<this.get("mapping")},_get_canPush:function(t){return 0<this.get("mapping")},_get_mappingLink:function(t){return"failed"===Backbone.Model.prototype.get.call(this,"mappingStatus")&&(t+="&sync-items=1"),t},_get_mappingStatus:function(t){return e._statuses[t]||""},_get_mappingStatusId:function(t){return Backbone.Model.prototype.get.call(this,"mappingStatus")}}))}},{"./../models/modify-json.js":11}],13:[function(t,e,s){"use strict";e.exports=Backbone.View.extend({toggleExpanded:function(t){this.model.set("expanded",!this.model.get("expanded"))},getRenderedModels:function(e,t){t=t||this.collection;var s=document.createDocumentFragment();return t.each(function(t){t=new e({model:t}).render();s.appendChild(t.el)}),s},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},close:function(){this.remove(),this.unbind(),this.onClose&&this.onClose()}})},{}],14:[function(t,e,s){"use strict";e.exports=function(t){return t.views.base.extend({template:wp.template("gc-item"),tagName:"tr",className:"gc-item gc-enabled",id:function(){return this.model.get("id")},events:{"change .gc-check-column input":"toggleCheck","click .gc-reveal-items":"toggleExpanded","click .gc-status-column":"toggleCheckAndRender"},initialize:function(){this.listenTo(this.model,"change:checked",this.render)},toggleCheck:function(){this.model.set("checked",!this.model.get("checked"))},toggleCheckAndRender:function(t){this.toggleCheck(),this.render()}})}},{}],15:[function(n,t,e){"use strict";t.exports=function(t,e,s){var i;return n("./../views/metabox-base.js")(t,e,s).extend({template:wp.template("gc-mapping-metabox"),stepArgs:!1,events:{"click #gc-map":"step","change #select-gc-next-step":"setProperty","click #gc-map-cancel":"cancel"},initialize:function(){(i=this).listenTo(this.model,"change:waiting",this.toggleWaitingRender),this.listenTo(this.model,"change",this.maybeEnableAndRender),this.listenTo(this.model,"change:step",this.changeStep),this.listenTo(this,"cancel",this.resetAndRender),this.render(),this.$el.removeClass("no-js").addClass("gc-mapping-metabox")},changeStep:function(t){"accounts"===t.changed.step&&this.$el.addClass("gc-mapping-started"),t.changed.step&&(this.stepArgs=this["step_"+t.changed.step]())},setProperty:function(t){t=e(t.target).val();this.model.set(this.stepArgs.property,t),"account"!==this.stepArgs.property&&"project"!==this.stepArgs.property||this.step()},setMapping:function(){this.ajax({action:"cwby_save_mapping_id"},function(t){this.model.set("waiting",!1),this.trigger("complete",this.model,t)},this.failMsg)},maybeEnableAndRender:function(t){(t.changed.account||t.changed.project||t.changed.mapping)&&(this.model.set("btnDisabled",!1),this.render())},toggleWaitingRender:function(t){t.changed.waiting&&this.model.set("btnDisabled",!0),this.render()},step:function(){if(this.model.set("waiting",!0),"mapping"===this.stepArgs.property)return this.setMapping();this.setStep();var t=this.model.get(this.stepArgs.properties);return t&&t.length?this.successHandler(t):this.ajax({action:"cwby_wp_filter_mappings",property:this.stepArgs.property},this.successHandler,this.failMsg),this},failMsg:function(t){t="string"==typeof t?t:s._errors.unknown,window.alert(t),i.model.set("waiting",!1)},successHandler:function(t){this.model.set(this.stepArgs.properties,t),t.length<2&&this.model.set("btnDisabled",!1),this.model.set("waiting",!1)},setStep:function(){return this.model.get("step")?"accounts"===this.model.get("step")?this.model.set("step","projects"):"projects"===this.model.get("step")?this.model.set("step","mappings"):void 0:this.model.set("step","accounts")},step_accounts:function(){return{property:"account",properties:"accounts"}},step_projects:function(){return{property:"project",properties:"projects"}},step_mappings:function(){return{property:"mapping",properties:"mappings"}},cancel:function(t){this.trigger("cancel",t)},resetModel:function(){return this.stepArgs=!1,this.model.set({step:!1,account:0,project:0,mapping:0}),this.model},resetAndRender:function(){this.resetModel(),this.render()},render:function(){var t=this.model.toJSON();return this.stepArgs&&(t.label=s._step_labels[t.step],t.property=this.stepArgs.property),this.$el.html(this.template(t)),this}})}},{"./../views/metabox-base.js":16}],16:[function(t,e,s){"use strict";e.exports=function(t,n,c){return t.views.base.extend({el:"#gc-related-data",ajax:function(t,e,s){var i=this,t=n.post(window.ajaxurl,n.extend({action:"",post:this.model.toJSON(),nonce:c.$id("gc-edit-nonce").val(),flush_cache:c.queryargs.flush_cache?1:0},t),function(t){t.success?e.call(i,t.data):s&&s.call(i,t.data)});return s&&t.fail(function(){s.call(i)}),t}})}},{}],17:[function(o,t,e){"use strict";t.exports=function(t,e,s){var i=o("./../views/mapping-metabox.js")(t,e,s),n=new Backbone.Model({id:!0,cancelBtn:!0,accounts:[],projects:[],mappings:[]}),c=i.extend({close:function(){n=this.resetModel(),i.prototype.close.call(this)}});return function(t){n.set("ids",t);t=new c({model:n});return t.$el.addClass("postbox"),t.step()}}},{"./../views/mapping-metabox.js":15}],18:[function(e,t,s){"use strict";t.exports=function(t,s){return e("./../views/item.js")(t).extend({template:wp.template("gc-item"),id:function(){return"gc-modal-post-"+this.model.get("id")},className:function(){return"gc-item "+(this.model.get("disabled")?"gc-disabled":"gc-enabled")},events:{"change .gc-check-column input":"toggleCheck","click .gc-status-column":"toggleCheckAndRender"},initialize:function(){this.listenTo(this.model,"change:post_title",this.renderTitle),this.listenTo(this.model,"change:mappingStatus",this.render),this.listenTo(this.model,"render",this.render)},renderTitle:function(){var t=this.model.get("post_title"),e=this.model.get("id");s.$id("post-"+e).find(".column-title .row-title").text(t),s.$id("edit-"+e).find('[name="post_title"]').text(t),s.$id("inline_"+e).find(".post_title").text(t)}})}},{"./../views/item.js":14}],19:[function(c,t,e){"use strict";t.exports=function(e,s,i){e.modalView=void 0;var n;return e.views.tableBase.extend({id:"gc-bb-modal-dialog",template:wp.template("gc-modal-window"),selected:[],navItems:null,btns:{},currID:"select-items",currNav:!1,metaboxView:null,modelView:e.views.modalPostRow,$search:s.$id("gc-items-search"),events:{"click .gc-bb-modal-close":"closeModal","click #btn-cancel":"closeModal","click .gc-bb-modal-backdrop":"closeModal","click .gc-bb-modal-nav-tabs a":"clickSelectTab","change .gc-field-th.gc-check-column input":"checkAll","click #gc-btn-pull":"startPull","click #gc-btn-push":"startPush","click .gc-cloak":"maybeResetMetaboxView","click #gc-btn-assign-mapping":"startAssignment","click .gc-field-th.sortable":"sortRowsByColumn"},initialize:function(){(n=this).$search.length||(i(document.body).append('<div id="gc-items-search" class="hidden"></div>'),this.$search=s.$id("gc-items-search")),e.views.tableBase.prototype.initialize.call(this),_.bindAll(this,"render","preserveFocus","maybeClose","closeModal"),s._nav_items&&(this.navItems=new e.collections.navItems(s._nav_items),this.currNav=this.navItems.getActive(),this.listenTo(this.navItems,"render",this.render)),this.btns=new e.collections.base(s._modal_btns),this.listenTo(this.collection,"updateItems",this.maybeRender),this.listenTo(this.collection,"change:checked",this.checkEnableButton),this.listenTo(this.collection,"search",this.render),this.initMetaboxView=c("./../views/modal-assign-mapping.js")(e,i,s)},checked:function(t){if((this.selected=t).length)return t.length===this.collection.length?this.collection.trigger("checkAll",!0):(this.collection.trigger("checkSome",function(t){return-1!==_.indexOf(n.selected,t.get("id"))&&!t.get("disabled")}),this)},setupAjax:function(){var t=c("./../models/ajax.js")(e,{action:"cwby_pull_items",nonce:s._edit_nonce,flush_cache:s.queryargs.flush_cache?1:0});this.ajax=new t},render:function(){var t=this.collection.current();return this.$el.removeClass("gc-set-mapping").attr("tabindex","0").html(this.template({btns:this.btns.toJSON(),navItems:this.navItems?this.navItems.toJSON():[],currID:this.currNav?this.currNav.get("id"):"select-items",checked:t.allChecked,sortKey:t.sortKey,sortDirection:t.sortDirection})).append('<div class="gc-bb-modal-backdrop">&nbsp;</div>'),e.views.tableBase.prototype.render.call(this),i(document).on("focusin",this.preserveFocus).on("keyup",this.maybeClose),i(document.body).addClass("gc-modal-open"),this.$search.before(this.$el),this.$search.css(jQuery("#gc-tablenav").offset()),this.isSearch(document.activeElement)||this.$el.focus(),this},preserveFocus:function(t){this.$el[0]===t.target||this.$el.has(t.target).length||this.isSearch(t.target)||this.$el.focus()},maybeClose:function(t){27!==t.keyCode||this.isSearch(t.target)||this.closeModal(t)},isSearch:function(t){return this.$search[0]===t||this.$search.has(t).length},closeModal:function(t){t.preventDefault(),this.resetMetaboxView(),this.undelegateEvents(),i(document).off("focusin"),i(document).off("keyup",this.maybeClose),i(document.body).removeClass("gc-modal-open"),this.remove(),s.$id("bulk-edit").find("button.cancel").trigger("click"),e.modalView=void 0},clickSelectTab:function(t){t.preventDefault(),this.selectTab(i(t.target).data("id"))},selectTab:function(t){this.currID=t,this.currNav=this.navItems.getById(t),this.navItems.trigger("activate",t)},checkEnableButton:function(t){this.buttonStatus(t)},buttonStatus:function(t){this.collection.processing||(t?(this.$("#gc-btn-assign-mapping").prop("disabled",!this.collection.checkedCan("assign")),this.$("#gc-btn-push").prop("disabled",!this.collection.checkedCan("push")),this.$("#gc-btn-pull").prop("disabled",!this.collection.checkedCan("pull"))):this.$(".media-toolbar button").prop("disabled",!0))},startPull:function(t){t.preventDefault(),this.startSync("pull")},startPush:function(t){t.preventDefault(),this.startSync("push")},startSync:function(t){var e=this.selectiveGet("push"===t?"canPush":"canPull");window.confirm(s._sure[t])&&(e=_.map(e,function(t){return t.set("mappingStatus","starting"),t.toJSON()}),this.doAjax(e,t))},startAssignment:function(t){var e=_.map(this.selectiveGet("disabled"),function(t){return t.get("id")});this.resetMetaboxView(),this.$el.addClass("gc-set-mapping"),this.$("#gc-btn-assign-mapping").prop("disabled",!0),this.metaboxView=this.initMetaboxView(e),this.listenTo(this.metaboxView,"cancel",this.maybeResetMetaboxView),this.listenTo(this.metaboxView,"complete",function(t,e){t.set("waiting",!0),this.collection.map(function(t){t.get("id")in e.ids&&(t.set("mapping",e.mapping),t.set("mappingName",e.mappingName),t.set("mappingLink",e.mappingLink))}),this.render()})},maybeResetMetaboxView:function(){this.metaboxView&&(this.resetMetaboxView(),this.buttonStatus(!0))},resetMetaboxView:function(){this.metaboxView&&(this.stopListening(this.metaboxView),this.metaboxView.close(),this.$el.removeClass("gc-set-mapping"))},selectiveGet:function(e){var s,i=[];return this.collection.trigger("checkSome",function(t){return(s=t.get("checked")&&t.get(e))&&i.push(t),s}),i},getChecked:function(s){this.collection.filter(function(t){var e=t.get("checked");return e&&s&&s(t),e})},ajaxSuccess:function(e){var s,i;return e.data.mappings?(s=[],i="push"===e.data.direction?"canPush":"canPull",this.getChecked(function(t){t.get(i)&&(e.data.mappings.length&&-1!==_.indexOf(e.data.mappings,t.get("mapping"))?(t.set("mappingStatus","syncing"),s.push(t.get("mapping"))):(t.set("checked",!1),t.set("mappingStatus","complete"),t.fetch().done(function(){t.trigger("render")})))}),s.length?void this.checkStatus(s,e.data.direction):this.clearTimeout()):this.ajaxFail()},ajaxFail:function(t){this.setSelectedMappingStatus("failed"),this.clearTimeout()},setSelectedMappingStatus:function(e){return this.getChecked(function(t){t.set("mappingStatus",e)})},checkStatus:function(t,e){this.clearTimeout(),this.setTimeout(function(){n.doAjax({check:t},e)})},doAjax:function(t,e){this.ajax.set("action","cwby_"+e+"_items"),this.ajax.send(t,this.ajaxSuccess.bind(this),0,this.ajaxFail.bind(this))},maybeRender:function(){this.metaboxView||this.render()}})}},{"./../models/ajax.js":8,"./../views/modal-assign-mapping.js":17}],20:[function(t,e,s){"use strict";e.exports=function(t,e){return t.views.base.extend({template:wp.template("gc-post-column-row"),tagName:"span",className:"gc-status-column",id:function(){return"gc-status-row-"+this.model.get("id")},initialize:function(){this.listenTo(this.model,"change:status",this.render)},html:function(){return this.template(this.model.toJSON())},render:function(){return e.$id("post-"+this.model.get("id")).find(".column-gathercontent").html(this.html()),this}})}},{}],21:[function(t,e,s){"use strict";e.exports=function(e,n,c){var o;return e.views.statusSelect2.extend({template:wp.template("gc-status-select2"),el:"#posts-filter tbody",width:"200px",initialize:function(){(o=this).listenTo(this,"quickEdit",this.edit),this.listenTo(this,"quickEditSend",this.sending),this.render(),this.updatePosts()},updatePosts:function(){c.post(window.ajaxurl,{action:"cwby_get_posts",posts:n._posts,flush_cache:n.queryargs.flush_cache?1:0},function(t){t.success,t.data&&o.collection.trigger("updateItems",t.data)})},sending:function(t,e){var s,i=this.parseQueryString(e.data);i.post_ID&&i.gc_status&&(e=this.collection.getById(i.post_ID),s=_.find(e.get("statuses"),function(t){return parseInt(t.id,10)===parseInt(i.gc_status,10)}),e.set("status",s))},edit:function(t,e){var s,i=0;if("object"==typeof t&&(i=parseInt(e.getId(t),10)),this.waitSpinner(i),i)return(s=this.collection.getById(i)).get("statusesChecked")?this.renderStatuses(s):void c.post(window.ajaxurl,{action:"cwby_get_post_statuses",postId:i,flush_cache:n.queryargs.flush_cache?1:0},this.ajaxResponse).done(function(){o.renderStatuses(s)})},ajaxResponse:function(t){var e;t.data&&(e=o.collection.getById(t.data.postId))&&(e.set("statusesChecked",!0),t.success)&&(e.set("statuses",t.data.statuses),e.get("statuses").length)&&(o.$(".gc-select2").each(function(){c(this).select2("destroy")}),o.renderStatuses(e))},renderStatuses:function(t){var e=t.get("id");this.editSelect(e).html(this.template(t.toJSON())),t.get("statuses").length&&this.renderSelect2(n.$id("edit-"+e))},waitSpinner:function(t){this.editSelect(t).html('<span class="spinner"></span>')},editSelect:function(t){return n.$id("edit-"+t).find(".inline-edit-group .gc-status-select2")},render:function(){return this.collection.each(function(t){new e.views.postRow({model:t}).render()}),this},parseQueryString:function(t){return t?_.chain(t.split("&")).map(function(t){t=t.split("=");return[t[0],decodeURIComponent(t[1])]}).object().value():{}}})}},{}],22:[function(t,e,s){"use strict";e.exports=function(t){var i;return t.views.base.extend({select2ItemTemplate:wp.template("gc-select2-item"),width:"250px",renderSelect2:function(t){t=t?t.find(".gc-select2"):this.$(".gc-select2");return i=this,t.each(function(){var t=jQuery(this),e=t.data(),t=(t.select2(i.select2Args(e)),t.data("select2"));t.$results.addClass("select2-"+e.column),t.$container.addClass("select2-"+e.column)}),this},select2Args:function(t){var e={width:i.width};return e.templateResult=function(t,e){var s=jQuery.extend(t,jQuery(t.element).data());return s.description=!1!==e&&(s.description||""),jQuery(i.select2ItemTemplate(t))}.bind(i),e.templateSelection=function(t){return e.templateResult(t,!1)},e}})}},{}],23:[function(s,t,e){"use strict";t.exports=function(t,n,e){return t.views.tableSearch=s("./../views/table-search.js")(t,n,e),t.views.tableNav=s("./../views/table-nav.js")(t,n,e),t.views.base.extend({timeoutID:null,ajax:null,tableNavView:null,searchView:null,modelView:null,timeoutTime:1e3,events:{"click .gc-field-th.sortable":"sortRowsByColumn","change .gc-field-th.gc-check-column input":"checkAll"},initialize:function(){this.setupAjax(),this.listenTo(this.collection,"render",this.render),this.listenTo(this.collection,"notAllChecked",this.allCheckedStatus),this.listenTo(this.collection,"change:checked",this.renderNav),this.listenTo(this,"render",this.render),this.tableNavView=new t.views.tableNav({collection:this.collection}),this.searchView=new t.views.tableSearch({collection:this.collection})},setupAjax:function(){},sortRowsByColumn:function(t){t.preventDefault();var e=this.collection.current(),t=n(t.currentTarget),s=t.find("a").data("id"),i=!1;t.hasClass("asc")&&(i="desc"),"asc"===(i=(i=t.hasClass("desc")?"asc":i)||e.sortDirection)?t.addClass("desc").removeClass("asc"):t.addClass("asc").removeClass("desc"),e.trigger("sortByColumn",s,i),this.sortRender()},buttonStatus:function(t){this.$(".button-primary").prop("disabled",!t)},allCheckedStatus:function(){this.$(".gc-field-th.gc-check-column input").prop("checked",this.collection.allChecked)},checkAll:function(t){this.collection.trigger("checkAll",n(t.target).is(":checked"))},doSpinner:function(){var t=this.blankRow('<span class="gc-loader spinner is-active"></span>');this.renderRows(t)},setTimeout:function(t){this.timeoutID=window.setTimeout(t,this.timeoutTime)},clearTimeout:function(){window.clearTimeout(this.timeoutID),this.timeoutID=null},getRenderedRows:function(){var t=this.collection.current().length?this.getRenderedModels(this.modelView,this.collection.current()):this.blankRow(e._text.no_items);return t},sortRender:function(){this.render()},blankRow:function(t){return'<tr><td colspan="'+this.$("thead tr > *").length+'">'+t+"</td></tr>"},renderRows:function(t){this.$("tbody").html(t||this.getRenderedRows())},renderNav:function(){this.$("#gc-tablenav").html(this.tableNavView.render().el)},render:function(){var t=this.collection.current();return this.renderRows(),this.renderNav(),this.buttonStatus(t.syncEnabled),this.allCheckedStatus(t.allChecked),this}})}},{"./../views/table-nav.js":24,"./../views/table-search.js":25}],24:[function(t,e,s){"use strict";e.exports=function(t,e,s){return t.views.base.extend({template:wp.template("gc-table-nav"),render:function(){var t=this.collection.current();return this.$el.html(this.template({count:t.length,selected:t.checked?t.checked().length:0})),this}})}},{}],25:[function(t,e,s){"use strict";e.exports=function(t){return Backbone.View.extend({el:"#gc-items-search",template:wp.template("gc-table-search"),events:{"keyup #gc-search-input":"filterCollection","search #gc-search-input":"filterCollection"},initialize:function(){this.render()},filterCollection:_.debounce(function(t){this.collection.search(t.target.value)},100),render:function(){return this.$el.html(this.template()),this}})}},{}]},{},[6]);