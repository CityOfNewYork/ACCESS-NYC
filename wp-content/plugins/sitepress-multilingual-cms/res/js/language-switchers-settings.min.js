"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var WPML_core=WPML_core||{};WPML_core.languageSwitcher=function(o,i){var n,a,t,r,s,l="wpml-ls-inline-styles-additional-css",p="wpml-ls-inline-styles-dialog",e=function(){d(),u(),f(),m(),W(),C(),x(),M(),V(),X(),R(),Z(),P(),z(),T(),D()},c=function(){var t;o("#"+l).length<1&&((t=o("<style>")).attr("id",l),t.appendTo(o("head")))},d=function(){t.on("change",".js-wpml-ls-trigger-save",function(){$(o(this))}),t.on("keyup",".js-wpml-ls-trigger-need-save",function(){var t=o(this).closest(".js-wpml-ls-option").find(".js-wpml-ls-messages");st(t,i.strings.leave_text_box_to_save,0,"notice")})},f=function(){t.on("click",".js-wpml-ls-toggle-suboptions",function(){var t=o(this),e=o(t.data("target")),s=!!t.data("show-on-value")&&""+t.val()==""+t.data("show-on-value"),t=!!t.data("show-on-checked")&&t.prop("checked");s||t?e.slideDown():e.slideUp()})},u=function(){t.on("click",".js-wpml-ls-toggle-slot",function(){var t=o(this),e=o(t.data("target"));e.slideToggle({complete:function(){e.is(":visible")?(t.addClass("open"),e.find(".js-wpml-ls-row-edit").trigger("click")):t.removeClass("open"),y()}})}).on("click",".js-wpml-ls-toggle-once",function(){var t=o(this).nextAll(".js-wpml-ls-toggle-target");return o(this).find("label").unwrap().find(".js-arrow-toggle").remove(),t.slideToggle(),!1})},m=function(){t.on("click.tooltip",".js-wpml-ls-tooltip-open",function(t){t.preventDefault(),S(o(this))})},w=function(){o("#wpml-ls-languages-order").sortable({stop:function(){$(o(this))}})},g=function(){a.dialog({dialogClass:"dialog-fixed otgs-ui-dialog wpml-ls-dialog",width:"90%",modal:!0,autoOpen:!1,draggable:!0,resizable:!1}).on("dialogopen",function(){o("body").css("overflow","hidden"),o(".js-wpml-ls-active-tooltip").pointer("close"),y(),k()}).on("dialogclose",function(){o("body").css("overflow",""),o(".js-wpml-ls-active-tooltip").pointer("close"),lt()}),o(window).resize(b)},h=function(){var t,s,l=v();l&&(t=o("#wpml-language-switcher-"+l.type),s=j(l),o("html, body").animate({scrollTop:t.offset().top},1,function(){var t,e;s?e=s.find(".js-wpml-ls-subform"):(t=o("#wpml-ls-new-"+l.type+"-template"),e=J(t),r=l.slug),A(e)}))},v=function(){var t=WPML_core.sanitize(window.location.hash).substring(1).split("/"),e=null,s=t[0]||"",t=t[1]||"";return 0<=o.inArray(s,["menus","sidebars","statics"])&&(e={type:s,slug:t},parent.location.hash=""),e},j=function(t){var e="[data-item-type="+t.type+"]",t=t.slug?"[data-item-slug="+t.slug+"]":"",t=o("tr"+e+t);return 1===t.length?t:null},b=_.debounce(function(){y(),k()},200),y=function(){var t=o(window).height()-180;a.dialog("option","maxHeight",t),a.dialog("option","position",{my:"center",at:"center",of:window})},k=function(){var t=a.find(".js-wpml-ls-preview-wrapper"),e=900<a.width();t.height()+200<a.height()||e&&t.height()<a.height()?a.on("scroll.preview",function(){a.find(".js-wpml-ls-preview-wrapper").css({position:"relative",top:a.scrollTop()})}):a.off("scroll.preview").find(".js-wpml-ls-preview-wrapper").css({position:"relative",top:0})},L=function(t){(t=t||n).find(".js-wpml-ls-colorpicker").wpColorPicker({change:function(t){t=o(t.target).parents(".js-wpml-ls-subform");Y(t)},clear:function(t){t=o(t.target).parents(".js-wpml-ls-subform");Y(t)}})},W=function(){o(".js-wpml-ls-dialog-close").on("click",function(t){t.preventDefault(),H(),a.dialog("close")}),o(".js-wpml-ls-dialog-save").on("click",function(t){t.preventDefault(),o(this).prop("disabled",!0);t=a.find(".js-wpml-ls-subform");O(t)}),o(".js-wpml-ls-open-dialog").on("click",function(t){t.preventDefault();var t=o(o(t.target).data("target")),t=t.hasClass("js-wpml-ls-template")?J(t):t.find(".js-wpml-ls-subform");A(t)})},C=function(){o(".js-wpml-ls-slot-list").on("click",".js-wpml-ls-row-edit",function(t){t.preventDefault();t=o(o(t.target).parents("tr.js-wpml-ls-row")).find(".js-wpml-ls-subform");A(t)}).on("click",".js-wpml-ls-row-remove",function(t){var e,s;t.preventDefault(),confirm(i.strings.confirmation_item_remove)&&(e=o(this).parents("tr.js-wpml-ls-row"),s=e.data("item-type"),e.find(".js-wpml-ls-subform input, .js-wpml-ls-subform select").remove(),$(e,function(){e.fadeOut(800,function(){e.remove(),I(s)})}))})},x=function(){t.on("change",".js-wpml-ls-available-slots",function(){var t=WPML_core.sanitize(o(this).val()),e=o(this).closest(".js-wpml-ls-subform"),s=e.data("item-type");o(this).removeClass("wpml-ls-required"),K(t,s)&&G(e,t)})},M=function(){t.on("change",".js-wpml-ls-colorpicker-preset",function(){var s,t=WPML_core.sanitize(o(this).val()),e=o(this).parents(".js-wpml-ls-subform");t&&(s=o(this).parents(".js-wpml-ls-panel-colors"),t=i.color_schemes[t].values,o.each(t,function(t,e){t=s.find(".js-wpml-ls-color-"+t);t.attr("value",e),t.parents(".wp-picker-container").find(".wp-color-result").css("background-color",e)}),Y(e))})},P=function(){t.on("change","select",function(){var t=WPML_core.sanitize(o(this).val());o("option",this).prop("selected",!1),o("option",this).attr("selected",!1),o('option[value="'+t+'"]',this).prop("selected",!0),o('option[value="'+t+'"]',this).attr("selected","selected")})},z=function(){var t=o("#wpml-ls-refresh-on-browser-back-button");"yes"===t.val()?location.reload(!0):t.val("yes")},T=function(){n.submit(function(t){t.preventDefault(),n.find('input[name="submit_setup_wizard"]').val(1),$(n,function(){location.href=WPML_core.sanitize(location.href).replace(/#.*/,"")})})},D=function(){o(".js-wpml-ls-preview").on("click",function(t){t.preventDefault()})},S=function(t){var e=t.data("content"),s=t.data("link-text"),l=t.data("link-url"),n=t.data("link-target");0<s.length&&(0===l.length&&(l="#"),e+='<br><br><a href="'+l+'" '+('target="'+n+'"')+">",e+=s,e+="</a>"),o(".js-wpml-ls-active-tooltip").pointer("close"),t.length&&e&&(t.addClass("js-wpml-ls-active-tooltip"),t.pointer({pointerClass:"js-wpml-ls-tooltip wpml-ls-tooltip",content:e,position:{edge:"bottom",align:"left"},show:function(t,e){e.pointer.css("marginLeft","-54px")},close:function(t,e){e.pointer.css("marginLeft","0")},buttons:function(t,e){return o('<a class="close" href="#">&nbsp;</a>').on("click.pointer",function(t){t.preventDefault(),e.element.pointer("close")})}}).pointer("open"))},A=function(t){var e,s=t.clone(!0);a.find(".js-wpml-ls-dialog-inner").empty().append(s),""===s.find(".js-wpml-ls-preview").html()&&Y(s),Q(t),N(s),(e=s).find(".js-wpml-ls-colorpicker").each(function(){var t=o(this).clone();o(this).parents(".js-wpml-ls-colorpicker-wrapper").empty().html(t)}),L(e),t=s,r&&(e='.js-wpml-ls-available-slots option[value="'+r+'"]',t.find(e).prop("selected",!0),t.find(e).attr("selected","selected"),r=null),a.dialog("option","title",s.data("title")).dialog("open")},Q=function(t){var e=t.data("item-type"),t=t.data("item-slug"),t=o("#wpml-ls-inline-styles-"+e+"-"+(t="%id%"===t?"__id__":t));s=t.detach(),lt(s.clone())},H=function(){s instanceof jQuery&&0<s.length&&o("#"+l).before(s)},O=function(t){var e,s=t.clone(!0),l=t.data("item-type");s.find(".js-wpml-ls-preview-wrapper").css("top",0),0<=o.inArray(l,["menus","sidebars"])?(e=t.find(".js-wpml-ls-available-slots").val(),K(e,l)?((void 0===s.data("origin-id")?U:B)(s),I(l)):E(t)):"statics"===s.data("item-type")&&q(s)},I=function(t){var e=o("#wpml-language-switcher-"+t),s=e.find(".js-wpml-ls-row").length,t=o.map(i[t],function(t,e){return e}).length;0===s?e.find(".js-wpml-ls-slot-list").fadeOut():e.find(".js-wpml-ls-slot-list").fadeIn(),s===t?e.find("button.js-wpml-ls-open-dialog").attr("disabled","disabled").siblings(".js-wpml-ls-tooltip-wrapper").removeClass("hidden"):e.find("button.js-wpml-ls-open-dialog").prop("disabled",!1).siblings(".js-wpml-ls-tooltip-wrapper").addClass("hidden")},q=function(t){var e=o("#"+t.data("origin-id")),s=t.data("item-slug");e.find(".js-wpml-ls-subform").replaceWith(t),nt("statics",s),$(e,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},B=function(t){var e=o("#"+t.data("origin-id")),s=t.data("item-type"),l=WPML_core.sanitize(t.find(".js-wpml-ls-available-slots").val());e.find(".js-wpml-ls-subform").replaceWith(t),e.attr("id")!=="wpml-ls-"+s+"-row-"+l&&F(e,s,l),nt(s,l),$(e,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},U=function(t){var e=t.data("item-type"),s=WPML_core.sanitize(t.find(".js-wpml-ls-available-"+e).val());G(t,s);var l=o.trim(o("#wpml-ls-new-"+e+"-row-template").html()),l=o(o.parseHTML(l));l.find(".js-wpml-ls-subform").replaceWith(t),F(l,e,s),l.hide().appendTo(n.find("#wpml-ls-slot-list-"+e+" > tbody")).show(800),nt(e,s),$(l,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},E=function(t){t.find(".js-wpml-ls-available-slots").addClass("wpml-ls-required"),a.animate({scrollTop:0},300),o(".js-wpml-ls-dialog-save").prop("disabled",!1)},F=function(t,e,s){var l="wpml-ls-"+e+"-row-"+s,n=i[e][s].name;t.attr("id",l),t.data("item-type",e),t.find(".js-wpml-ls-subform").addBack().data("item-slug",s),t.find(".js-wpml-ls-subform").data("origin-id",l),t.find(".js-wpml-ls-row-title").html(n)},G=function(t,s){var l="",n=t.data("item-type"),i=t.data("item-slug");t.find("input, select").each(function(t,e){"string"==typeof(l=o(e).attr("name"))&&o(e).attr("name",l.replace(n+"["+i+"]",n+"["+s+"]")),"string"==typeof(l=o(e).attr("id"))&&o(e).attr("id",l.replace(i,s))}),t.find("label").each(function(t,e){"string"==typeof(l=o(e).attr("for"))&&o(e).attr("for",l.replace(i,s))})},J=function(t){t=o.trim(t.html()),t=o(o.parseHTML(t));return N(t),t},K=function(t,e){var s=o.map(i[e],function(t){return"menus"===e?t.term_id.toString():t.id});return 0<=o.inArray(t,s)},N=function(t){var e,s=t.data("item-type"),l=(e=[],o("#wpml-ls-slot-list-"+s+" .js-wpml-ls-row").each(function(){e.push(o(this).data("item-slug"))}),e),n=t.data("item-slug");t.find(".js-wpml-ls-available-slots option").each(function(){var t=o(this),e=0<=o.inArray(t.val(),l),s=t.val();t.prop("disabled",e&&n!==s)})},R=function(){t.on("change",'[type!="text"].js-wpml-ls-trigger-update',function(){var t=o(this).parents(".js-wpml-ls-subform");Y(t)}).on("keyup",'[type="text"].js-wpml-ls-trigger-update',function(){var t=o(this).parents(".js-wpml-ls-subform");Y(t)}).on("keyup",".js-wpml-ls-additional-css",function(){var t="wpml-ls-inline-styles-additional-css",e=o('<style id="'+t+'" type="text/css">'+WPML_core.sanitize(o(this).val())+"</style>");o("#"+t).replaceWith(e)})},V=function(){t.on("change",".js-wpml-ls-template-selector",function(){var t=o(this).val(),s=o(this).closest(".js-wpml-ls-subform"),t=i.templates[t].force_settings;s.find(".js-wpml-ls-to-include input").prop("disabled",!1),jQuery.each(t,function(t,e){(1===e?s.find(".js-wpml-ls-setting-"+t).prop("checked",!0):s.find(".js-wpml-ls-setting-"+t).prop("checked",!1)).prop("disabled",!0)})})},X=function(){t.on("change",".js-wpml-ls-menu-is-hierarchical",function(){var t=parseInt(o(this).val()),e=o(this).closest(".js-wpml-ls-subform").find(".js-wpml-ls-setting-display_link_for_current_lang");e.prop("disabled",!1),1===t&&e.prop("checked",!0).prop("disabled",!0)})},Y=_.debounce(function(t){o(".js-wpml-ls-dialog-save").prop("disabled",!0);var e=t.find(".js-wpml-ls-preview");0<e.length&&(et(e),t=tt(t),wp.ajax.send({data:{action:"wpml-ls-update-preview",nonce:i.nonce,slot_settings:t},success:function(t){e.empty(),lt(t.styles),it(t.css),ot(t.js),st(e,t.html)},error:function(t){st(e,t,0,"error")}}))},500),Z=function(){n.on("click",".js-wpml-ls-save-settings",function(t){t.preventDefault(),$(o(this))})},$=_.debounce(function(t,e){var s=t.closest(".js-wpml-ls-option").find(".js-wpml-ls-messages"),l=tt(n);0===s.length&&(s=t.closest(".js-wpml-ls-section").find(".js-wpml-ls-messages")),s.empty(),et(s),wp.ajax.send({data:{action:"wpml-ls-save-settings",nonce:i.nonce,settings:l},success:function(t){st(s,t,2500,"updated"),"function"==typeof e&&e()},error:function(t){st(s,t,2500,"error")}})},500),tt=function(t){var e=t.find(":input:disabled").prop("disabled",!1),t=t.find("input, select, textarea").serialize();return e.attr("disabled","disabled"),t},et=function(t){o(".js-wpml-ls-messages").removeClass("success error").hide().empty(),t.siblings(".spinner").addClass("is-active")},st=function(t,e,s,l){t.siblings(".spinner").removeClass("is-active"),t.removeClass("updated notice error"),l&&t.addClass(l),t.html(e).fadeIn(),s&&t.delay(s).fadeOut(),o(".js-wpml-ls-dialog-save").prop("disabled",!1)},lt=function(t){o("#"+p).remove(),t&&((t=t instanceof jQuery?t:o(o.parseHTML(t)).first()).attr("id",p),o("#"+l).before(t))},nt=function(t,e){var s=o("#"+p).clone(),t="wpml-ls-inline-styles-"+t+"-"+e,e=o("#"+t);s.attr("id",t),e.length?e.replaceWith(s):o("#"+l).before(s)},it=function(t){var e,s;if("undefined"!==_typeof(t)&&null!==t)for(e=0;e<t.length;e++)0===(s=o('link[href="'+t[e]+'"]')).length&&((s=o("<link>")).attr("rel","stylesheet"),s.attr("type","text/css"),s.attr("media","all"),s.attr("href",t[e]),s.prependTo("head"))},ot=function(t){var e,s;if("undefined"!==_typeof(t)&&null!==t)for(e=0;e<t.length;e++)0===(s=o('script[src="'+t[e]+'"]')).length&&((s=o("<script><\/script>")).attr("type","text/javascript"),s.attr("src",t[e]),s.prependTo("head"))};return{init:function(){n=o("#wpml-ls-settings-form"),a=o("#wpml-ls-dialog"),t=n.add(a),c(),g(),L(),w(),e(),h(),o(document).trigger("wpml_ls_admin_loaded")}}}(jQuery,wpml_language_switcher_admin),jQuery(function(){WPML_core.languageSwitcher.init()});
//# sourceMappingURL=language-switchers-settings.min.js.map
