!function(e){function t(t){for(var r,s,o=t[0],u=t[1],i=t[2],p=0,f=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={20:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackWPML=window.webpackWPML||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=u;c.push([1281,0]),n()}({1231:function(e,t,n){},1281:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(38),s=n.n(c),o=n(31),u=n.n(o),i=n(1),l=n(506),p=n(352),f=(n(76),n(75),n(9)),d=n.n(f),b=n(17),m=n(199),h=n(1306),g=function(e){var t=Object(r.useState)(!1),n=d()(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),o=d()(s,2),u=o[0],l=o[1],p=function(e){return l({type:"error",msg:e})};Object(r.useEffect)((function(){u&&setTimeout((function(){return l(!1)}),2e3)}),[u]);return{result:u,inProgress:a,refresh:function(t){t.preventDefault(),c(!0),Object(b.c)({action:"update_site_key",repository_id:"wpml",nonce:e}).then(m.a("",["data","data","error"])).then((function(e){if(!h.a(e))throw e;var t;t=Object(i.a)("WPML License has been refreshed","sitepress"),l({type:"success",msg:t})})).catch(p).finally((function(){c(!1)}))}}},v=function(e){var t=e.nonce,n=g(t),r=n.inProgress,c=n.result,s=n.refresh;return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"button-secondary",href:"#",onClick:s},Object(i.a)("Refresh license data to recognise license update","sitepress")),r&&a.a.createElement(l.a,null),c&&a.a.createElement(p.a,{message:c.msg,type:c.type}))},y=n(3),O=n.n(y),E=n(7),j=n.n(E),w=n(861),x=(n(1231),n(15)),P=n.n(x);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S="CHECKING_TOTAL",D="IN_PROGRESS",A="FINISHED",R="ERROR",_="START",I="SET_TOTAL",L="ADD_CANCELLED",C="SHOW_ERROR",N="FINISH",M="RESET",F={stage:void 0,total:void 0,cancelled:void 0,message:void 0},W=function(e,t){switch(t.type){case _:return T(T({},e),{},{stage:S});case I:return T(T({},e),{},{stage:D,total:t.payload,cancelled:0});case L:return T(T({},e),{},{cancelled:e.cancelled+t.payload});case N:return T(T({},e),{},{stage:A,message:t.payload});case C:return T(T({},e),{},{stage:R,message:t.payload});case M:return F;default:return e}},B=function(e){switch(e.stage){case D:return parseInt(e.cancelled/e.total*100);case A:return 100;default:return 0}},H=function(){var e=Object(r.useReducer)(W,F),t=d()(e,2),n=t[0],a=t[1];return{state:n,reset:function(){return a({type:M})},start:function(){return a({type:_})},setTotal:function(e){return a({type:I,payload:e})},addCancelled:function(e){return a({type:L,payload:e})},finish:function(e){return a({type:N,payload:e})},showError:function(e){return a({type:C,payload:e})},canRunTheProcess:function(e){return!e.stage},isInProgress:function(e){return e.stage===S||e.stage===D},calculatePercentage:B}};var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=function(){var t=j()(O.a.mark((function t(){var n,r,a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.a)(e,{getTotal:!0});case 2:if(n=t.sent,r=n.data,a=r.success,c=r.data,!a){t.next=8;break}return t.abrupt("return",parseInt(c));case 8:throw new Error(c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var n=j()(O.a.mark((function n(){var r,a,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(b.a)(e,{batchSize:t});case 2:return r=n.sent,a=r.data,c=a.success,s=a.data,n.abrupt("return",c?parseInt(s):0);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{batchSize:t,checkTotalNumber:n,cancelBatch:r}},J=function(e){return function(){switch(e.stage){case S:return Object(i.a)("Preparing...","sitepress");case D:return"".concat(e.cancelled," / ").concat(e.total);case A:case R:return e.message;default:return""}}},G=function(e){switch(e.stage){case A:return"success";case R:return"exception";default:return"normal"}},U=function(e){var t=e.endpoint,n=H(),c=n.state,s=n.reset,o=n.start,u=n.setTotal,p=n.addCancelled,f=n.finish,d=n.showError,b=n.canRunTheProcess,m=n.calculatePercentage,h=n.isInProgress;Object(r.useEffect)((function(){c.stage!==A&&c.stage!==R||setTimeout(s,1e4)}),[c]);var g=z(t),v=function(){var e=j()(O.a.mark((function e(t){var n,r,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b(c)){e.next=3;break}return e.abrupt("return");case 3:return o(),e.prev=4,e.next=7,g.checkTotalNumber();case 7:if(n=e.sent,u(n),!(n>0)){e.next=23;break}r=Math.ceil(n/g.batchSize),a=0;case 12:if(!(a<r)){e.next=20;break}return e.next=15,g.cancelBatch();case 15:s=e.sent,p(s);case 17:a++,e.next=12;break;case 20:f(Object(i.a)("All jobs have been cancelled","sitepress")),e.next=24;break;case 23:f(Object(i.a)("There is no more jobs to cancel","sitepress"));case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(4),d(Object(i.a)("The jobs cancellation has failed","sitepress"));case 29:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"button-secondary",href:"#",onClick:v},Object(i.a)("Cancel in-progress automatic jobs","sitepress")),h(c)&&a.a.createElement(l.a,null),c.stage&&a.a.createElement(w.a,{percent:m(c),status:G(c),format:J(c)}))};var K=function(e){return{updateDomain:function(){var t=j()(O.a.mark((function t(){var n,r,a,c,s,o=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},t.next=3,Object(b.a)(e,n);case 3:if(r=t.sent,a=r.data,c=a.success,s=a.data,!c){t.next=9;break}return t.abrupt("return",s);case 9:throw new Error(s);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},Y=function(e){var t=e.endpoint,n=Object(r.useState)(!1),c=d()(n,2),s=c[0],o=c[1],u=Object(r.useState)(null),f=d()(u,2),b=f[0],m=f[1],h=function(e){return m({type:"error",msg:e})};Object(r.useEffect)((function(){b&&setTimeout((function(){return m(null)}),4e3)}),[b]);var g=K(t),v=function(){var e=j()(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,o(!0),e.next=5,g.updateDomain();case 5:e.sent,n=Object(i.a)("Domain name has been updated","sitepress"),m({type:"success",msg:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),h(Object(i.a)("Domain name update has been failed","sitepress"));case 12:return e.prev=12,o(!1),e.finish(12);case 15:case"end":return e.stop()}var n}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"button-secondary",href:"#",onClick:v},Object(i.a)("Update domain name in language switcher settings","sitepress")),s&&a.a.createElement(l.a,null),b&&a.a.createElement(p.a,{message:b.msg,type:b.type}))},q=n(115),Q=n.n(q),V=function(){var e=Object(r.useState)(!1),t=d()(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=d()(c,2),o=s[0],u=s[1],i=Object(r.useState)(!1),l=d()(i,2),p=l[0],f=l[1];return{inProgress:n,error:o,done:p,callAction:function(){var e=j()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),u(!1),e.prev=2,e.next=5,Object(b.a)(troubleshooting.endpoints.enableSecondaryDomain,{});case 5:if((t=e.sent).data.success){e.next=8;break}throw new Error(t.data.data);case 8:f(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0);case 14:a(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()}},X=n(173),Z=n.n(X),$=function(){var e=V(),t=e.inProgress,n=e.error,r=e.done,c=e.callAction,s="button-secondary";return(t||r)&&(s+=" button-primary-disabled"),a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:s,href:"#",onClick:function(e){return e.preventDefault(),c()}},t?Object(i.a)("Enabling WPML's Advanced Translation Editor...","sitepress"):Object(i.a)("Force-enable WPML's Advanced Translation Editor","sitepress")),t&&a.a.createElement(Q.a,null),a.a.createElement("br",null),a.a.createElement("small",null,!t&&!r&&!n&&Object(i.a)("If you're running this website from two or more domains on the same installation, this action will allow both to use the Advanced Translation Editor. Don't use this if you've moved or copied the site to a different domain on a different server.","sitepress")),n&&a.a.createElement(Z.a,{message:Object(i.a)("An error occurred while enabling WPML on both domains. Please try again.","sitepress"),type:"error"}),r&&a.a.createElement(Z.a,{message:Object(i.a)("You can now use the Advanced Translation Editor from this site, as well as the other site(s) running from a different domain on the same installation.","sitepress"),type:"success"}))},ee=function(e){var t=e.children,n=e.id,r=void 0===n?void 0:n;return a.a.createElement("div",u()({style:{marginTop:"5px",marginBottom:"5px"}},r&&{id:r}),t)},te=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ee,null,a.a.createElement(v,{nonce:troubleshooting.refreshLicense.nonce})),a.a.createElement(ee,null,a.a.createElement(U,{key:"cancel-jobs",endpoint:troubleshooting.endpoints.cancelJobs})),a.a.createElement(ee,null,a.a.createElement(Y,{endpoint:troubleshooting.endpoints.lsTemplatesUpdateDomain})),troubleshooting.isATELocked&&a.a.createElement(ee,{id:"wpml-troubleshooting-ate-enable-secondary-domain"},a.a.createElement($,null)))};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("wpml-troubleshooting-container");e&&s.a.render(a.a.createElement(te,null),e)}))},75:function(e,t,n){},76:function(e,t,n){}});