!function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={2:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackWPML=window.webpackWPML||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([1273,0]),n()}({113:function(t,e,n){},12:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"r",(function(){return b})),n.d(e,"q",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"n",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"f",(function(){return j})),n.d(e,"e",(function(){return w})),n.d(e,"l",(function(){return O})),n.d(e,"k",(function(){return E})),n.d(e,"o",(function(){return k})),n.d(e,"m",(function(){return C})),n.d(e,"j",(function(){return _})),n.d(e,"i",(function(){return S})),n.d(e,"p",(function(){return x})),n.d(e,"g",(function(){return T}));var a=n(49),r=n(453),o=n(454),s=n(40),i=n(129),c=n(54),u=n(161),l=n(367),d=n(199),f={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},p={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},b=Object(a.a)("type","post"),m=Object(a.a)("type","package"),h=Object(r.a)([Object(a.a)("review_status","NEEDS_REVIEW"),Object(a.a)("review_status","EDITING")]),g=function(t){return!!v(t)&&(t.status===f.WAITING_FOR_TRANSLATOR||t.status===f.IN_PROGRESS)},v=function(t){return"local"===t.translation_service_id},y=function(t){return!v(t)&&(t.status===f.IN_PROGRESS||t.status===f.COMPLETED)&&t.batch.tp_id&&!t.isBatchSynced},j=function(t){return!v(t)&&(Object(s.a)("status",t)===f.TRANSLATION_READY_TO_DOWNLOAD||Object(s.a)("status",t)===f.COMPLETED)},w=function(t){return!v(t)&&Object(i.a)(Object(s.a)("status",t),[f.TRANSLATION_READY_TO_DOWNLOAD,f.COMPLETED])},O=Object(c.a)(Object(s.a)("status"),Object(i.a)(u.a,[f.WAITING_FOR_TRANSLATOR,f.IN_PROGRESS])),E=function(t){return e=t.automatic,Object(o.a)(String,e)?"0"!==e&&"false"!==e:!!e;var e},k=Object(l.a)(E),C=function(t,e){return t.id===e.id&&t.type===e.type},_=function(t,e){return void 0!==t.find((function(t){return t.status===e}))},S=function(t){return Object(d.a)(0,["extra_data","icl_translate_job_id"],t)},x=function(t){return!(!t.deadline||!O(t))&&new Date>new Date(t.deadline)},T=function(t,e){return t&&t.id===parseInt(e.translation_service_id)}},123:function(t,e,n){},1241:function(t,e,n){},1242:function(t,e,n){},1245:function(t,e,n){},1246:function(t,e,n){},1247:function(t,e,n){},1248:function(t,e,n){},1249:function(t,e,n){},1273:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"getCounts",(function(){return Wt}));var r={};n.r(r),n.d(r,"get",(function(){return qt}));var o=n(3),s=n.n(o),i=n(7),c=n.n(i),u=n(27),l=n.n(u),d=n(199),f=n(452),p=n(54),b=n(351),m=n(49),h=n(73),g=n(407),v=n(873),y=n(149),j=n(872),w=n(875),O=n(40),E=n(1),k=n(119),C=n(17),_=n(154),S=function(){return d.a("",["urls","currentUrl"],ate_jobs_sync||{})},x=["otgs-ico-add","otgs-ico-refresh"].map(f.a("i.")).join(", "),T=function(t){t.classList.forEach((function(e){e.startsWith("otgs-ico-")&&t.classList.replace(e,"otgs-ico-refresh-spin")})),Object(_.b)(t,Object(E.a)("Sending for translation","sitepress"))},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(t=t||document).querySelectorAll('.js-wpml-translate-link[data-auto-translate="1"]')},P=function(t,e){var n=p.a(b.a(m.a("type","childList")),h.a((function(t){return l()(t.addedNodes)})),g.a(),v.a((function(t){return"icl_translate_options"===t.id})))(t);L(A(n)),e.disconnect()},I=function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i,c,u,l,d,f,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:5e3,a=e.currentTarget,r=a.dataset.trid,o=a.dataset.language,i=a.querySelector(x),e.preventDefault(),a.removeEventListener("click",I),T(i),c=y.a(["endpoints","auto-translate"],ate_jobs_sync),t.next=11,Object(C.a)(c,{trid:r,language:o,currentUrl:S()});case 11:if(u=t.sent,l=u.data,d=l.success,f=l.data,!d||!f){t.next=25;break}if(f=j.a({jobId:w.a(parseInt),automatic:w.a(parseInt)},f),a.dataset.tmJobId=f.jobId,a.dataset.shouldAteSync=1,!m.a("automatic",1,f)){t.next=24;break}return t.next=22,Object(k.a)((function(){return N()}),n);case 22:t.next=25;break;case 24:window.location.href=O.a("editUrl",f);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.wpmlAteStatusBarStore.getActions().synchronizeJobs());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=c()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("publish"===e.postStatus&&!e.triggeredByDuplication){t.next=2;break}return t.abrupt("return");case 2:if((n=l()(A())).map((function(t){return t.querySelector("i")})).forEach(T),!n.length){t.next=6;break}return t.abrupt("return",N());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||A();e.forEach((function(t){t.querySelector(x)&&t.addEventListener("click",I)}))},J=function(){if(!A().length){var t=document.getElementById("icl_div");if(t)new MutationObserver(P).observe(t,{childList:!0,subtree:!0})}ate_jobs_sync.isAutomaticTranslations&&(L(),document.addEventListener("WPMLLanguagesMetaBoxesRefreshed",(function(t){return D(t.detail)})))},R=n(0),B=n.n(R),M=n(38),W=n.n(M),F=n(65),U=n(2),q=n(71),G=Object(q.a)(),H=(n(1241),n(358)),V=function(t){return{label:Object(E.a)("Fix it","sitepress"),onClick:t}},K=n(1311),z=Object(E.a)("Automatic translation status","sitepress"),Y=Object(E.a)("No translations in the queue","sitepress"),Z=Object(E.a)("Translate Everything Automatically","sitepress"),X=Object(E.a)("Translate Everything Automatically is active","sitepress"),Q=(Object(E.a)("Translate Everything Automatically is paused","sitepress"),Object(E.a)("Translate Everything Automatically is stopped","sitepress")),$=Object(E.a)("Out of Credits for Automatic Translation","sitepress"),tt=Object(E.a)("Preparing content for translation","sitepress"),et=Object(E.a)("Preparing more content for translation","sitepress"),nt=Object(E.a)("An error occured, fix it to continue.","sitepress"),at=Object(E.a)("There is an issue with automatic translation that needs your attention. Fix it to continue.","sitepress"),rt=function(){var t=Object(U.h)((function(t){return t.isAutomaticTranslations})),e=Object(U.h)((function(t){return t.notEnoughCredit})),n=Object(U.h)((function(t){return t.accountBalances})),a=Object(U.g)((function(t){return t.afterIssueSolving})),r=Object(U.g)((function(t){return t.notificationCenter})),o=r.updateNotification,s=r.removeNotification;return Object(R.useEffect)((function(){var r,i,c=function(){s("no-credits-admin-bar"),s("no-credits")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),Object(H.b)({onIssueSolved:function(){c(),a()},onAteWidgetDisappears:function(){return n(!1)}})};e?(t?o({id:"no-credits-admin-bar",notification:{title:Q,important:!0,highlight:!0,isError:!0,error:nt,actions:[V(u)]}}):n&&n.account_balance>0?o({id:"no-credits-admin-bar",notification:{title:$,important:!0,highlight:!0,isError:!0,error:(i=n.account_balance,Object(K.a)(Object(E.c)(Object(E.b)("You have <b>1</b> prepaid translation credit in your wpml.org account. Assign these credits to your site to start using automatic translation","You have <b>%s</b> prepaid translation credits in your wpml.org account. Assign these credits to your site to start using automatic translation",i,"sitepress"),i),{b:B.a.createElement("b",null)})),actions:[(r=u,{label:Object(E.a)("Assign credits now","sitepress"),onClick:r})]}}):o({id:"no-credits-admin-bar",notification:{title:$,important:!0,highlight:!0,isError:!0,error:nt,actions:[V(u)]}}),o({id:"no-credits",notification:{title:at,highlight:!0,isError:!0,showOnStatusBar:!1,showOnDashboard:!t,showOnPauseControl:t,actions:[{applyToCompleteNotification:!0,onClick:u}]}})):c()}),[e,n]),null},ot=function(){var t,e,n=Object(U.h)((function(t){return t.needsReviewCount})),a=Object(U.g)((function(t){return t.notificationCenter})),r=a.updateNotification,o=a.removeNotification,s=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.translationQueue,i="string"==typeof s&&s.length;return Object(R.useEffect)((function(){var t;n&&n>0?r({id:"jobs-to-review",notification:{title:(t=n,Object(E.c)(Object(E.b)("%d translation waiting for review","%d translations waiting for review",t,"sitepress"),t)),order:20,showOnDashboard:!0,actions:i?[{applyToCompleteNotification:!0,onClick:function(){return window.location.assign(s)}}]:[]}}):o("jobs-to-review")}),[n]),null},st=n(9),it=n.n(st),ct=n(408),ut=function(){var t,e,n=Object(U.h)((function(t){return t.isAutomaticTranslations})),a=Object(U.h)((function(t){return t.languages.primary})),r=Object(U.h)((function(t){return t.languages.isPrimaryEligibleForAutomaticTranslation})),o=Object(U.h)((function(t){return t.languages.secondariesNotEligibleForAutomaticTranslation})),s=Object(U.g)((function(t){return t.notificationCenter})),i=s.updateNotification,c=s.removeNotification,u=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.editLanguages,l="string"==typeof u&&u.length,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unsupported-languages";return i({id:n,notification:{title:t,important:!0,highlight:!0,isError:!0,showOnDashboard:!e,showOnPauseControl:e,actions:l?[{applyToCompleteNotification:!0,onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),window.location.assign(u)}}]:[]}})};return Object(R.useEffect)((function(){if(r){var t,e;if(o.length>0){var s=ct.a(m.a("mapping",a.code),o),i=it()(s,2),u=i[0],l=i[1];return u.length>0&&d((e=u.map((function(t){return t.english_name})),Object(E.c)(Object(E.a)("Content in those languages: %s, cannot be automatically translated unless you map them to a language that's different from the default.","sitepress"),e.join(", "))),!1,"mapping-the-same-as-default"),void(l.length>0&&d(function(t){return Object(E.c)(Object(E.b)("Your language, %s, must be mapped to a supported language in order to use automatic translation.","The following languages on your site must be mapped to a supported language in order to use automatic translation: %s",t.length,"sitepress"),t.join(", "))}(l.map((function(t){return t.english_name})))))}c("unsupported-languages"),c("mapping-the-same-as-default")}else d((t=a.english_name,Object(E.c)(Object(E.a)("Your default language, %s, must be mapped to a supported language in order to use automatic translation.","sitepress"),t)),n)}),[r,o]),null},lt=function(){var t=Object(U.h)((function(t){return t.notEnoughCredit})),e=Object(U.h)((function(t){return t.needsReviewCount})),n=e&&e>0,a=function(){return t?B.a.createElement(rt,null):B.a.createElement(ut,null)};return B.a.createElement(B.a.Fragment,null,!!n&&B.a.createElement(ot,null),B.a.createElement(a,null))},dt=n(31),ft=n.n(dt),pt=function(t){var e=t.title,n=t.highlight,a=void 0!==n&&n,r=t.dotIcon,o=void 0!==r&&r,s=t.info,i=void 0===s?null:s,c=t.infoIsLoading,u=void 0!==c&&c,l=t.actions,d=void 0===l?[]:l,f=Object(U.g)((function(t){return t.notificationCenter})),p=f.updateNotification,b=f.removeNotification,m=Object(U.h)((function(t){return t.automaticJobsInProgress})),h=Object(U.h)((function(t){return t.automaticJobsInProgressTotal})),g=Object(U.h)((function(t){return t.automaticJobsStatus})),v=Object(U.h)((function(t){return t.shouldTranslateEverything}));return Object(R.useEffect)((function(){if("problem"!==g){var t;if(!v&&h>0&&m){var n=h-m,r=Math.round(m/100);t={itemsCompleted:n,itemsTotal:h,percentage:n>0?100/h*n:0,minutesToComplete:r}}p({id:"automatic-translation",notification:{title:e,highlight:a,dotIcon:o,info:i,infoIsLoading:u,task:{isActive:!0,progress:t},actions:d}})}else b("automatic-translation")}),[g,m,h]),null},bt=function(){var t=Object(U.h)((function(t){return t.automaticJobsInProgressTotal})),e=Object(U.h)((function(t){return t.automaticJobsInProgress})),n=Object(U.h)((function(t){return t.shouldTranslateEverything})),a=null,r=!1;n&&(a=t>0?et:tt,r=!0);var o=e&&!n?Z:X;return B.a.createElement(pt,ft()({highlight:!0},{title:o,info:a,infoIsLoading:r}))},mt=function(){var t=Object(U.h)((function(t){return t.isAutomaticTranslations})),e=Object(U.h)((function(t){return t.languages.readyForAutomaticTranslation})),n=function(){return t&&e?B.a.createElement(bt,null):null};return B.a.createElement(B.a.Fragment,null,B.a.createElement(n,null))},ht=function(){var t=Object(U.h)((function(t){return t.automaticJobsInProgress})),e=z,n=t?null:Y;return B.a.createElement(pt,ft()({dotIcon:!0},{title:e,info:n}))},gt=function(){return Object(U.h)((function(t){return t.isAutomaticTranslations}))?null:B.a.createElement(ht,null)},vt=n(8),yt=n.n(vt),jt=(n(1242),function(t){var e,n,a=t.context,r=t.notification,o=r.title,s=r.important,i=r.actions,c=r.highlight,u=r.dotIcon,l=r.isError,d=r.error,f=r.info,p=r.infoIsLoading,b=r.task,m=(b=void 0===b?{}:b).isActive,h=b.progress,g=(h=void 0===h?{}:h).percentage,v=h.itemsCompleted,y=h.itemsTotal,j=h.minutesToComplete,w=Object(R.useState)(!1),O=it()(w,2),k=O[0],C=O[1];if(Object(R.useEffect)((function(){if(o&&s){var t=document.getElementById("wpml-status-bar-icon");t&&!t.classList.contains("wpml-status-bar-icon--shaking")&&(t.classList.add("wpml-status-bar-icon--shaking"),document.getElementById("wp-admin-bar-ate-status-bar").addEventListener("mouseover",(function(){return t.classList.remove("wpml-status-bar-icon--shaking")})))}}),[o,s]),!o)return null;var _=function(t,e,n,a,r,o){return t&&e?e:n?a?B.a.createElement("span",{className:"wpml-notification-description-subtitle--loading"},n):n:(null!==r&&r>=0&&r<=100&&(s="".concat(r,"%")),o>=0&&(o=o>0?Object(E.c)(Object(E.a)("%d min remaining","sitepress"),o):Object(E.a)("less than 1 min remaining","sitepress"),s=s?"".concat(s,", ").concat(o):o),s);var s}(l,d,f,p,g=g||"0"==g?parseInt(g):void 0,j),S=yt()("wpml-notification-container",{"wpml-notification-container--status-bar":"status-bar"===a,"wpml-notification-container--dashboard":"dashboard"===a,"wpml-notification-container--with-subtitle":_,"wpml-notification-container--highlight":c,"wpml-notification-container--error":l,"wpml-notification-container--active":!0===m,"wpml-notification-container--inactive":!1===m});if(k)e=B.a.createElement("i",{className:"otgs-ico otgs-ico-spinner"});else if(u)e=B.a.createElement("i",{className:"wpml-notification-status-icon-dot"});else switch(m){case!0:e=B.a.createElement("i",{className:"otgs-ico otgs-ico-play"});break;case!1:e=B.a.createElement("i",{className:"otgs-ico otgs-ico-pause"});break;default:e=B.a.createElement("i",{className:"otgs-ico otgs-ico-bell"})}null!==v&&null!==y&&v>=0&&y>=v&&(n="".concat(v," / ").concat(y));var x=null!==g&&g>=0&&g<=100,T=Array.isArray(i)?i.find((function(t){return t.applyToCompleteNotification})):null,A=T?{className:"wpml-notification wpml-notification--clickable",onClick:function(){return T.onClick({setLoading:C})}}:{className:"wpml-notification"},P=T&&"dashboard"===a;return B.a.createElement("div",{className:S},k&&B.a.createElement("div",{className:"wpml-notification-loading"}),B.a.createElement("div",A,B.a.createElement("div",{className:"wpml-notification-status"},e),B.a.createElement("div",{className:"wpml-notification-description"},B.a.createElement("div",{className:"wpml-notification-description-title"},o,n&&B.a.createElement("span",{className:"wpml-notification-description-title-items"},"Â  ",B.a.createElement("span",null,n))),_&&B.a.createElement("div",{className:"wpml-notification-description-subtitle"},_)),i&&B.a.createElement("div",{className:"wpml-notification-actions"},P&&B.a.createElement("span",{className:"wpml-notification-actions-arrow-link"},B.a.createElement("svg",{width:"13",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},B.a.createElement("path",{d:"M.253 3.87a.834.834 0 01.595-.258h8.255L7.048 1.505a.875.875 0 01-.253-.622.897.897 0 01.253-.622A.844.844 0 017.651 0a.822.822 0 01.602.26l3.5 3.615c.16.168.25.395.25.63 0 .236-.09.462-.25.63l-3.5 3.615a.846.846 0 01-1.39-.286.903.903 0 01.185-.959l2.055-2.132H.848a.831.831 0 01-.473-.15.873.873 0 01-.312-.396.905.905 0 01.19-.957z"}))),i.map((function(t){var e=t.label,n=t.onClick,a=t.icon;return"string"!=typeof e||"function"!=typeof n?null:B.a.createElement("button",{key:e,type:"button",className:"ant-btn wpml-antd-button",onClick:function(){return n({setLoading:C})}},B.a.createElement("span",null,e),a&&B.a.createElement("i",{className:"otgs-ico otgs-ico-".concat(a)}))})))),x&&B.a.createElement("div",{className:"wpml-notification-progress-bar"},B.a.createElement("div",{className:"wpml-notification-progress-bar-progress",style:{width:"".concat(g,"%")}})))}),wt=function(t){var e=t.context,n=void 0===e?"status-bar":e,a=Object(U.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsStatusBar)||[]})),r=Object(U.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsDashboard)||[]})),o="status-bar"===n?a:r;return B.a.createElement(B.a.Fragment,null,Object.keys(o).map((function(t){return B.a.createElement(jt,{key:t,notification:o[t],context:n})})))},Ot=function(){var t=Object(U.g)((function(t){return t.backgroundTasks})).startRunner;return Object(R.useEffect)((function(){t()}),[]),B.a.createElement("div",{className:"wpml-status-bar",style:{width:"100%"}},B.a.createElement(wt,{context:"status-bar"}),B.a.createElement(mt,null),B.a.createElement(gt,null),B.a.createElement(lt,null))},Et=function(){return B.a.createElement("span",{className:"wpml-status-bar-in-progress"},B.a.createElement("i",{className:"otgs-ico otgs-ico-in-progress"}))},kt=function(){var t=Object(R.useState)(!1),e=it()(t,2),n=e[0],a=e[1],r=Object(U.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.inProgress)||!1}));return Object(R.useEffect)((function(){var t=function(t){a(t.detail.status||!1)};return document.addEventListener("statusBarNotification",t),function(){document.removeEventListener("statusBarNotification",t)}}),[a]),B.a.createElement(B.a.Fragment,null,(r||n)&&B.a.createElement(Et,null))},Ct=n(15),_t=n.n(Ct),St=n(1299),xt=n(178),Tt=n(1306),At=n(441),Pt=n(57),It=n(36),Nt=(n(1243),n(436)),Dt=n(67),Lt=n(431),Jt=n(844),Rt=n(871),Bt=function(t,e){return!Jt.a(F.a([],t,e))},Mt=function(t){return c()(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={};case 1:return e.next=3,t.retry(Rt.a(["jobsToProcess"],n));case 3:n=e.sent,Bt("processed",n);case 5:if(Bt("jobsToProcess",n)){e.next=1;break}case 6:case"end":return e.stop()}}),e)})))},Wt=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i,c,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(e=window)||void 0===e||null===(n=e.ate_jobs_sync)||void 0===n||null===(a=n.endpoints)||void 0===a?void 0:a.untranslatedCount){t.next=3;break}throw new Error("ate_jobs_sync does not contain endpoint untranslatedCount");case 3:return t.next=5,Object(C.a)(r,{});case 5:if(o=t.sent,i=o.data,c=i.success,u=i.data,c){t.next=11;break}throw Error(u);case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ft=function(){var t,e,n,a=null===(t=window)||void 0===t||null===(e=t.ate_jobs_sync)||void 0===e||null===(n=e.endpoints)||void 0===n?void 0:n.languages;if(!a)throw Error("ate_jobs_sync does not contain endpoint languages");return Object(C.a)(a,{})},Ut={},qt=function(){var t=c()(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("languages"in Ut)){t.next=2;break}return t.abrupt("return",Ut.languages);case 2:return t.next=4,Ft();case 4:if(e=t.sent,n=e.data,a=n.success,r=n.data,a){t.next=10;break}throw Error(r);case 10:if(0!==r.length){t.next=12;break}return t.abrupt("return",[]);case 12:return Ut.languages=r,t.abrupt("return",Ut.languages);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Gt=n(61),Ht=n.n(Gt),Vt={untranslatedCounts:{},setUntranslatedCounts:Object(U.b)((function(t,e){t.untranslatedCounts=e&&"object"===Ht()(e)?Object.fromEntries(Object.entries(e).filter((function(t){var e=it()(t,2);e[0];return(+e[1]||0)>0}))):{}})),untranslatedElementsCount:Object(U.c)((function(t){return Object.keys(t.untranslatedCounts).length})),fetchUntranslatedContentCounts:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.untranslatedContentService,t.next=4,o.getCounts();case 4:i=t.sent,e.setUntranslatedCounts(i);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},Kt=n(398),zt=function(t){return{all:t,setAll:Object(U.b)((function(t,e){t.all=e})),primary:Object(U.c)((function(t){return Object(v.a)(Object(O.a)("is_default"),(null==t?void 0:t.all)||[])})),isPrimaryEligibleForAutomaticTranslation:Object(U.c)((function(t){return t.primary&&t.primary.can_be_translated_automatically})),secondaries:Object(U.c)((function(t){return Object(Kt.a)(Object(O.a)("is_default"),t.all)})),secondariesNotEligibleForAutomaticTranslation:Object(U.c)((function(t){return Object(Kt.a)(Object(O.a)("can_be_translated_automatically"),t.secondaries)})),readyForAutomaticTranslation:Object(U.c)((function(t){return t.isPrimaryEligibleForAutomaticTranslation&&t.secondaries.length>t.secondariesNotEligibleForAutomaticTranslation.length})),fetchLanguages:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.languagesService,t.prev=2,t.next=5,o.get();case 5:i=t.sent,e.setAll(i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,a){return t.apply(this,arguments)}}())}};function Yt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach((function(e){_t()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $t={notifications:{},notificationsStatusBar:Object(U.c)((function(t){return Object(b.a)((function(t){var e=t.showOnStatusBar;return void 0===e||e}),t.notifications)})),notificationsDashboard:Object(U.c)((function(t){return Object(b.a)(Object(O.a)("showOnDashboard"),t.notifications)})),notificationsPauseControl:Object(U.c)((function(t){return Object(b.a)(Object(O.a)("showOnPauseControl"),t.notifications)})),inProgress:Object(U.c)((function(t){return Object.values(t.notifications).some((function(t){return t.inProgress}))})),removeNotification:Object(U.b)((function(t,e){delete t.notifications[e]})),updateNotification:Object(U.b)((function(t,e){var n=e.id,a=e.notification,r=Qt(Qt({},t.notifications[n]||{}),a);r.inProgress=!1,r.task&&r.task.isActive&&r.task.progress&&(0===r.task.progress.percentage||r.task.progress.percentage&&r.task.progress.percentage>-1&&r.task.progress.percentage<100||(r.task.progress.itemsCompleted>0||0===r.task.progress.itemsCompleted)&&r.task.progress.itemsTotal>0&&r.task.progress.itemsCompleted<r.task.progress.itemsTotal||0===r.task.progress.minutesToComplete||r.task.progress.minutesToComplete>0)&&(r.inProgress=!0);var o=Qt(Qt({},t.notifications),{},_t()({},n,r));if(t.notifications[n]&&t.notifications[n].highlight===r.highlight&&t.notifications[n].task===r.task&&t.notifications[n].order===r.order)JSON.stringify(t.notifications)!==JSON.stringify(o)&&(t.notifications=o);else{var s,i={},c=Yt(Object.keys(o).sort((function(t,e){var n=o[t].order?o[t].order:10,a=o[e].order?o[e].order:10,r=o[t].highlight?1:0,s=o[e].highlight?1:0,i=o[t].task?1:0,c=o[e].task?1:0;return n-a||s-r||c-i})));try{for(c.s();!(s=c.n()).done;){var u=s.value;i[u]=o[u]}}catch(t){c.e(t)}finally{c.f()}t.notifications=i}}))};function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach((function(e){_t()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ne={endpoints:{},tasks:{},updateTask:Object(U.b)((function(t,e){e.endpointClass;var n=e.taskData,a=t.tasks;t.tasks=a.map((function(t){return t.taskId===n.taskId?ee(ee({},t),n):t}))})),startRunner:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,c,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.getState,o=r(),i=o.endpoints,c=o.tasks,t.next=4,e.updateNotifications({});case 4:for(u in c)l=c[u],d=Object(v.a)(Object(m.a)("endpoint",l.taskType),i),l.hasLock&&!l.isPaused&&e.runTask({endpointObject:d,task:l});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),runTask:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpointObject,r=n.task,t.next=3,Object(C.a)(a,r);case 3:if(o=t.sent,i=o.data,c=i.success,u=i.data,l=void 0!==u&&!0===u.isCompleted,c&&(e.updateTask({endpointClass:a.endpoint,taskData:u}),e.updateNotifications({})),!c||!u||l||u.isPaused){t.next=10;break}return t.next=10,e.runTask({endpointObject:a,task:u});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),updateNotifications:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.getState,o=a.getStoreActions,i=r(),c=i.tasks,Object.keys(c).forEach((function(t){var e=c[t],n=e.description,a=e.progressDone,r=e.progressTotal,s=e.isPaused;e.isDisplayed&&o().notificationCenter.updateNotification({id:e.taskId,notification:{title:n||"Background task in progress...",actions:[],task:{isActive:!s,progress:{itemsCompleted:a,itemsTotal:r,percentage:r>0?parseInt(100*a/r):null}}}})}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},ae=n(14),re=n.n(ae),oe=n(16),se=n.n(oe),ie=n(94),ce=n.n(ie),ue=n(527),le=n.n(ue),de=n(12),fe=n(69);var pe=function(t){return t.preventDefault(),!1};function be(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),Object(_.a)(t,"otgs")}var me=new WeakMap,he=new WeakMap,ge=new WeakMap,ve=function(){function t(e){re()(this,t),me.set(this,{writable:!0,value:void 0}),he.set(this,{writable:!0,value:void 0}),ge.set(this,{writable:!0,value:void 0}),_t()(this,"jobId",void 0),_t()(this,"status",void 0),le()(this,me,e),this.jobId=parseInt(e.dataset.tmJobId),le()(this,he,e.querySelector("i")),le()(this,ge,ce()(this,he).dataset.originalTitle),this.status=de.b.IN_PROGRESS}return se()(t,[{key:"turnIntoSpinning",value:function(){ce()(this,he).classList.replace("otgs-ico-in-progress","otgs-ico-refresh-spin"),be(ce()(this,he),Object(E.a)("Refreshing translation status","sitepress")),ce()(this,me).addEventListener("click",pe,!0)}},{key:"revertToInProgress",value:function(){ce()(this,he).classList.replace("otgs-ico-refresh-spin","otgs-ico-in-progress"),be(ce()(this,he),ce()(this,ge)),ce()(this,me).removeEventListener("click",pe,!0)}},{key:"turnIntoCompleted",value:function(t){ce()(this,he).classList.replace("otgs-ico-refresh-spin",function(t){return t.status===de.b.COMPLETED?Object(de.h)(t)?"otgs-ico-needs-review":"otgs-ico-edit":"otgs-ico-in-progress"}(t)),be(ce()(this,he),t.label),ce()(this,me).dataset.shouldAteSync="0",ce()(this,me).href=t.viewLink,ce()(this,me).removeEventListener("click",pe,!0),Object(Pt.a)("job-link-updated",t),this.status=de.b.COMPLETED}},{key:"turnIntoInsufficientBalance",value:function(t,e){var n=this;ce()(this,he).style.color=t?"#333":"#c1c1c1",ce()(this,he).style.cursor=t?"pointer":"default",ce()(this,he).classList.replace("otgs-ico-refresh-spin","otgs-ico-warning");var a=function(){var t=e.replace("CREDITS_ACTION","document.dispatchEvent(new Event('WPMLTooltipCreditsFixClicked'));"),a=ce()(n,me).dataset.tmEditorLink;return a?t.replace("TRANSLATE_LINK",a):t}();be(ce()(this,he),a),this.status=de.a.NO_CREDIT}}]),t}();var ye=fe.a(2,(function(t,e){return t.find((function(t){return t.jobId===e.jobId}))})),je=function(){function t(e,n,a){re()(this,t),this.getJobsInfo=e,this.isTranslationManager=n,this.notEnoughCreditPopup=a}var e;return se()(t,[{key:"startSyncing",value:function(t){this.jobs=t,this.jobs.forEach((function(t){return t.turnIntoSpinning()}))}},{key:"markAsInsufficientBalanced",value:function(t){var e=this;t.map(ye(this.jobs)).filter((function(t){return t})).forEach((function(t){return t.turnIntoInsufficientBalance(e.isTranslationManager,e.notEnoughCreditPopup)}))}},{key:"finishSyncIteration",value:(e=c()(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=this.jobs.filter((function(t){return t.status===de.b.IN_PROGRESS}))).length>0)){t.next=12;break}return t.prev=2,t.next=5,this.getJobsInfo(e.map((function(t){return t.jobId})));case 5:n=t.sent,e.forEach((function(t){var e=n.find((function(e){return e.jobId===t.jobId}));e&&e.status===de.b.COMPLETED&&t.turnIntoCompleted(e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return e.apply(this,arguments)})},{key:"revertRemainingJobsToInProgress",value:function(){this.jobs.forEach((function(t){t.status===de.b.IN_PROGRESS&&t.revertToInProgress()}))}}]),t}();function we(){var t,e,n,a,r,o,i,u;return new je((i=null===(t=ate_jobs_sync)||void 0===t||null===(e=t.endpoints)||void 0===e?void 0:e.getJobsInfo,u=null===(n=ate_jobs_sync)||void 0===n||null===(a=n.urls)||void 0===a?void 0:a.currentUrl,function(){var t=c()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(i,{jobIds:e,returnUrl:u});case 2:if((n=t.sent).data.success){t.next=5;break}throw n.data.data;case 5:return t.abrupt("return",n.data.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),null===(r=ate_jobs_sync)||void 0===r?void 0:r.isTranslationManager,null===(o=ate_jobs_sync)||void 0===o?void 0:o.notEnoughCreditPopup)}var Oe=n(394);function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){_t()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ce=function(t){var e=t.anyJobsExist,n=t.jobsToSyncCount,o=t.automaticJobsInProgressTotal,i=t.needsReviewCount,u=t.languages,f=t.endpoints,p=t.ateAPI,b=t.isAutomaticTranslations,m=t.shouldTranslateEverything,h=t.isAteActive,g=t.ateConsole,v=t.backgroundTasksData,y=t.repeatTimeouts,j=void 0===y?{sync:5e3,syncDelayed:1e4,syncIsLockedDelay:3e4,translateEverythingInUse:12e4,translateEverythingWaiting:3e4,translateEverythingWaitingForMediaSetup:2e3}:y,w={anyJobsExist:!!e,isAutomaticTranslations:!!b,jobsToSyncCount:parseInt(n),automaticJobsInProgressTotal:parseInt(o),automaticJobsInProgress:parseInt(o),needsReviewCount:parseInt(i),endpoints:f,credits:null,fetchingCredits:!1,accountBalances:null,shouldTranslateEverything:"1"==m,notEnoughCredit:!1,notifications:{},shouldUseStatusUpdater:!0,automaticJobsStatus:Object(U.c)((function(t){return Object(St.a)([[function(){return t.notEnoughCredit},Object(xt.a)("problem")],[function(){return t.automaticJobsInProgress>0},Object(xt.a)("inProgress")],[function(){var e;return!(null!=t&&null!==(e=t.languages)&&void 0!==e&&e.readyForAutomaticTranslation)},Object(xt.a)("problem")],[function(){return 0===t.automaticJobsInProgress},Object(xt.a)("complete")],[Object(xt.a)(!0),Object(xt.a)(null)]])(t)})),synchronizeJobs:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,u,d,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,!h){t.next=5;break}return o=Mt(p),t.next=5,o();case 5:return i=r().shouldUseStatusUpdater?we():null,u=new Oe.a(f.getJobsCount),d=function(){var t=c()(s.a.mark((function t(n){var a,o,i,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(a=r().jobsToSyncCount-n.length)<0?0:a,e.setJobsToSyncCount(a),o=n.filter((function(t){return t.needsReview})).length,i=r().needsReviewCount+o,e.setNeedsReviewCount(i),c=n.filter((function(t){return t.automatic})).length,u=(u=r().automaticJobsInProgress-c)<0?0:u,e.setAutomaticJobsInProgress(u),l={allCount:a,allAutomaticCount:u,needsReviewCount:i},Object(Pt.a)("ate-jobs-count-updated",l),Object(Pt.a)("ate-jobs-downloaded",n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=new Lt.a({synchronize:function(t){return p.sync(t)},download:function(t,e){return p.download(t,e)},releaseLock:function(t){return Object(C.a)(f.syncLock,{action:"release",lockKey:t})},getJobsCount:u,listeners:{onSyncStart:[function(){return i&&i.startSyncing(l()(document.querySelectorAll('.js-wpml-translate-link[data-should-ate-sync="1"]')).map((function(t){return new ve(t)})))}],onInsufficientBalance:[function(){return e.setNotEnoughCredit(!0)},function(t){return i&&i.markAsInsufficientBalanced(t)}],onDownloadedChunk:[d,function(){var t=c()(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>0&&n%5==0&&i)){t.next=3;break}return t.next=3,i.finishSyncIteration();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()],onSyncDownloadCycleCompleted:[function(t,n){return e.setJobsToSyncCount(t.allCount),e.setAutomaticJobsInProgress(t.allAutomaticCount),e.setNeedsReviewCount(t.needsReviewCount),Object(Pt.a)("ate-jobs-count-updated",t),Object(Pt.a)("ate-sync-cycle-completed",n),i&&i.finishSyncIteration()}],onSyncDownloadCompleted:[function(){return i&&i.revertRemainingJobsToInProgress()}]},repeatTimeouts:{sync:j.sync,syncDelayed:j.syncDelayed,syncIsLockedDelay:j.syncIsLockedDelay}}),t.abrupt("return",b.syncAndDownload());case 10:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),translateEverything:Object(U.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i,c,u,l=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"",a=l.length>2?l[2]:void 0,r=a.getState,Object(Pt.a)("translate-everything-running",!0),t.next=5,Object(C.a)(Object(O.a)("translate-everything",f),{key:n});case 5:if(o=t.sent,i=o.data,c=i.success,u=i.data,!c){t.next=20;break}if(Object(Tt.a)(Object(F.a)([],"createdJobs",u))||(e.setAutomaticJobsInProgressTotal(r().automaticJobsInProgressTotal+u.createdJobs.length),e.setAutomaticJobsInProgress(r().automaticJobsInProgress+u.createdJobs.length),e.setJobsToSyncCount(r().jobsToSyncCount+u.createdJobs.length),Object(Pt.a)("translate-everything-jobs-created",u.createdJobs)),!u.key){t.next=13;break}return t.abrupt("return",e.translateEverything(u.key));case 13:if(e.setShouldTranslateEverything(!1),Object(Pt.a)("translate-everything-running",!1),!(r().jobsToSyncCount+u.createdJobs.length>0)){t.next=17;break}return t.abrupt("return",Promise.all([e.fetchCredits(),e.synchronizeJobs()]));case 17:return t.abrupt("return",e.fetchCredits());case 20:if("in-use"!==u.key){t.next=24;break}return t.abrupt("return",Object(k.a)(e.translateEverything,j.translateEverythingInUse));case 24:if("waiting"!==u.key){t.next=28;break}return t.abrupt("return",Object(k.a)(e.translateEverything,j.translateEverythingWaiting));case 28:if("media-setup-not-finished"!==u.key){t.next=30;break}return t.abrupt("return",Object(k.a)(e.translateEverything,j.translateEverythingWaitingForMediaSetup));case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),fetchCredits:Object(U.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setFetchingCredits(!0),t.next=3,Object(C.a)(f.getCredits,{});case 3:return n=t.sent,a=n.data,t.next=7,Object(C.a)(f.getAccountBalances,{});case 7:r=t.sent,o=r.data,e.setFetchingCredits(!1),a.success&&!Object(d.a)(!1,["data","error"],a)&&e.setCredits(a.data),o.success&&!Object(d.a)(!1,["data","error"],o)&&e.setAccountBalances(o.data);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),setAutomaticJobsInProgressTotal:Object(It.a)("automaticJobsInProgressTotal"),setAutomaticJobsInProgress:Object(It.a)("automaticJobsInProgress"),setJobsToSyncCount:Object(It.a)("jobsToSyncCount"),setNeedsReviewCount:Object(It.a)("needsReviewCount"),setCredits:Object(U.b)((function(t,e){t.credits=e,Object(Pt.a)("ate-credits-updated",e)})),setAccountBalances:Object(U.b)((function(t,e){t.accountBalances=e})),setFetchingCredits:Object(It.a)("fetchingCredits"),setShouldTranslateEverything:Object(It.a)("shouldTranslateEverything"),setShouldUseStatusUpdater:Object(It.a)("shouldUseStatusUpdater"),setIsAutomaticTranslations:Object(It.a)("isAutomaticTranslations"),setNotEnoughCredit:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,n===r().notEnoughCredit){t.next=9;break}return t.next=4,Object(C.a)(f.getATEJobsToSync,{});case 4:return o=t.sent,i=o.data,g.job_list=i.data,e.setNotEnoughCreditAction(n),t.abrupt("return",e.fetchCredits());case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),afterIssueSolving:Object(U.e)(function(){var t=c()(s.a.mark((function t(e,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.getState,e.setNotEnoughCreditAction(!1),t.next=4,e.fetchCredits();case 4:return t.abrupt("return",e.synchronizeJobs());case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),setNotEnoughCreditAction:Object(U.b)((function(t,e){t.notEnoughCredit=e,Object(Pt.a)("ate-not-enough-credit",e)})),untranslatedContent:Vt,languages:zt(u),notificationCenter:$t,backgroundTasks:ne};return Object(U.d)(w,{initialState:{backgroundTasks:v},injections:{untranslatedContentService:a,languagesService:r}})},_e=function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(At.a)(window.wpmlAteStatusBarStore)){t.next=2;break}return t.abrupt("return",window.wpmlAteStatusBarStore);case 2:if(Object(At.a)(window.wpmlAteStatusBarStoreInit)){t.next=14;break}n=0;case 4:if(!(n<100)){t.next=12;break}return t.next=7,Object(k.a)(Object(xt.a)(!0),100);case 7:if(Object(At.a)(window.wpmlAteStatusBarStore)){t.next=9;break}return t.abrupt("return",window.wpmlAteStatusBarStore);case 9:n++,t.next=4;break;case 12:return console.error("ATE status bar store initialization failed."),t.abrupt("return",null);case 14:return window.wpmlAteStatusBarStoreInit=!0,a=new Nt.a(new Dt.a),r={tasks:"undefined"!=typeof wpml_background_tasks?Object(F.a)({},"tasks",wpml_background_tasks):{},endpoints:"undefined"!=typeof wpml_background_tasks?Object(F.a)({},"endpoints",wpml_background_tasks):{}},o=new Oe.a(e.endpoints.getJobsCount),t.next=20,o.get(!1);case 20:return i=t.sent,e.jobsToSyncCount=i.allCount,e.automaticJobsInProgressTotal=i.allAutomaticCount,e.needsReviewCount=i.needsReviewCount,window.wpmlAteStatusBarStore=Ce(ke(ke({},e),{},{ateAPI:a,backgroundTasksData:r})),Object(O.a)("shouldTranslateEverything",e)?window.wpmlAteStatusBarStore.getActions().translateEverything():parseInt(Object(O.a)("jobsToSyncCount",e))>0&&window.wpmlAteStatusBarStore.getActions().synchronizeJobs(),Object(Pt.a)("ate-jobs-count-updated",{allCount:e.jobsToSyncCount,allAutomaticCount:e.automaticJobsInProgressTotal,needsReviewCount:e.needsReviewCount}),document.addEventListener("WPMLTooltipCreditsFixClicked",(function(){e.ateConsole&&Object(H.b)({onIssueSolved:function(){return window.wpmlAteStatusBarStore.getActions().afterIssueSolving()},onAteWidgetDisappears:function(){Object(Pt.a)("ate-issue-solved-popup-closed",!0)}})})),Object(Pt.b)("translate-everything-start").then((function(t){var e=t.shouldUseStatusUpdater,n=void 0===e||e;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(n),window.wpmlAteStatusBarStore.getActions().setShouldTranslateEverything(!0),window.wpmlAteStatusBarStore.getActions().translateEverything(),window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!0)})),Object(Pt.b)("translate-everything-stop").then((function(){window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!1)})),Object(Pt.b)("ate-sync-start").then((function(t){var e=t.createdTranslations,n=t.shouldUseStatusUpdater,a=void 0===n||n;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(a),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgressTotal(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgressTotal)+e.length),window.wpmlAteStatusBarStore.getActions().setJobsToSyncCount(parseInt(window.wpmlAteStatusBarStore.getState().jobsToSyncCount)+e.length),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgress(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgress)+e.length),window.wpmlAteStatusBarStore.getActions().synchronizeJobs()})),t.abrupt("return",window.wpmlAteStatusBarStore);case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Se=function(){return ate_jobs_sync.isAutomaticTranslations||parseInt(ate_jobs_sync.needsReviewCount)>0||ate_jobs_sync.automaticJobsInProgressTotal>0},xe=function(){var t=c()(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(ate_jobs_sync,G);case 2:if(e=t.sent,Se()){t.next=7;break}if("undefined"!=typeof wpml_background_tasks&&Object.keys(Object(F.a)({},"tasks",wpml_background_tasks)).length>0){t.next=7;break}return t.abrupt("return");case 7:document.getElementById("wp-admin-bar-ate-status-bar").classList.remove("wpml-status-bar-hidden"),(n=document.getElementById("wpml-ate-status-bar-content")).style.display="inline-flex",n.style.width="440px",n.previousSibling.style.display="none",W.a.render(B.a.createElement(U.a,{store:e},B.a.createElement(Ot,null)),n),a=new Event("statusBarRendered"),n.dispatchEvent(a),r=document.getElementById("wp-admin-bar-ate-status-bar-badge"),W.a.render(B.a.createElement(U.a,{store:e},B.a.createElement(kt,null)),r);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Te=n(51),Ae=n.n(Te),Pe=(n(53),n(596)),Ie=n.n(Pe),Ne=(n(837),function(t){var e=t.isAdminBar,n=void 0!==e&&e,a=Object(U.h)((function(t){return t.automaticJobsStatus})),r=Object(U.h)((function(t){return t.automaticJobsInProgress})),o=n?B.a.createElement(Re,{automaticJobsInProgress:r,status:a}):B.a.createElement(De,{status:r,icon:a});return B.a.createElement(B.a.Fragment,null,a&&o)}),De=function(t){var e=t.status,n=t.icon;return B.a.createElement(B.a.Fragment,null,B.a.createElement(Ae.a,null,B.a.createElement(Ie.a,{className:"jobs-status-space",size:[16,0]},B.a.createElement(Be,{status:n}),B.a.createElement("h1",{className:"progress"},e>0?B.a.createElement("span",{className:"progress__number"},e):Le(n)),e>0&&B.a.createElement("div",{className:"small-gray"},B.a.createElement(Ae.a,null,Object(E.a)("translations","sitepress")),B.a.createElement(Ae.a,null,Object(E.a)("left in the queue","sitepress"))))))},Le=function(t){return"problem"===t?Object(E.a)("Translation on hold","sitepress"):Object(E.a)("No translations in the queue","sitepress")},Je=function(t,e){return t>0?sprintf(Object(E.a)("%d translations left","sitepress"),t):Le(e)},Re=function(t){var e=t.automaticJobsInProgress,n=t.status,a=Object(U.g)((function(t){return t.notificationCenter})).updateNotification;return Object(R.useEffect)((function(){a({id:"jobs-left-to-translate",notification:{title:Je(e,n),dotIcon:!0,isError:"problem"===n,order:7}})}),[]),null},Be=function(t){var e=t.status,n="wpml-auto-translate-status__dot",a={inProgress:"".concat(n,"_in-progress"),complete:"".concat(n,"_complete"),problem:"".concat(n,"_problem")};return B.a.createElement("span",{className:"".concat(n," ").concat(a[e])})},Me=n(1334),We=(n(592),n(150)),Fe=n(74),Ue=function(){return B.a.createElement("svg",{width:"27",height:"30",viewBox:"0 0 27 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},B.a.createElement("path",{d:"M25.4737 0H1.52631C0.868418 0 0.342102 0.526316 0.342102 1.18421V28.8158C0.342102 29.4737 0.868418 30 1.52631 30H17.9737C18.2368 30 18.5 29.8684 18.7632 29.7368L26.2632 23.2895C26.5263 23.0263 26.6579 22.7632 26.6579 22.3684V1.18421C26.6579 0.526316 26.1316 0 25.4737 0ZM22.1842 23.4211L19.1579 26.1842V23.4211H22.1842ZM24.1579 2.36842V21.3158H17.9737C17.3158 21.3158 16.7895 21.7105 16.6579 22.5V27.7632H2.71052V2.36842H24.1579Z",fill:"#47A5BF"}),B.a.createElement("path",{d:"M18.4777 10.7245H8.52234C7.88722 10.7245 7.37234 10.2096 7.37234 9.57447V9.57447C7.37234 8.93934 7.88722 8.42447 8.52234 8.42447H18.4777C19.1128 8.42447 19.6277 8.93934 19.6277 9.57447V9.57447C19.6277 10.2096 19.1128 10.7245 18.4777 10.7245Z",fill:"#47A5BF"},B.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})),B.a.createElement("path",{d:"M18.4777 16.15H8.52234C7.88722 16.15 7.37234 15.6351 7.37234 15V15C7.37234 14.3649 7.88722 13.85 8.52234 13.85H18.4777C19.1128 13.85 19.6277 14.3649 19.6277 15V15C19.6277 15.6351 19.1128 16.15 18.4777 16.15Z",fill:"#47A5BF"},B.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})),B.a.createElement("path",{d:"M13.6585 21.5755H8.52231C7.88719 21.5755 7.37231 21.0607 7.37231 20.4255V20.4255C7.37231 19.7904 7.88719 19.2755 8.52231 19.2755H13.6585C14.2936 19.2755 14.8085 19.7904 14.8085 20.4255V20.4255C14.8085 21.0607 14.2936 21.5755 13.6585 21.5755Z",fill:"#47A5BF"},B.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})))},qe=function(){var t=Object(U.h)((function(t){return t.automaticJobsInProgressTotal})),e=B.a.createElement("span",null,Object(E.a)("Preparing more content for translation","sitepress")),n=B.a.createElement("span",null,Object(E.a)("Preparing content for translation","sitepress"));return B.a.createElement("div",{className:"sending"},B.a.createElement(Ue,null),"Â ",t>0?e:n)},Ge=(n(1245),function(){return B.a.createElement("div",{className:"wpml-card-heading-icon wpml-lightning-icon"},B.a.createElement("span",null,B.a.createElement("svg",{width:"16",height:"22",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},B.a.createElement("path",{d:"M3.79996 20.975C3.79996 21.2375 4.06246 21.5 4.45621 21.5C4.71871 21.5 4.98121 21.3687 5.24371 21.2375L15.4812 9.55625C16.0062 8.9 16.0062 7.85 15.35 7.325C14.9562 7.0625 14.5625 6.93125 14.1687 6.93125H9.18121L13.1187 0.5H5.50621L0.518709 9.425C-0.137541 10.475 0.256209 11.7875 1.30621 12.3125C1.69996 12.4438 1.96246 12.575 2.35621 12.575H6.68746L3.79996 20.5813V20.975Z",fill:"#47A5BF"}))))}),He=n(1317),Ve=(n(140),n(113),n(1246),n(1347)),Ke=n(1346),ze=(n(414),n(151),n(506)),Ye=(n(76),function(){var t=Object(U.h)(Object(O.a)("credits")),e=Object(U.h)(Object(O.a)("fetchingCredits")),n=Object(U.g)(Object(O.a)("fetchCredits"));return Object(R.useEffect)((function(){t||n()}),[]),B.a.createElement(B.a.Fragment,null,t?t.error?B.a.createElement(en,null):B.a.createElement(Ze,{credits:t,isFetching:e}):"")}),Ze=function(t){var e=t.credits,n=t.isFetching;return B.a.createElement("div",{style:{minHeight:"50px"}},n?B.a.createElement(ze.a,{spinning:!0}):B.a.createElement(We.a,null,B.a.createElement(Fe.a,{span:10},B.a.createElement(Xe,{credits:e})),e.active_subscription&&B.a.createElement(Fe.a,{span:12,offset:2},B.a.createElement(Qe,{credits:e}))))},Xe=function(t){var e=t.credits,n=e.available_balance>e.subscription_max_limit?e.available_balance-e.subscription_max_limit:0,a=B.a.createElement("p",{style:{width:150}},Object(E.a)("Remaining prepaid credits that are assigned to this site on WPML.org.","sitepress"));return B.a.createElement(Ke.a,{overlayClassName:"ant-popover-dark",title:null,content:a},B.a.createElement(We.a,null,B.a.createElement(Fe.a,{className:"wpml-credit"},B.a.createElement("span",null,B.a.createElement("strong",null,n)))),B.a.createElement(We.a,null,B.a.createElement(Ve.b,{className:"small-gray"},Object(E.a)("Prepaid credits left","sitepress"))))},Qe=function(t){var e=t.credits,n=e.pay_as_you_go?B.a.createElement("strong",null,e.subscription_usage):B.a.createElement(B.a.Fragment,null,B.a.createElement("strong",null,e.subscription_usage)," / ",e.subscription_max_limit),a=e.pay_as_you_go?B.a.createElement(tn,null):B.a.createElement($e,{credits:e});return B.a.createElement(Ke.a,{overlayClassName:"ant-popover-dark",title:null,content:a},B.a.createElement(We.a,null,B.a.createElement(Fe.a,{className:"wpml-subscription"},B.a.createElement("span",null,n))),B.a.createElement(We.a,null,B.a.createElement(Ve.b,{className:"small-gray"},e.pay_as_you_go?Object(E.a)("Pay-as-you-go credits used","sitepress"):Object(E.a)("Account credits used","sitepress"))))},$e=function(t){var e=t.credits;return B.a.createElement(B.a.Fragment,null,B.a.createElement("p",{style:{width:250}},Object(E.a)("Once youâve used all your prepaid credits, weâll invoice you for any additional credits you use after the end of the month","sitepress")),B.a.createElement("table",null,B.a.createElement("tbody",null,B.a.createElement("tr",null,B.a.createElement("td",null,Object(E.a)("Payment limit:","sitepress")),B.a.createElement("td",null,Object(E.c)(Object(E.a)("%s credits","sitepress"),e.subscription_max_limit))),B.a.createElement("tr",null,B.a.createElement("td",null,Object(E.a)("Credits used:","sitepress")),B.a.createElement("td",null,e.subscription_usage)),B.a.createElement("tr",null,B.a.createElement("td",null,Object(E.a)("Credits left:","sitepress")),B.a.createElement("td",null,e.subscription_max_limit-e.subscription_usage)))))},tn=function(){return B.a.createElement("p",{style:{width:250}},Object(E.a)("The number of credit you will receive an invoice for at the end of the month. View your pay-as-you-go details in your siteâs automatic translation settings.","sitepress"))},en=function(){return B.a.createElement(B.a.Fragment,null,Object(E.a)("Calculating","sitepress")," ",B.a.createElement(ze.a,{size:"small",spinning:!0}))},nn=(n(1247),function(){var t=Object(U.h)((function(t){return t.shouldTranslateEverything})),e=Object(U.h)((function(t){return t.automaticJobsInProgressTotal})),n=t?Object(E.a)("Your site is being automatically translated!","sitepress"):Object(E.a)("Automatic translation status","sitepress"),a=B.a.createElement(We.a,{className:"has-jobs"},B.a.createElement(Fe.a,null,B.a.createElement(Ne,null)),t&&B.a.createElement(Fe.a,null,B.a.createElement(qe,null))),r=B.a.createElement(We.a,{className:"has-no-jobs",align:"middle"},B.a.createElement(Fe.a,null,t&&B.a.createElement(on,{text:Object(E.a)("Calculating...","sitepress")})),B.a.createElement(Fe.a,null,t&&B.a.createElement(qe,null)));return B.a.createElement(B.a.Fragment,null,B.a.createElement(an,{heading:n}),B.a.createElement(We.a,{className:"wpml-auto-translate-status__content-info"},B.a.createElement(Fe.a,{span:24,className:"status-first-column"},t&&0===e?r:a,B.a.createElement(We.a,{className:"credits"},B.a.createElement(Fe.a,{span:24},B.a.createElement(Ye,null))))))}),an=function(t){var e=t.heading;return B.a.createElement(We.a,{align:"middle"},B.a.createElement(Fe.a,{style:{display:"flex",alignItems:"center"},span:24},B.a.createElement(Ge,null),B.a.createElement("h3",null,e)))},rn=function(){return B.a.createElement("div",{className:"do-not-close"},Object(E.a)("Do not close WP admin!","sitepress"))},on=function(t){var e=t.text;return B.a.createElement(B.a.Fragment,null,B.a.createElement("h1",{className:"progress"},e),B.a.createElement("div",{className:"small-gray",style:{display:"inline-block"}},Object(E.a)("The number of translations","sitepress")))},sn=function(){var t=Object(U.h)(Object(O.a)("shouldTranslateEverything")),e=Object(K.a)(Object(E.a)("Change your <a>automatic translation settings</a> (in-progress translation jobs will be completed with the current settings).","sitepress"),{a:B.a.createElement("a",{href:ate_jobs_sync.urls.automaticSettings})});return B.a.createElement(We.a,{className:"wpml-auto-translate-status__footer"},B.a.createElement(He.a,null),t&&B.a.createElement(We.a,null,B.a.createElement("p",{className:"small-gray"},B.a.createElement("a",{href:ate_jobs_sync.urls.translateAutomaticallyDoc},Object(E.a)("Read more about translating your site automatically.","sitepress")))),B.a.createElement(We.a,null,B.a.createElement("p",{className:"small-gray"},e)))},cn=function(t){var e=t.status,n=void 0===e?B.a.createElement(nn,null):e,a=Object(U.h)((function(t){return t.isAutomaticTranslations})),r=Object(U.h)((function(t){return t.shouldTranslateEverything}));return B.a.createElement(B.a.Fragment,null,B.a.createElement(Me.a,{className:"wpml-auto-translate-status"},B.a.createElement(We.a,{gutter:[0,16],className:"wpml-auto-translate-status__row"},B.a.createElement(Fe.a,{span:24,md:13,className:"wpml-auto-translate-status__content"},n),B.a.createElement(Fe.a,{span:24,md:11,className:"wpml-auto-translate-status__notices"},r&&B.a.createElement(We.a,{justify:"end"},B.a.createElement(rn,null)),B.a.createElement(wt,{context:"dashboard"}))),!a&&B.a.createElement(sn,null)))},un=(n(1248),function(){Object(R.useEffect)((function(){document.dispatchEvent(new Event("WPMLManualTranslationStatusIsVisible"))}),[]);var t=Object(K.a)(Object(E.a)("Read more about how to translate your content in the <a>Getting Started Guide</a>","sitepress"),{a:B.a.createElement("a",{href:"https://wpml.org/documentation/getting-started-guide/",target:"_blank",className:"wpml-external-link",rel:"noreferrer"})});return B.a.createElement(Me.a,{className:"wpml-manual-translation-status"},B.a.createElement(We.a,null,B.a.createElement(Fe.a,{span:16},B.a.createElement("h4",null,Object(E.a)("Let's Start Translating!","sitepress")),B.a.createElement("p",null,Object(E.a)("Choose your content from the Translation Dashboard below and create your first translation job!","sitepress")),B.a.createElement("p",null,t)),B.a.createElement(Fe.a,{span:8},B.a.createElement("div",{id:"wpml-manual-translation-status-notice"}))))}),ln=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector("#wpml-auto-translate > .content"))){t.next=10;break}return t.next=4,_e(ate_jobs_sync,G);case 4:a=t.sent,r=Se(),o=!(null!==(n=ate_jobs_sync)&&void 0!==n&&n.anyJobsExist),(r||o)&&(document.getElementById("wpml-auto-translate").style.display="block"),i=r?B.a.createElement(cn,null):o?B.a.createElement(un,null):B.a.createElement(B.a.Fragment,null),W.a.render(B.a.createElement(U.a,{store:a},i),e);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),dn=n(129),fn=n(393),pn=function(t){return t.closest("td")},bn=function(t){var e=function(t){t.checked=!1,t.disabled=!0;var e=pn(t);e.setAttribute("title",Object(E.a)("This content is being automatically translated. If you want to do something different with it cancel translation jobs first.","sitepress")),e._tippy||Object(_.a)(e,"otgs")},n=function(){var t=[de.b.COMPLETED,de.b.CANCELLED];Object(p.a)(Object(b.a)((function(t){return parseInt(t.dataset.tmJobId)})),Object(h.a)((function(n){var a,r=(a=n.dataset.tmJobId,document.querySelector('.js-wpml-translate-link[data-tm-job-id="'.concat(a,'"]')).closest("tr").querySelector('input[type="checkbox"]'));"1"!==n.dataset.automatic||Object(dn.a)(parseInt(n.dataset.document_status),t)?function(t){t.disabled=!1;var e=pn(t);e.removeAttribute("title"),e._tippy&&e._tippy.destroy()}(r):e(r)})))(document.querySelectorAll("span.js-wpml-translate-link"))};t.addAction("wpml-tm-ate-after-sync","updateJobs",n),Object(fn.b)("translate-everything-running").then((function(t){return t?Object(h.a)(e,document.querySelectorAll('#icl-tm-translation-dashboard tr input[type="checkbox"]')):n()}))},mn=(n(1249),n(47)),hn=n.n(mn),gn=n(863),vn=n(115),yn=n.n(vn),jn=n(25),wn=function(){var t=Object(U.h)(gn.a).success,e=Object(U.g)(gn.a).enable;return Object(R.useEffect)((function(){e()}),[]),Object(R.useEffect)((function(){t&&Object(Pt.a)("ateEnabled")}),[t]),B.a.createElement(B.a.Fragment,null,!t&&B.a.createElement(cn,{status:B.a.createElement(On,null)}))},On=function(){var t=Object(U.g)(gn.a).enable,e=Object(U.h)(gn.a),n=e.enabling,a=e.failedMessage,r=n?Object(E.a)("Connecting to WPMLâs Advanced Translation Editor","sitepress"):Object(O.a)("header",a),o=B.a.createElement(B.a.Fragment,null,B.a.createElement(hn.a,{span:1,offset:1},B.a.createElement(yn.a,{spinning:!0}))),s=B.a.createElement(B.a.Fragment,null,B.a.createElement(hn.a,{offset:1},B.a.createElement("div",{className:"wpml-error"},B.a.createElement("p",{dangerouslySetInnerHTML:{__html:Object(O.a)("description",a)}}),B.a.createElement(jn.a,{type:"error",onClick:t},Object(E.a)("Try again","sitepress")))));return B.a.createElement(B.a.Fragment,null,B.a.createElement(an,{heading:r}),B.a.createElement(Ae.a,null,n?o:s))},En=Object(U.d)({shouldTranslateEverything:!0,enabling:!1,setEnabling:Object(It.a)("enabling"),enable:Object(U.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setEnabling(!0),t.next=3,Object(C.a)(Object(O.a)("enableATE",ate_jobs_sync.endpoints),{});case 3:n=t.sent,a=n.data,r=a.success,o=a.data,e.setEnabling(!1),e.setSuccess(r),!r&&e.setFailedMessage(Object(F.a)([],"error",o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),success:!1,setSuccess:Object(It.a)("success"),failedMessage:"",setFailedMessage:Object(It.a)("failedMessage")}),kn=function(t){return(e=t.parentNode,n="span",a=document.createElement(n),a.innerHTML=e.innerHTML,e.parentNode.replaceChild(a,e),a).children[0];var e,n,a},Cn=function(t){t.setAttribute("title",Object(E.a)("You don't have the rights to review this language","sitepress")),Object(_.a)(t,"otgs")},_n=function(){l()(document.querySelectorAll('.js-wpml-translate-link[data-user-can-translate="no"] i')).filter((function(t){return t.classList.contains("otgs-ico-needs-review")})).map(kn).map(Cn)},Sn=function(){_n(),Object(Pt.b)("job-link-updated").then(_n),l()(document.querySelectorAll(".js-wpml-translate-link")).forEach((function(t){t.addEventListener("click",(function(){return localStorage.setItem("continueReview",!1),!1}))}))},xn=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i,c=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]&&c[1],t.next=4,Object(C.a)(ate_jobs_sync.endpoints.assignToTranslation,{page:e,lockKey:n});case 4:if(!(a=t.sent).data.success){t.next=9;break}if(r=a.data.data,o=r.nextPage,i=r.lockKey,!(o>e&&i)){t.next=9;break}return t.abrupt("return",xn(o,i));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Tn=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(ate_jobs_sync.endpoints.assignToTranslation,{firstSchedule:!0});case 2:t.sent.data.success||setTimeout((function(){return Tn}),2e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),An=xn,Pn=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(ate_jobs_sync.endpoints.invalidateLangMappingCache,{});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ate_jobs_sync.ateCallbacks.retranslation=Tn,ate_jobs_sync.ateCallbacks.invalidateCache=Pn;var In=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(J(),ate_jobs_sync.shouldCheckForRetranslation&&An(),"1"!==ate_jobs_sync.isTranslationManager){t.next=6;break}return t.next=5,xe();case 5:"1"===ate_jobs_sync.isAutomaticTranslations&&bn(G,ate_jobs_sync);case 6:return t.next=8,ln();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",c()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(ate_jobs_sync,G);case 2:e=t.sent,Sn(),"1"===ate_jobs_sync.isAteActive?In():"ATE"===ate_jobs_sync.editorMode&&"1"===ate_jobs_sync.isAutomaticTranslations&&(n=void 0,(n=document.querySelector("#wpml-auto-translate > .connect"))&&(n.parentNode.style.display="block",W.a.render(B.a.createElement(U.a,{store:En},B.a.createElement(wn,null)),n)),Object(Pt.b)("ateEnabled").then(In).then((function(){return e.getActions().languages.fetchLanguages()})));case 5:case"end":return t.stop()}var n}),t)}))))},140:function(t,e,n){},151:function(t,e,n){},154:function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var a=n(509),r=n.n(a),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wpml",n="rtl"===document.getElementsByTagName("html")[0].dir,a={arrow:!0,theme:e,animation:"fade",sticky:!0,interactive:!0,dynamicTitle:!0,placement:n?"top-end":"top-start"};r()(t,a)};e.a=o;var s=function(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),o(t,"otgs")}},183:function(t,e,n){},358:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return P}));var a=n(845),r=n(17),o=n(3),s=n.n(o),i=n(7),c=n.n(i),u=function(){var t=c()(s.a.mark((function t(e,n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e,n);case 2:if(a=t.sent,r=parseInt(a.available_balance),!isNaN(r)){t.next=6;break}throw Error('"available_balance" is not numeric.');case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,{});case 2:if(a=t.sent,r=a.data,o=r.success,i=r.data,o&&i&&!("error"in i)&&"available_balance"in i){t.next=8;break}throw Error("Error getting credits.");case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){if(!ate_jobs_sync||!Object(a.a)(["endpoints","getCredits",ate_jobs_sync]))throw Error("ateGetCredits: Missing necessary system data.");return u(r.a,ate_jobs_sync.endpoints.getCredits)},f=n(15),p=n.n(f),b=function(t,e){var n="function"==typeof t,a="function"==typeof e;if(n||a){var r=function(t,e,n){return t[e].forEach((function(t){var e;null!==(e=t.classList)&&void 0!==e&&e.contains("issue-solving-backdrop")&&n()}))},o=new MutationObserver((function(s){s.forEach((function(s){n&&r(s,"addedNodes",t),r(s,"removedNodes",(function(){a&&e(),o.disconnect()}))}))}));return o.observe(document.getElementById("wpml-ate-console-container"),{subtree:!0,childList:!0}),o}},m=!1,h=function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,u,l,d,f,p,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.onCloseWithCredits,o=e.onCloseWithoutCredits,i=e.onAteWidgetAppears,u=e.onAteWidgetDisappears,l=e.params,d=void 0===l?{}:l,!m){t.next=3;break}return t.abrupt("return");case 3:return m=!0,f=function(){var t=c()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n().catch((function(t){throw m=!1,t}));case 2:return e=t.sent,t.abrupt("return",e>0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p="function"==typeof r?r:function(){},h="function"==typeof o?o:function(){},t.next=9,f();case 9:if(!t.sent){t.next=13;break}return m=!1,p(),t.abrupt("return");case 13:return b(i,u),t.prev=14,t.next=17,a(c()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:e=t.sent,m=!1,e?p():h();case 5:case"end":return t.stop()}}),t)}))),d);case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(14),m=!1,t.t0;case 23:case"end":return t.stop()}}),t,null,[[14,19]])})));return function(e,n,a){return t.apply(this,arguments)}}(),g=n(1308);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(t,e,n,a){return new Promise((function(r,o){var i,u=n.url,l=n.params;a(u,y(y(y({},l),e),{},{onIssueSolvingClose:(i=c()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().catch((function(t){o(t)}));case 2:r(!0);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}))}))};function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E=function(){var t=c()(s.a.mark((function t(e,n){var o,i,c,u,l,d,f=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>2&&void 0!==f[2]&&f[2],ate_jobs_sync&&Object(g.a)("ateConsole",ate_jobs_sync)&&Object(a.a)(["urls","ateConsole"],ate_jobs_sync)){t.next=4;break}throw console.log("ateLoadWidget: Missing necessary system data."),Error("System error.");case 4:if(head&&"function"==typeof head.js){t.next=7;break}throw console.error("head.js is not available."),Error("System error.");case 7:if(i=ate_jobs_sync.ateConsole,o){t.next=12;break}delete i.job_list,t.next=17;break;case 12:return t.next=14,Object(r.a)(ate_jobs_sync.endpoints.getATEJobsToSync,{});case 14:c=t.sent,u=c.data.data,i.job_list=u;case 17:return l={url:ate_jobs_sync.urls.ateConsole,params:i},d={translation_mode:ate_jobs_sync.isAutomaticTranslations?"everything":"something"},t.abrupt("return",j(e,O(O({},d),n),l,(function(t,e){return head.js(t,(function(){if("function"!=typeof LoadEateWidget)throw console.log("LoadEateWidget is not available."),Error("System error.");LoadEateWidget(e)}))})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=function(t){var e=t.onCloseWithCredits,n=t.onCloseWithoutCredits,a=t.onAteWidgetAppears,r=t.onAteWidgetDisappears,o=t.params;return h({onCloseWithCredits:e,onCloseWithoutCredits:n,onAteWidgetAppears:a,onAteWidgetDisappears:r,params:C(C({},void 0===o?{}:o),{},{widget_mode:"no_credits"})},d,E)},S=!1,x=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.onIssueSolved,r=e.onAteWidgetAppears,o=e.onAteWidgetDisappears,i=e.params,u=void 0===i?{}:i,!S){t.next=3;break}return t.abrupt("return");case 3:return S=!0,l="function"==typeof a?a:function(){},b(r,(function(){S=!1,"function"==typeof o&&o()})),t.prev=7,t.next=10,n(c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S=!1,l();case 2:case"end":return t.stop()}}),t)}))),u,!0);case 10:t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(7),S=!1,t.t0;case 16:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e,n){return t.apply(this,arguments)}}();function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=function(t){var e=t.onIssueSolved,n=t.onAteWidgetAppears,a=t.onAteWidgetDisappears,r=t.params;return x({onIssueSolved:e,onAteWidgetAppears:n,onAteWidgetDisappears:a,params:A(A({},void 0===r?{}:r),{},{widget_mode:"issue_solving"})},E)}},393:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var a=n(27),r=n.n(a),o=n(452),s=n(451),i=n(54),c=Object(o.a)("WPML-"),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent(c(t),{detail:e}))},l=function(t){var e=[],n={then:function(t){return e=Object(s.a)(t,e),this}};return document.addEventListener(c(t),(function(t){i.a.apply(void 0,r()(e))(t.detail)})),n}},394:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d=n(17),f=n(199),p=function(){function t(e){c()(this,t),this.endpoint=e}var e;return l()(t,[{key:"get",value:(e=s()(r.a.mark((function t(){var e,n,a,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(o.length>0&&void 0!==o[0])||o[0],t.next=3,Object(d.a)(this.endpoint,{withCache:e});case 3:return n=t.sent,a=function(t){return parseInt(Object(f.a)(0,["data","data",t],n))},t.abrupt("return",{allCount:a("allCount"),allAutomaticCount:a("allAutomaticCount"),automaticWithoutLongstandingCount:a("automaticWithoutLongstandingCount"),needsReviewCount:a("needsReviewCount")});case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},414:function(t,e,n){},431:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var a=n(15),r=n.n(a),o=n(3),s=n.n(o),i=n(9),c=n.n(i),u=n(7),l=n.n(u),d=n(27),f=n.n(d),p=n(14),b=n.n(p),m=n(16),h=n.n(m),g=n(512),v=n.n(g),y=n(513),j=n.n(y),w=n(514),O=n.n(w),E=n(54),k=n(40),C=n(129),_=n(161),S=n(65),x=n(408),T=n(49),A=n(871),P=n(875),I=n(73),N=n(872),D=n(367),L=n(351),J=n(406),R=n(530),B=n(407),M=n(12);n(119);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U=E.a(k.a("ateStatus"),C.a(_.a,[M.a.TRANSLATED,M.a.DELIVERING,M.a.EDITED]));function q(t){return new Promise((function(e){return setTimeout(e,t)}))}var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;b()(this,t),this.insufficientBalanceJobs=e,this.stillInProgressJobs=n,this.downloaded=a,this.notDownloaded=r,this.lockKey=o}return h()(t,[{key:"prepandPrevioslyDownloadedJobs",value:function(e){return new t(this.insufficientBalanceJobs,this.stillInProgressJobs,[].concat(f()(e),f()(this.downloaded)),this.notDownloaded,this.lockKey)}}]),t}(),H=function(){function t(e){var n=e.synchronize,a=e.download,r=e.releaseLock,o=e.listeners,s=(o=void 0===o?{}:o).onInsufficientBalance,i=void 0===s?[]:s,c=o.onDownloadedChunk,u=void 0===c?[]:c,l=o.onSyncDownloadCycleCompleted,d=void 0===l?[]:l,f=o.onSyncDownloadCompleted,p=void 0===f?[]:f,m=o.onSyncStart,h=void 0===m?[]:m,g=o.onSyncLocked,v=void 0===g?[]:g,y=e.getJobsCount,j=e.repeatTimeouts,w=(j=void 0===j?{}:j).sync,O=void 0===w?5e3:w,E=j.syncDelayed,k=void 0===E?1e4:E,C=j.syncIsLockedDelay,_=void 0===C?6e4:C;b()(this,t),this.synchronize=n,this.download=a,this.releaseLock=r,this.getJobsCount=y,this.onInsufficientBalance=i,this.onDownloadedChunk=u,this.onSyncStart=h,this.onSyncDownloadCycleCompleted=d,this.onSyncDownloadCompleted=p,this.onSyncLocked=v,this.repeatTimeouts={sync:O,syncDelayed:k,syncIsLockedDelay:_}}var e,n,a,r,o,i,u;return h()(t,[{key:"syncSinglePage",value:(u=l()(s.a.mark((function t(){var e,n,a,r,o,i,u,l,d,f,p,b=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b.length>0&&void 0!==b[0]?b[0]:{},t.next=3,this.synchronize(e);case 3:return n=t.sent,a=S.a([],"jobs",n),r=x.a(T.a("ateStatus",M.a.NO_CREDIT),a),o=c()(r,2),i=o[0],u=o[1],l=x.a(U,u),d=c()(l,2),f=d[0],p=d[1],i.length&&this.onInsufficientBalance.forEach((function(t){return t(i)})),t.abrupt("return",{insufficientBalanceJobs:i,readyToDownloadJobs:f,stillInProgressJobs:p,response:n});case 9:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"synchronizeAllPages",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return O()(s.a.mark((function a(){var r,o,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n?{lockKey:n}:{},o={};case 2:return o=A.a(["lockKey","ateToken","nextPage","numberOfPages"],r),a.next=5,j()(t.syncSinglePage(F(F({},o),{},{includeManualAndLongstandingJobs:e})));case 5:return i=a.sent,r=i.response,a.next=9,{insufficientBalanceJobs:i.insufficientBalanceJobs||[],readyToDownloadJobs:i.readyToDownloadJobs||[],stillInProgressJobs:i.stillInProgressJobs||[],lockKey:k.a("lockKey",r)};case 9:if(S.a(!1,"ateToken",r)){a.next=2;break}case 10:case"end":return a.stop()}}),a)})))()}},{key:"downloadSingleBatch",value:(i=l()(s.a.mark((function t(e,n){var a,r,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=P.a(parseInt),t.prev=1,t.next=4,this.download(e,n);case 4:return r=t.sent,r=I.a(N.a({jobId:a,status:a}),r),o=function(t){var e=r.find(T.a("jobId",t.jobId));return e?F(F({},t),e):t},i=E.a(I.a(o),x.a(T.a("status",M.b.COMPLETED)))(e),u=c()(i,2),l=u[0],d=u[1],t.abrupt("return",{downloadedJobs:l,notDownloaded:d});case 11:return t.prev=11,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",{notDownloaded:e,downloadedJobs:[]});case 15:case"end":return t.stop()}}),t,this,[[1,11]])}))),function(t,e){return i.apply(this,arguments)})},{key:"downloadAll",value:(o=l()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l,d,p=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=D.a(T.a("status",M.b.COMPLETED)),r=[],o=[],i=L.a(J.a(U,a),e),c=R.a(5,i),u=R.a((b=void 0,m=void 0,"undefined"==typeof ate_jobs_sync||null===ate_jobs_sync?2:(null===(b=ate_jobs_sync)||void 0===b||null===(m=b.settings)||void 0===m?void 0:m.numberOfParallelDownloads)||2),c),l=s.a.mark((function t(e){var a,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(I.a((function(t){return p.downloadSingleBatch(t,n)}),u[e]));case 2:if(a=t.sent,i=B.a(I.a(k.a("downloadedJobs"),a)),c=B.a(I.a(k.a("notDownloaded"),a)),!i.length||!p.onDownloadedChunk.length){t.next=8;break}return t.next=8,Promise.all(I.a((function(t){return t(i,parseInt(e))}),p.onDownloadedChunk));case 8:r.push.apply(r,f()(i)),o.push.apply(o,f()(c));case 10:case"end":return t.stop()}}),t)})),t.t0=s.a.keys(u);case 8:if((t.t1=t.t0()).done){t.next=13;break}return d=t.t1.value,t.delegateYield(l(d),"t2",11);case 11:t.next=8;break;case 13:return t.abrupt("return",{downloaded:r,notDownloaded:o});case 14:case"end":return t.stop()}var b,m}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"syncAndDownloadCycle",value:(r=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d,p,b,m,h,g,y=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!(y.length>0&&void 0!==y[0])||y[0],n=y.length>1&&void 0!==y[1]?y[1]:null,a=[],r=[],o=[],i=[],c=n,u=!0,l=!1,t.prev=9,p=v()(this.synchronizeAllPages(e,c));case 11:return t.next=13,p.next();case 13:return b=t.sent,u=b.done,t.next=17,b.value;case 17:if(m=t.sent,u){t.next=32;break}if(h=m,a.push.apply(a,f()(h.insufficientBalanceJobs)),r.push.apply(r,f()(h.stillInProgressJobs)),c=h.lockKey,!h.lockKey){t.next=29;break}return t.next=26,this.downloadAll(h.readyToDownloadJobs,h.lockKey);case 26:g=t.sent,o.push.apply(o,f()(g.downloaded)),i.push.apply(i,f()(g.notDownloaded));case 29:u=!0,t.next=11;break;case 32:t.next=38;break;case 34:t.prev=34,t.t0=t.catch(9),l=!0,d=t.t0;case 38:if(t.prev=38,t.prev=39,u||null==p.return){t.next=43;break}return t.next=43,p.return();case 43:if(t.prev=43,!l){t.next=46;break}throw d;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",new G(a,r,o,i,c));case 49:case"end":return t.stop()}}),t,this,[[9,34,38,48],[39,,43,47]])}))),function(){return r.apply(this,arguments)})},{key:"syncAndDownload",value:(a=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d=this,f=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f.length>0&&void 0!==f[0]?f[0]:{},n=e.suspendCycleRepeat,a=void 0!==n&&n,this.onSyncStart.forEach((function(t){return t()})),i=1,c=!0,u=null,l=s.a.mark((function t(){var e,n,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.syncAndDownloadCycle(c,u);case 2:return n=t.sent,o=n.prepandPrevioslyDownloadedJobs((null===(e=o)||void 0===e?void 0:e.downloaded)||[]),u=n.lockKey||null,c=!u,t.next=8,d.getJobsCount.get();case 8:return l=t.sent,t.next=11,Promise.all(d.onSyncDownloadCycleCompleted.map((function(t){return t(l,n)})));case 11:if(!a){t.next=17;break}if(t.t0=u,!t.t0){t.next=16;break}return t.next=16,d.releaseLock(n.lockKey);case 16:return t.abrupt("return","break");case 17:if(!u){t.next=23;break}return t.next=20,d._shouldRetryWithLock(i,n,l);case 20:t.t1=t.sent,t.next=26;break;case 23:return t.next=25,d._shouldRetryWithoutLock(i,l,r);case 25:t.t1=t.sent;case 26:i=t.t1,r=l;case 28:case"end":return t.stop()}}),t)}));case 6:return t.delegateYield(l(),"t0",7);case 7:if("break"!==t.t0){t.next=10;break}return t.abrupt("break",11);case 10:if(i){t.next=6;break}case 11:return this.onSyncDownloadCompleted.forEach((function(t){return t(o)})),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_shouldRetryWithLock",value:(n=l()(s.a.mark((function t(e,n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.automaticWithoutLongstandingCount<=n.insufficientBalanceJobs.length||e>=10)){t.next=4;break}return t.next=3,this.releaseLock(n.lockKey);case 3:return t.abrupt("return",!1);case 4:return e=n.downloaded.length>0?1:e+1,r=n.downloaded.length>0?this.repeatTimeouts.sync:e*this.repeatTimeouts.syncDelayed,t.next=8,q(r);case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,a){return n.apply(this,arguments)})},{key:"_shouldRetryWithoutLock",value:(e=l()(s.a.mark((function t(e,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.automaticWithoutLongstandingCount<=0)){t.next=2;break}return t.abrupt("return",!1);case 2:if(!((e=!a||a.automaticWithoutLongstandingCount>n.automaticWithoutLongstandingCount?1:e+1)>=3)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,q(this.repeatTimeouts.syncIsLockedDelay);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)}))),function(t,n,a){return e.apply(this,arguments)})}]),t}()},436:function(t,e,n){"use strict";var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d={createJob:"/wpml/tm/v1/ate/jobs",sync:"/wpml/tm/v1/ate/jobs/sync",retry:"/wpml/tm/v1/ate/jobs/retry",download:"/wpml/tm/v1/ate/jobs/download",fixJobStatus:function(t,e){return"/wpml/tm/v1/ate/jobs/".concat(t,"/fix?jobId=").concat(e)},getJobStatus:function(t){return"/wpml/tm/v1/ate/jobs/".concat(t)}},f=function(){function t(e){c()(this,t),this.request=e}var e,n,a;return l()(t,[{key:"createJob",value:function(t){var e=t.xliff,n=t.returnURL,a=e.sourceLang,r=e.targetLang,o=e.content;return this.request.post(d.createJob,{source_language:a,target_language:r,file:{name:"some_page_en_fr.xliff",type:"data:application/x-xliff;base64",content:o},return_url:n})}},{key:"getJobStatus",value:function(t){return this.request.get(d.getJobStatus(t))}},{key:"fixJobStatus",value:function(t,e){return this.request.get(d.fixJobStatus(t,e))}},{key:"sync",value:(a=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.sync,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"retry",value:(n=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.retry,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"download",value:(e=s()(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.download,{jobs:e,lockKey:n}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}();e.a=f},53:function(t,e,n){},592:function(t,e,n){},67:function(t,e,n){"use strict";var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d=n(35),f=n.n(d),p=n(42),b=n.n(p),m=n(34),h=n.n(m),g=n(68),v=n(71);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}Object(v.a)();var j=function(t){f()(a,t);var e,n=y(a);function a(){return c()(this,a),n.apply(this,arguments)}return l()(a,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",e)}},{key:"download",value:(e=s()(r.a.mark((function t(e){var n=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,this.generateArgs("GET")).then((function(t){return t.ok?t.blob():n.buildError(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.generateArgs(e,n);return this.restUrl.includes("?")&&(t=t.replace("?","&")),this.handleRequest(this.restUrl+t,a)}},{key:"handleRequest",value:function(t,e){var n=this;return fetch(t,e).then((function(t){return t.ok?t.json():n.buildError(t)}))}},{key:"generateArgs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==n.method&&e&&(n.body="string"==typeof e?e:JSON.stringify(e)),n}},{key:"buildError",value:function(t){return t.json().then((function(e){var n=new Error(e.message||t.statusText);return Promise.reject(Object.assign(n,{response:t}))}))}}]),a}(g.a);e.a=j},68:function(t,e,n){"use strict";var a=n(14),r=n.n(a),o=function t(e){r()(this,t),this.ID=e.ID,this.caps=e.caps,this.roles=e.roles,this.user_email=e.data,this.user_login=e.data.user_email,this.user_nicename=e.data.user_login};e.a=function t(){r()(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new o(WPML_TM_SETTINGS.currentUser)}},76:function(t,e,n){},837:function(t,e,n){}});