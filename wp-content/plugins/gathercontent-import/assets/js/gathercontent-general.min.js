/*! GatherContent Plugin - v3.1.9 - 2018-02-14 | http://www.gathercontent.com | Copyright (c) 2018 GatherContent | Licensed GPLv2 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=Backbone.Collection.extend({getById:function(a){return this.find(function(b){var c=b.get("id");return c===a||c&&a&&c==a})}})},{}],2:[function(a,b,c){"use strict";b.exports=function(b){var c=null,d="asc",e=b.collections.base.extend({model:b.models.item,totalChecked:0,allChecked:!1,syncEnabled:!1,processing:!1,sortKey:c,sortDirection:d,initialize:function(a,b){this.listenTo(this,"checkAll",this.toggleChecked),this.listenTo(this,"checkSome",this.toggleCheckedIf),this.listenTo(this,"change:checked",this.checkChecked),this.listenTo(this,"sortByColumn",this.sortByColumn),this.totalChecked=this.checked().length,b&&b.reinit&&this.reinit(a)},reinit:function(a){this.totalChecked=this.checked(a).length,this.syncEnabled=this.totalChecked>0,this.allChecked=this.totalChecked>=a.length,this.sortKey=c,this.sortDirection=d,this.sort()},checkChecked:function(a){a.changed.checked?this.totalChecked++:(this.totalChecked===this.length&&(this.allChecked=!1),this.totalChecked--),this.checkAllStatus()},checkAllStatus:function(a){var b=this.syncEnabled;this.syncEnabled=this.totalChecked>0,b!==this.syncEnabled&&this.trigger("enabledChange",this.syncEnabled),this.totalChecked<this.length&&this.trigger("notAllChecked",!1)},toggleCheckedIf:function(a){this.processing=!0,this.stopListening(this,"change:checked",this.checkChecked),this.each(function(b){b.set("checked",Boolean("function"==typeof a?a(b):a))}),this.listenTo(this,"change:checked",this.checkChecked),this.totalChecked=this.checked().length,this.allChecked=this.totalChecked>=this.length,this.checkAllStatus(),this.processing=!1,this.trigger("render")},toggleChecked:function(a){this.allChecked=a,this.toggleCheckedIf(a)},checked:function(a){return a=a||this,a.filter(function(a){return a.get("checked")})},comparator:function(a,b){if(this.sortKey){var c=a.get(this.sortKey),d=b.get(this.sortKey);return"updated_at"===this.sortKey&&(c=c.date||c,d=d.date||d),"status"===this.sortKey&&(c=c.name||c,d=d.name||d),"asc"===this.sortDirection?c>d?-1:d>c?1:0:d>c?-1:c>d?1:0}},sortByColumn:function(a,b){this.sortKey=c=a,this.sortDirection=d=b,this.sort()}});return a("./../collections/search-extension.js")(e)}},{"./../collections/search-extension.js":5}],3:[function(a,b,c){"use strict";b.exports=function(a){return a.collections.base.extend({model:a.models.navItem,initialize:function(){this.listenTo(this,"activate",this.activate)},getActive:function(){return this.find(function(a){return!a.get("hidden")})},activate:function(a){this.each(function(a){a.set("hidden",!0)}),this.getById(a).set("hidden",!1),this.trigger("render")}})}},{}],4:[function(a,b,c){"use strict";b.exports=function(b){var c=a("./../collections/items.js")(b);return a("./../collections/search-extension.js")(c.extend({model:b.models.post,initialize:function(a,b){c.prototype.initialize.call(this,a,b),this.listenTo(this,"updateItems",this.updateItems)},updateItems:function(a){this.each(function(b){var c=b.get("id");c in a&&(a[c].status&&b.set("status",a[c].status),a[c].itemName&&b.set("itemName",a[c].itemName),a[c].updated_at&&b.set("updated_at",a[c].updated_at))})},checkedCan:function(a){switch(a){case"pull":a="canPull";break;case"assign":a="disabled";break;default:a="canPush"}var b=this.find(function(b){return b.get(a)&&b.get("checked")});return b}}))}},{"./../collections/items.js":2,"./../collections/search-extension.js":5}],5:[function(a,b,c){"use strict";b.exports=function(a){return _.extend(a.prototype,{_searchResults:null,search:function(a,b){var c=this._doSearch(a,b);return this.trigger("search",c),c},_doSearch:function(b,c){if(c=c&&c.length?c:!1,!this.models.length)return[];var d=this.matcher,e=b?this.filter(function(a){return c=c?c:a.searchAttributes||_.keys(a.attributes),_.some(c,function(c){return d(b,a.get(c))})}):this.models;this.trigger("searchResults",e);var f=new a(e,{reinit:!0});return f.searching={keyword:b,attributes:c},f.getSearchQuery=function(){return this.searching},this._searchResults=f,this.trigger("search",f),f},matcher:function(a,b){return a&&b?(a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),b.indexOf(a)>=0):void 0},getSearchValue:function(){return this.getSearchQuery().keyword},getSearchQuery:function(){return this._searchResults&&this._searchResults.getSearchQuery()||{}},getSearchResults:function(){return this._searchResults},current:function(){return this._searchResults||this}}),a}},{}],6:[function(a,b,c){"use strict";window.GatherContent=window.GatherContent||{},function(b,c,d,e,f){e.general=e.general||{};var g=e.general;a("./initiate-objects.js")(g),g.models.post=a("./models/post.js")(e),g.collections.posts=a("./collections/posts.js")(g),g.views.postRow=a("./views/post-row.js")(g,e),g.views.statusSelect2=a("./views/status-select2.js")(g),g.views.postRows=a("./views/post-rows.js")(g,e,d),g.models.navItem=a("./models/modal-nav-item.js")(g),g.collections.navItems=a("./collections/modal-nav-items.js")(g),g.views.tableBase=a("./views/table-base.js")(g,d,e),g.views.modalPostRow=a("./views/modal-post-row.js")(g,e),g.views.modal=a("./views/modal.js")(g,e,d),g.monkeyPatchQuickEdit=function(a){var c=b.inlineEditPost.edit;b.inlineEditPost.edit=function(){c.apply(this,arguments),a.apply(this,arguments)}},g.triggerModal=function(a){a.preventDefault();var b=g.getChecked();b.length&&g.modalView===f&&(g.modalView=new g.views.modal({collection:g.generalView.collection}),g.modalView.checked(b),g.generalView.listenTo(g.modalView,"updateModels",g.generalView.updatePosts))},g.getChecked=function(){return d('tbody th.check-column input[type="checkbox"]:checked').map(function(){return parseInt(d(this).val(),10)}).get()},g.init=function(){d(c.body).addClass("gathercontent-admin-select2").on("click","#gc-sync-modal",g.triggerModal),d(c).ajaxSend(function(a,b,c){c.data&&-1!==c.data.indexOf("&action=inline-save")&&g.generalView.trigger("quickEditSend",b,c)}),g.generalView=new g.views.postRows({collection:new g.collections.posts(e._posts)}),g.monkeyPatchQuickEdit(function(){g.generalView.trigger("quickEdit",arguments,this)})},d(g.init)}(window,document,jQuery,window.GatherContent)},{"./collections/modal-nav-items.js":3,"./collections/posts.js":4,"./initiate-objects.js":7,"./models/modal-nav-item.js":10,"./models/post.js":12,"./views/modal-post-row.js":18,"./views/modal.js":19,"./views/post-row.js":20,"./views/post-rows.js":21,"./views/status-select2.js":22,"./views/table-base.js":23}],7:[function(a,b,c){"use strict";b.exports=function(b){b.models={base:a("./models/base.js")},b.collections={base:a("./collections/base.js")},b.views={base:a("./views/base.js")}}},{"./collections/base.js":1,"./models/base.js":9,"./views/base.js":13}],8:[function(a,b,c){"use strict";b.exports=function(a,b){return b=jQuery.extend({},{action:"gc_sync_items",data:"",percent:0,nonce:"",id:"",stopSync:!0,flush_cache:!1},b),a.models.base.extend({defaults:b,initialize:function(){this.listenTo(this,"send",this.send)},reset:function(){return this.clear().set(this.defaults),this},send:function(a,b,c,d){return c&&this.set("percent",c),jQuery.post(window.ajaxurl,{action:this.get("action"),percent:this.get("percent"),nonce:this.get("nonce"),id:this.get("id"),data:a,flush_cache:this.get("flush_cache")},function(c){return this.trigger("response",c,a),c.success?b(c):d?d(c):void 0}.bind(this)),this}})}},{}],9:[function(a,b,c){"use strict";b.exports=Backbone.Model.extend({sync:function(){return!1}})},{}],10:[function(a,b,c){"use strict";b.exports=function(a){return a.models.base.extend({defaults:{label:"",id:"",hidden:!0,rendered:!1}})}},{}],11:[function(a,b,c){"use strict";b.exports=function(a){return a.prototype._get=function(a,b){return this["_get_"+b]&&(a=this["_get_"+b](a)),a},a.prototype.get=function(a){return this._get(Backbone.Model.prototype.get.call(this,a),a)},a.prototype.toJSON=function(){return _.mapObject(Backbone.Model.prototype.toJSON.call(this),_.bind(this._get,this))},a}},{}],12:[function(a,b,c){"use strict";b.exports=function(b){return a("./../models/modify-json.js")(Backbone.Model.extend({defaults:{id:0,item:0,itemName:"",updated_at:"",current:!0,editLink:"",mapping:0,mappingName:"",mappingLink:"",mappingStatus:"",mappingStatusId:"",status:{},checked:!1,disabled:!1,canPull:!1,canPush:!1,statuses:[],statusesChecked:!1,ptLabel:!1},searchAttributes:["itemName","mappingName","post_title"],url:function c(){var c=window.ajaxurl+"?action=gc_fetch_js_post&id="+this.get("id");return this.get("uncached")&&(this.set("uncached",!1),c+="&flush_cache=force"),c},_get_disabled:function(a){return!this.get("mapping")},_get_canPull:function(a){return this.get("item")>0&&this.get("mapping")>0},_get_canPush:function(a){return this.get("mapping")>0},_get_mappingLink:function(a){return"failed"===Backbone.Model.prototype.get.call(this,"mappingStatus")&&(a+="&sync-items=1"),a},_get_mappingStatus:function(a){return b._statuses[a]?b._statuses[a]:""},_get_mappingStatusId:function(a){return Backbone.Model.prototype.get.call(this,"mappingStatus")}}))}},{"./../models/modify-json.js":11}],13:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({toggleExpanded:function(a){this.model.set("expanded",!this.model.get("expanded"))},getRenderedModels:function(a,b){b=b||this.collection;var c=document.createDocumentFragment();return b.each(function(b){var d=new a({model:b}).render();c.appendChild(d.el)}),c},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},close:function(){this.remove(),this.unbind(),this.onClose&&this.onClose()}})},{}],14:[function(a,b,c){"use strict";b.exports=function(a){return a.views.base.extend({template:wp.template("gc-item"),tagName:"tr",className:"gc-item gc-enabled",id:function(){return this.model.get("id")},events:{"change .gc-check-column input":"toggleCheck","click .gc-reveal-items":"toggleExpanded","click .gc-status-column":"toggleCheckAndRender"},initialize:function(){this.listenTo(this.model,"change:checked",this.render)},toggleCheck:function(){this.model.set("checked",!this.model.get("checked"))},toggleCheckAndRender:function(a){this.toggleCheck(),this.render()}})}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c,d){var e,f=a("./../views/metabox-base.js")(b,c,d);return f.extend({template:wp.template("gc-mapping-metabox"),stepArgs:!1,events:{"click #gc-map":"step","change #select-gc-next-step":"setProperty","click #gc-map-cancel":"cancel"},initialize:function(){e=this,this.listenTo(this.model,"change:waiting",this.toggleWaitingRender),this.listenTo(this.model,"change",this.maybeEnableAndRender),this.listenTo(this.model,"change:step",this.changeStep),this.listenTo(this,"cancel",this.resetAndRender),this.render(),this.$el.removeClass("no-js").addClass("gc-mapping-metabox")},changeStep:function(a){"accounts"===a.changed.step&&this.$el.addClass("gc-mapping-started"),a.changed.step&&(this.stepArgs=this["step_"+a.changed.step]())},setProperty:function(a){var b=c(a.target).val();this.model.set(this.stepArgs.property,b),"account"!==this.stepArgs.property&&"project"!==this.stepArgs.property||this.step()},setMapping:function(){var a=function(a){this.model.set("waiting",!1),this.trigger("complete",this.model,a)};this.ajax({action:"gc_save_mapping_id"},a,this.failMsg)},maybeEnableAndRender:function(a){(a.changed.account||a.changed.project||a.changed.mapping)&&(this.model.set("btnDisabled",!1),this.render())},toggleWaitingRender:function(a){a.changed.waiting&&this.model.set("btnDisabled",!0),this.render()},step:function(){if(this.model.set("waiting",!0),"mapping"===this.stepArgs.property)return this.setMapping();this.setStep();var a=this.model.get(this.stepArgs.properties);return a&&a.length?this.successHandler(a):this.ajax({action:"gc_wp_filter_mappings",property:this.stepArgs.property},this.successHandler,this.failMsg),this},failMsg:function(a){a="string"==typeof a?a:d._errors.unknown,window.alert(a),e.model.set("waiting",!1)},successHandler:function(a){this.model.set(this.stepArgs.properties,a),a.length<2&&this.model.set("btnDisabled",!1),this.model.set("waiting",!1)},setStep:function(){return this.model.get("step")?"accounts"===this.model.get("step")?this.model.set("step","projects"):"projects"===this.model.get("step")?this.model.set("step","mappings"):void 0:this.model.set("step","accounts")},step_accounts:function(){return{property:"account",properties:"accounts"}},step_projects:function(){return{property:"project",properties:"projects"}},step_mappings:function(){return{property:"mapping",properties:"mappings"}},cancel:function(a){this.trigger("cancel",a)},resetModel:function(){return this.stepArgs=!1,this.model.set({step:!1,account:0,project:0,mapping:0}),this.model},resetAndRender:function(){this.resetModel(),this.render()},render:function(){var a=this.model.toJSON();return this.stepArgs&&(a.label=d._step_labels[a.step],a.property=this.stepArgs.property),this.$el.html(this.template(a)),this}})}},{"./../views/metabox-base.js":16}],16:[function(a,b,c){"use strict";b.exports=function(a,b,c){return a.views.base.extend({el:"#gc-related-data",ajax:function(a,d,e){var f=this,g=function(a){a.success?d.call(f,a.data):e&&e.call(f,a.data)},h=b.post(window.ajaxurl,b.extend({action:"",post:this.model.toJSON(),nonce:c.$id("gc-edit-nonce").val(),flush_cache:c.queryargs.flush_cache?1:0},a),g);return e&&h.fail(function(){e.call(f)}),h}})}},{}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d){var e=a("./../views/mapping-metabox.js")(b,c,d),f=new Backbone.Model({id:!0,cancelBtn:!0,accounts:[],projects:[],mappings:[]}),g=e.extend({close:function(){f=this.resetModel(),e.prototype.close.call(this)}});return function(a){f.set("ids",a);var b=new g({model:f});return b.$el.addClass("postbox"),b.step()}}},{"./../views/mapping-metabox.js":15}],18:[function(a,b,c){"use strict";b.exports=function(b,c){var d=a("./../views/item.js")(b);return d.extend({template:wp.template("gc-item"),id:function(){return"gc-modal-post-"+this.model.get("id")},className:function(){return"gc-item "+(this.model.get("disabled")?"gc-disabled":"gc-enabled")},events:{"change .gc-check-column input":"toggleCheck","click .gc-status-column":"toggleCheckAndRender"},initialize:function(){this.listenTo(this.model,"change:post_title",this.renderTitle),this.listenTo(this.model,"change:mappingStatus",this.render),this.listenTo(this.model,"render",this.render)},renderTitle:function(){var a=this.model.get("post_title"),b=this.model.get("id");c.$id("post-"+b).find(".column-title .row-title").text(a),c.$id("edit-"+b).find('[name="post_title"]').text(a),c.$id("inline_"+b).find(".post_title").text(a)}})}},{"./../views/item.js":14}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d){b.modalView=void 0;var e,f=27;return b.views.tableBase.extend({id:"gc-bb-modal-dialog",template:wp.template("gc-modal-window"),selected:[],navItems:null,btns:{},currID:"select-items",currNav:!1,metaboxView:null,modelView:b.views.modalPostRow,$search:c.$id("gc-items-search"),events:{"click .gc-bb-modal-close":"closeModal","click #btn-cancel":"closeModal","click .gc-bb-modal-backdrop":"closeModal","click .gc-bb-modal-nav-tabs a":"clickSelectTab","change .gc-field-th.gc-check-column input":"checkAll","click #gc-btn-pull":"startPull","click #gc-btn-push":"startPush","click .gc-cloak":"maybeResetMetaboxView","click #gc-btn-assign-mapping":"startAssignment","click .gc-field-th.sortable":"sortRowsByColumn"},initialize:function(){e=this,this.$search.length||(d(document.body).append('<div id="gc-items-search" class="hidden"></div>'),this.$search=c.$id("gc-items-search")),b.views.tableBase.prototype.initialize.call(this),_.bindAll(this,"render","preserveFocus","maybeClose","closeModal"),c._nav_items&&(this.navItems=new b.collections.navItems(c._nav_items),this.currNav=this.navItems.getActive(),this.listenTo(this.navItems,"render",this.render)),this.btns=new b.collections.base(c._modal_btns),this.listenTo(this.collection,"updateItems",this.maybeRender),this.listenTo(this.collection,"change:checked",this.checkEnableButton),this.listenTo(this.collection,"search",this.render),this.initMetaboxView=a("./../views/modal-assign-mapping.js")(b,d,c)},checked:function(a){return this.selected=a,a.length?a.length===this.collection.length?this.collection.trigger("checkAll",!0):(this.collection.trigger("checkSome",function(a){return-1!==_.indexOf(e.selected,a.get("id"))&&!a.get("disabled")}),this):void 0},setupAjax:function(){var d=a("./../models/ajax.js")(b,{action:"gc_pull_items",nonce:c._edit_nonce,flush_cache:c.queryargs.flush_cache?1:0});this.ajax=new d},render:function(){var a=this.collection.current();return this.$el.removeClass("gc-set-mapping").attr("tabindex","0").html(this.template({btns:this.btns.toJSON(),navItems:this.navItems?this.navItems.toJSON():[],currID:this.currNav?this.currNav.get("id"):"select-items",checked:a.allChecked,sortKey:a.sortKey,sortDirection:a.sortDirection})).append('<div class="gc-bb-modal-backdrop">&nbsp;</div>'),b.views.tableBase.prototype.render.call(this),d(document).on("focusin",this.preserveFocus).on("keyup",this.maybeClose),d(document.body).addClass("gc-modal-open"),this.$search.before(this.$el),this.$search.css(jQuery("#gc-tablenav").offset()),this.isSearch(document.activeElement)||this.$el.focus(),this},preserveFocus:function(a){var b=this.$el[0]===a.target||this.$el.has(a.target).length||this.isSearch(a.target);b||this.$el.focus()},maybeClose:function(a){f!==a.keyCode||this.isSearch(a.target)||this.closeModal(a)},isSearch:function(a){return this.$search[0]===a||this.$search.has(a).length},closeModal:function(a){a.preventDefault(),this.resetMetaboxView(),this.undelegateEvents(),d(document).off("focusin"),d(document).off("keyup",this.maybeClose),d(document.body).removeClass("gc-modal-open"),this.remove(),c.$id("bulk-edit").find("button.cancel").trigger("click"),b.modalView=void 0},clickSelectTab:function(a){a.preventDefault(),this.selectTab(d(a.target).data("id"))},selectTab:function(a){this.currID=a,this.currNav=this.navItems.getById(a),this.navItems.trigger("activate",a)},checkEnableButton:function(a){this.buttonStatus(a)},buttonStatus:function(a){this.collection.processing||(a?(this.$("#gc-btn-assign-mapping").prop("disabled",!this.collection.checkedCan("assign")),this.$("#gc-btn-push").prop("disabled",!this.collection.checkedCan("push")),this.$("#gc-btn-pull").prop("disabled",!this.collection.checkedCan("pull"))):this.$(".media-toolbar button").prop("disabled",!0))},startPull:function(a){a.preventDefault(),this.startSync("pull")},startPush:function(a){a.preventDefault(),this.startSync("push")},startSync:function(a){var b="push"===a?"canPush":"canPull",d=this.selectiveGet(b);window.confirm(c._sure[a])&&(d=_.map(d,function(a){return a.set("mappingStatus","starting"),a.toJSON()}),this.doAjax(d,a))},startAssignment:function(a){var b=_.map(this.selectiveGet("disabled"),function(a){return a.get("id")});this.resetMetaboxView(),this.$el.addClass("gc-set-mapping"),this.$("#gc-btn-assign-mapping").prop("disabled",!0),this.metaboxView=this.initMetaboxView(b),this.listenTo(this.metaboxView,"cancel",this.maybeResetMetaboxView),this.listenTo(this.metaboxView,"complete",function(a,b){a.set("waiting",!0),this.collection.map(function(a){a.get("id")in b.ids&&(a.set("mapping",b.mapping),a.set("mappingName",b.mappingName),a.set("mappingLink",b.mappingLink))}),this.render()})},maybeResetMetaboxView:function(){this.metaboxView&&(this.resetMetaboxView(),this.buttonStatus(!0))},resetMetaboxView:function(){this.metaboxView&&(this.stopListening(this.metaboxView),this.metaboxView.close(),this.$el.removeClass("gc-set-mapping"))},selectiveGet:function(a){var b,c=[];return this.collection.trigger("checkSome",function(d){return b=d.get("checked")&&d.get(a),b&&c.push(d),b}),c},getChecked:function(a){this.collection.filter(function(b){var c=b.get("checked");return c&&a&&a(b),c})},ajaxSuccess:function(a){if(!a.data.mappings)return this.ajaxFail();var b=[],c="push"===a.data.direction?"canPush":"canPull";this.getChecked(function(d){d.get(c)&&(a.data.mappings.length&&-1!==_.indexOf(a.data.mappings,d.get("mapping"))?(d.set("mappingStatus","syncing"),b.push(d.get("mapping"))):(d.set("checked",!1),d.set("mappingStatus","complete"),d.fetch().done(function(){d.trigger("render")})))});return b.length?void this.checkStatus(b,a.data.direction):this.clearTimeout()},ajaxFail:function(a){this.setSelectedMappingStatus("failed"),this.clearTimeout()},setSelectedMappingStatus:function(a){return this.getChecked(function(b){b.set("mappingStatus",a)})},checkStatus:function(a,b){this.clearTimeout(),this.setTimeout(function(){e.doAjax({check:a},b)})},doAjax:function(a,b){this.ajax.set("action","gc_"+b+"_items"),this.ajax.send(a,this.ajaxSuccess.bind(this),0,this.ajaxFail.bind(this))},maybeRender:function(){this.metaboxView||this.render()}})}},{"./../models/ajax.js":8,"./../views/modal-assign-mapping.js":17}],20:[function(a,b,c){"use strict";b.exports=function(a,b){return a.views.base.extend({template:wp.template("gc-post-column-row"),tagName:"span",className:"gc-status-column",id:function(){return"gc-status-row-"+this.model.get("id")},initialize:function(){this.listenTo(this.model,"change:status",this.render)},html:function(){return this.template(this.model.toJSON())},render:function(){var a=b.$id("post-"+this.model.get("id")).find(".column-gathercontent");return a.html(this.html()),this}})}},{}],21:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d;return a.views.statusSelect2.extend({template:wp.template("gc-status-select2"),el:"#posts-filter tbody",width:"200px",initialize:function(){d=this,this.listenTo(this,"quickEdit",this.edit),this.listenTo(this,"quickEditSend",this.sending),this.render(),this.updatePosts()},updatePosts:function(){c.post(window.ajaxurl,{action:"gc_get_posts",posts:b._posts,flush_cache:b.queryargs.flush_cache?1:0},function(a){a.success,a.data&&d.collection.trigger("updateItems",a.data)})},sending:function(a,b){var c=this.parseQueryString(b.data);if(c.post_ID&&c.gc_status){var d=this.collection.getById(c.post_ID),e=_.find(d.get("statuses"),function(a){return parseInt(a.id,10)===parseInt(c.gc_status,10)});d.set("status",e)}},edit:function(a,e){var f=0;if("object"==typeof a&&(f=parseInt(e.getId(a),10)),this.waitSpinner(f),f){var g=this.collection.getById(f);return g.get("statusesChecked")?this.renderStatuses(g):void c.post(window.ajaxurl,{action:"gc_get_post_statuses",postId:f,flush_cache:b.queryargs.flush_cache?1:0},this.ajaxResponse).done(function(){d.renderStatuses(g)})}},ajaxResponse:function(a){if(a.data){var b=d.collection.getById(a.data.postId);b&&(b.set("statusesChecked",!0),a.success&&(b.set("statuses",a.data.statuses),b.get("statuses").length&&(d.$(".gc-select2").each(function(){c(this).select2("destroy")}),d.renderStatuses(b))))}},renderStatuses:function(a){var c=a.get("id");this.editSelect(c).html(this.template(a.toJSON())),a.get("statuses").length&&this.renderSelect2(b.$id("edit-"+c))},waitSpinner:function(a){this.editSelect(a).html('<span class="spinner"></span>')},editSelect:function(a){return b.$id("edit-"+a).find(".inline-edit-group .gc-status-select2")},render:function(){return this.collection.each(function(b){new a.views.postRow({model:b}).render()}),this},parseQueryString:function(a){return a?_.chain(a.split("&")).map(function(a){var b=a.split("=");return[b[0],decodeURIComponent(b[1])]}).object().value():{}}})}},{}],22:[function(a,b,c){"use strict";b.exports=function(a){var b;return a.views.base.extend({select2ItemTemplate:wp.template("gc-select2-item"),width:"250px",renderSelect2:function(a){var c=a?a.find(".gc-select2"):this.$(".gc-select2");return b=this,c.each(function(){var a=jQuery(this),c=a.data();a.select2(b.select2Args(c));var d=a.data("select2");d.$results.addClass("select2-"+c.column),d.$container.addClass("select2-"+c.column)}),this},select2Args:function(a){var c={width:b.width};return c.templateResult=function(a,c){var d=jQuery.extend(a,jQuery(a.element).data());return d.description=!1===c?!1:d.description||"",jQuery(b.select2ItemTemplate(a))}.bind(b),c.templateSelection=function(a){return c.templateResult(a,!1)},c}})}},{}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d){return b.views.tableSearch=a("./../views/table-search.js")(b,c,d),b.views.tableNav=a("./../views/table-nav.js")(b,c,d),b.views.base.extend({timeoutID:null,ajax:null,tableNavView:null,searchView:null,modelView:null,timeoutTime:1e3,events:{"click .gc-field-th.sortable":"sortRowsByColumn","change .gc-field-th.gc-check-column input":"checkAll"},initialize:function(){this.setupAjax(),this.listenTo(this.collection,"render",this.render),this.listenTo(this.collection,"notAllChecked",this.allCheckedStatus),this.listenTo(this.collection,"change:checked",this.renderNav),this.listenTo(this,"render",this.render),this.tableNavView=new b.views.tableNav({collection:this.collection}),this.searchView=new b.views.tableSearch({collection:this.collection})},setupAjax:function(){},sortRowsByColumn:function(a){a.preventDefault();var b=this.collection.current(),d=c(a.currentTarget),e=d.find("a").data("id"),f=!1;d.hasClass("asc")&&(f="desc"),d.hasClass("desc")&&(f="asc"),f||(f=b.sortDirection),"asc"===f?d.addClass("desc").removeClass("asc"):d.addClass("asc").removeClass("desc"),b.trigger("sortByColumn",e,f),this.sortRender()},buttonStatus:function(a){this.$(".button-primary").prop("disabled",!a)},allCheckedStatus:function(){this.$(".gc-field-th.gc-check-column input").prop("checked",this.collection.allChecked)},checkAll:function(a){this.collection.trigger("checkAll",c(a.target).is(":checked"))},doSpinner:function(){var a=this.blankRow('<span class="gc-loader spinner is-active"></span>');this.renderRows(a)},setTimeout:function(a){this.timeoutID=window.setTimeout(a,this.timeoutTime)},clearTimeout:function(){window.clearTimeout(this.timeoutID),this.timeoutID=null},getRenderedRows:function(){var a;return a=this.collection.current().length?this.getRenderedModels(this.modelView,this.collection.current()):this.blankRow(d._text.no_items)},sortRender:function(){this.render()},blankRow:function(a){var b=this.$("thead tr > *").length;return'<tr><td colspan="'+b+'">'+a+"</td></tr>"},renderRows:function(a){this.$("tbody").html(a||this.getRenderedRows())},renderNav:function(){this.$("#gc-tablenav").html(this.tableNavView.render().el)},render:function(){var a=this.collection.current();return this.renderRows(),this.renderNav(),this.buttonStatus(a.syncEnabled),this.allCheckedStatus(a.allChecked),this}})}},{"./../views/table-nav.js":24,"./../views/table-search.js":25}],24:[function(a,b,c){"use strict";b.exports=function(a,b,c){return a.views.base.extend({template:wp.template("gc-table-nav"),render:function(){var a=this.collection.current();return this.$el.html(this.template({count:a.length,selected:a.checked?a.checked().length:0})),this}})}},{}],25:[function(a,b,c){"use strict";b.exports=function(a){return Backbone.View.extend({el:"#gc-items-search",template:wp.template("gc-table-search"),events:{"keyup #gc-search-input":"filterCollection","search #gc-search-input":"filterCollection"},initialize:function(){this.render()},filterCollection:_.debounce(function(a){this.collection.search(a.target.value)},100),render:function(){return this.$el.html(this.template()),this}})}},{}]},{},[6]);