{% extends "base.twig" %}

{% block content %}
<main class="color-light-background" id="content" itemscope itemtype="http://schema.org/WebPage">
  {% if alerts %}
  <div class="px-2 screen-tablet:px-3 pt-2 screen-tablet:pt-3">
    {% for alert in alerts %}
      {% set class = loop.last ? '' : 'mb-2 screen-tablet:mb-3' %}

      {% include 'components/alert.twig' with {this: alert, class: class} only %}
    {% endfor %}
  </div>
  {% endif %}

  <article itemprop="mainEntityOfPage">
    <header class="c-header mt-3 print:mt-0">
      <div>
        <h1 itemprop="name" class="c-header__descriptor">{{ post.title }}</h1>
        <h2 class="c-header__information text-color-grey-mid mb-4" itemprop="dateModified">
          {{ __('Last Updated', 'accessnyc-page') }} {{ post.post_date_modified|date('l, F dS, H:ia') }}
        </h2>
        <div class="screen-tablet:text-font-size-larger font-serif">
          {{ post.get_field('field_58b480ca3081c') }} {# lead #}
        </div>
      </div>
    </header>

    {% if post.custom.jump_navigation == '' or post.custom.jump_navigation == '1' %}
    {% set sidebar = true %}
    {% endif %}

    <div class="usa-grid {% if sidebar %}screen-desktop:layout--sidebar-gutter{% endif %}">
      {% if sidebar %}
      <aside>
        <nav class="c-side-nav sticky top-0 pt-1 print:hidden">
          <ul>
            {% for section in post.get_field('field_58b480f33081d') %} {# sections #}
            {% if section.section_title %}
            <li class="border-none pb-0">
              <a href="#section-{{ loop.index }}">{{ section.section_title }}</a>
            </li>
            {% endif %}
            {% endfor %}
          </ul>
        </nav>
      </aside>
      {% endif %}

      <div class="o-content">
        {% for section in post.get_field('field_58b480f33081d') %} {# sections #}
        <section id="section-{{ loop.index }}">
          {% if section.section_title %}<h2>{{ section.section_title }}</h2>{% endif %}
          {{ section.section_content }}
        </section>
        {% endfor %}
      </div>
    </div>

    <footer class="usa-grid py-4">
      <p class="text-color-grey-mid m-0" itemprop="dateModified">
        {{ __('Last Updated', 'accessnyc-page') }} {{ post.post_date_modified|date('l, F dS, H:ia') }}
      </p>
    </footer>
  </article>
</main>
{% endblock %}
