$search-height: 70px;
$control-width: 33%;

.map {
  height: 90vh;
  position: relative;

  @include media($bp-below-tablet) {
    height: auto;
  }
}

.map-controls {
  background: $color-white;
  position: relative;
  z-index: 1;

  @include media($bp-tablet-up) {
    @if $text-direction == 'rtl' {
      @include position(absolute, 0 0 0 null);
    } @else {
      @include position(absolute, 0 null 0 0);
    }
    overflow-x: hidden;
    overflow-y: scroll;
    width: $control-width;
  }
}

.map-mapbox {
  @if $text-direction == 'rtl' {
    @include position(absolute, 0 $control-width 0 0);
  } @else {
    @include position(absolute, 0 0 0 $control-width);
  }

  @include media($bp-below-tablet) {
    @include position(static, 0 0 0 0);
    height: 50vh;
    max-height: 450px;
    width: 100%;
  }
}

.map-location-list {
  list-style: none;
  margin: 0;
  padding: 0;

  li {
    @include transition(background .1s ease-in);
    @if $text-direction == 'rtl' {
      background-position: right $spacing-base top (1.3 * $spacing-base);
      padding: $spacing-base (3 * $spacing-base) $spacing-base $spacing-base;
    } @else {
      background-position: $spacing-base (1.3 * $spacing-base);
      padding: $spacing-base $spacing-base $spacing-base (3 * $spacing-base);
    }
    background-color: $color-white;
    background-image: url('/wp-content/themes/access/assets/img/map-pin-green.png');
    background-repeat: no-repeat;
    background-size: 33px 40px;
    border-bottom: 1px solid $color-grey-light;
    cursor: pointer;

    &.active {
      background-color: $color-yellow-light;
    }

    &.govt-office {
      background-image: url('/wp-content/themes/access/assets/img/map-pin-blue.png');
    }
  }

  .link-more {
    font-size: $font-size-small;
    font-weight: $font-weight-bold;
  }
}

.map-loading,
.map-no-results {
  @include typography-supplemental();
  display: none;
  padding: $spacing-base;
  text-align: center;
}

.loading .map-loading,
.no-results .map-no-results {
  display: block;
}

.map .map-search {
  height: $search-height;
  padding: $spacing-base;
  width: 100%;
}

.map-location-name {
  margin: 0;
}

.map-location-details {
  @include typography-supplemental();
  font-size: $font-size-small();
}

.map-filter-header {
  @include align-items(center);
  display: flex;
  @include justify-content(space-between)
  border-radius: 0;
  font-size: $font-size-small;
  padding: $spacing-base;
  text-align: $text-direction-start;

  &::after {
    @include position(relative, -.1em null null null);
    @include size(0 0);
    @include triangle(.8em .6em, $color-white, down);
    content: '';
    display: inline-block;
    margin-#{$text-direction-start}: .5em;
  }

  &.active {
    &::after {
      @include triangle(.8em .6em, $color-white, up);
      border-top: 0;
    }
  }
}

.map-filter-container {
  border-bottom: 1px solid $color-grey-light;
}

.map-filter-list,
.map-filter-program-list {
  list-style: none;
  margin: 0;
}

.map-filter-list {
  padding: 0 $spacing-base;
}

.map-filter-program-list {
  padding: 0;
}

.map-filter-category {
  border-bottom: 1px solid $color-grey-light;
  font-weight: $font-weight-bold;
  padding: $spacing-base 0;

  &:last-child {
    border: 0;
  }
}

.map-filter-category-header {
  display: flex;
  @include justify-content(space-between);
}

.map-filter-program {
  font-size: $font-size-small;
  font-weight: $font-weight-normal;
  margin: (.5 * $spacing-base) 0;
  min-height: $checkbox-size;

  .styled-checkbox {
    padding-top: .25 * $spacing-base;
  }
}

.map-filter-toggle {
  padding: .5 * $spacing-base;

  &::after {
    @include size(0 0);
    @include triangle(.6em .4em, $color-blue, down);
    content: '';
    display: inline-block;
    float: $text-direction-end;
  }

  &.active {
    &::after {
      @include triangle(.6em .4em, $color-blue, up);
      border-top: 0;
    }

    .map-filter-collapse {
      display: inline;
    }

    .map-filter-expand {
      display: none;
    }
  }

  .map-filter-collapse {
    display: none;
  }
}

.map-filter-programs {
  margin: 0 -4px;
  padding: 0 4px;
}
.map-filter-programs,
.map-filter-body {
  @include transition(max-height .4s ease-in);
  max-height: 0;
  overflow: hidden;

  &.active {
    max-height: 3000px;
  }
}

.map-pagination-body {
  border-top: 1px solid $color-grey-mid;
  font-size: $font-size-small;
  padding: $spacing-base;
  text-align: $text-direction-end;

  .btn {
    margin-#{$text-direction-start}: $spacing-base;
  }
}
